
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Add Surface Type observations to Datacubes &#8212; DTC-Glaciers notebooks</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=bd95c4b6" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/06_sfc_type_workflow';</script>
    <script data-domain="dtcglaciers.org" defer="defer" src="https://plausible.oggm.org/js/script.js"></script>
    <link rel="canonical" href="https://notebooks.dtcglaciers.org/notebooks/06_sfc_type_workflow.html" />
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Set up a gdir to play with" href="05_mcs_workflow_example.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="Nov 18, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../welcome.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.jpg" class="logo__image only-light" alt="DTC-Glaciers notebooks - Home"/>
    <script>document.write(`<img src="../_static/logo.jpg" class="logo__image only-dark" alt="DTC-Glaciers notebooks - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../welcome.html">
                    DTC Glaciers notebooks
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Preliminary notebooks</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="04_calibrate_with_eolis_data.html">Calibrating OGGM Mass Balance with CryoSat-2 Observations</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_explore_datacubes.html">Comparing Models to Observations Using Datacubes</a></li>

<li class="toctree-l1"><a class="reference internal" href="01_alps.html">Glacier runoff in the Alps</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_iceland.html">CryoSat2 - model comparison at Vatnaj√∂kull ice cap, Iceland</a></li>
<li class="toctree-l1"><a class="reference internal" href="05_mcs_workflow_example.html">Set up a gdir to play with</a></li>





<li class="toctree-l1 current active"><a class="current reference internal" href="#">Add Surface Type observations to Datacubes</a></li>



</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://hub.dtcglaciers.org/hub/user-redirect/git-pull?repo=https%3A//github.com/DTC-Glaciers/dtcg-notebooks&urlpath=lab/tree/dtcg-notebooks/notebooks/06_sfc_type_workflow.ipynb&branch=main" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on JupyterHub"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="JupyterHub logo" src="../_static/images/logo_jupyterhub.svg">
  </span>
<span class="btn__text-container">JupyterHub</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/DTC-Glaciers/dtcg-notebooks" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/DTC-Glaciers/dtcg-notebooks/edit/main/notebooks/06_sfc_type_workflow.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/DTC-Glaciers/dtcg-notebooks/issues/new?title=Issue%20on%20page%20%2Fnotebooks/06_sfc_type_workflow.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/06_sfc_type_workflow.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Add Surface Type observations to Datacubes</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Add Surface Type observations to Datacubes</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#initialize-a-gdir-as-an-example">Initialize a gdir as an example</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#add-surface-type-observation-to-gridded-data">add surface type observation to gridded data</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-a-snow-line-observation">Generate a snow line observation</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#define-elevation-bands-used-for-snow-line-creation">Define elevation bands used for snow line creation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#count-surface-types-and-uncertainty-flags-per-elevation-band">Count surface types and uncertainty flags per elevation band</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#define-snowline-altitude-for-each-time-stamp">Define snowline altitude for each time stamp</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exclude-elevation-bins-with-no-valid-data">exclude elevation bins with no valid data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exclude-dates-with-more-than-50-cloud-cover">exclude dates with more than 50% cloud cover</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-snowline">define snowline</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#look-at-result-of-derived-snowline-from-observation-per-timestamp">look at result of derived snowline from observation per timestamp</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#compare-snowline-to-sfctypetimodel-without-using-snowline-for-calibration">Compare snowline to SfcTypeTIModel without using snowline for calibration</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-sfctypetimodel-and-calibrate">Get SfcTypeTIModel and calibrate</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-snow-buckets-for-observation-dates">Get snow buckets for observation dates</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-modelled-snowline">get modelled snowline</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-for-comparision">plot for comparision</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#next-steps">Next Steps</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <p><strong>Important</strong>: This notebook only works together with the oggm dev branch at the moment</p>
<section class="tex2jax_ignore mathjax_ignore" id="add-surface-type-observations-to-datacubes">
<h1>Add Surface Type observations to Datacubes<a class="headerlink" href="#add-surface-type-observations-to-datacubes" title="Link to this heading">#</a></h1>
<p>Here I demonstrate the workflow for adding surface type observations to the Datacube. This code should be added to <a class="github reference external" href="https://github.com/DTC-Glaciers/dtcg">DTC-Glaciers/dtcg</a>, following a similar approach to how the eolis data is integrated into the Datacubes.</p>
<section id="initialize-a-gdir-as-an-example">
<h2>Initialize a gdir as an example<a class="headerlink" href="#initialize-a-gdir-as-an-example" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">oggm</span><span class="w"> </span><span class="kn">import</span> <span class="n">utils</span><span class="p">,</span> <span class="n">workflow</span><span class="p">,</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">tasks</span><span class="p">,</span> <span class="n">DEFAULT_BASE_URL</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cfg</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

<span class="n">working_dir</span> <span class="o">=</span> <span class="s1">&#39;working_dir_sfc_type&#39;</span>
<span class="n">utils</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">working_dir</span><span class="p">)</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">PATHS</span><span class="p">[</span><span class="s1">&#39;working_dir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">working_dir</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-11-18 13:50:25: oggm.cfg: Reading default parameters from the OGGM `params.cfg` configuration file.
2025-11-18 13:50:25: oggm.cfg: Multiprocessing switched OFF according to the parameter file.
2025-11-18 13:50:25: oggm.cfg: Multiprocessing: using all available processors (N=4)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rgi_ids</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;RGI60-11.00719&#39;</span><span class="p">,</span>  <span class="c1"># Vernagtferner</span>
           <span class="c1">#&#39;RGI60-11.00897&#39;,  # Hintereisferner</span>
          <span class="p">]</span>
<span class="n">gdirs</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">init_glacier_directories</span><span class="p">(</span>
    <span class="n">rgi_ids</span><span class="p">,</span>  <span class="c1"># which glaciers?</span>
    <span class="n">prepro_base_url</span><span class="o">=</span><span class="n">DEFAULT_BASE_URL</span><span class="p">,</span>  <span class="c1"># where to fetch the data?</span>
    <span class="n">from_prepro_level</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>  <span class="c1"># what kind of data? </span>
    <span class="n">prepro_border</span><span class="o">=</span><span class="mi">80</span>  <span class="c1"># how big of a map?</span>
<span class="p">)</span>
<span class="n">gdir</span> <span class="o">=</span> <span class="n">gdirs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-11-18 13:50:26: oggm.workflow: init_glacier_directories from prepro level 4 on 1 glaciers.
2025-11-18 13:50:26: oggm.workflow: Execute entity tasks [gdir_from_prepro] on 1 glaciers
2025-11-18 13:50:26: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~oggm/gdirs/oggm_v1.6/L3-L5_files/2023.3/elev_bands/W5E5_spinup/RGI62/b_080/L4/RGI60-11/RGI60-11.00.tar to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~oggm/gdirs/oggm_v1.6/L3-L5_files/2023.3/elev_bands/W5E5_spinup/RGI62/b_080/L4/RGI60-11/RGI60-11.00.tar...
  0% of 267.5 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of 267.5 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:29:35
  0% of 267.5 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:19:43
  0% of 267.5 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:12:18
  0% of 267.5 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:08:11
  0% of 267.5 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:05:09
  0% of 267.5 MiB |                      | Elapsed Time: 0:00:02 ETA:   0:03:38
  1% of 267.5 MiB |                      | Elapsed Time: 0:00:02 ETA:   0:03:04
  1% of 267.5 MiB |                      | Elapsed Time: 0:00:02 ETA:   0:02:39
  2% of 267.5 MiB |                      | Elapsed Time: 0:00:03 ETA:   0:02:22
  2% of 267.5 MiB |                      | Elapsed Time: 0:00:03 ETA:   0:02:09
  2% of 267.5 MiB |                      | Elapsed Time: 0:00:03 ETA:   0:02:01
  3% of 267.5 MiB |                      | Elapsed Time: 0:00:03 ETA:   0:01:51
  3% of 267.5 MiB |                      | Elapsed Time: 0:00:04 ETA:   0:01:44
  4% of 267.5 MiB |                      | Elapsed Time: 0:00:04 ETA:   0:01:38
  4% of 267.5 MiB |#                     | Elapsed Time: 0:00:04 ETA:   0:01:33
  5% of 267.5 MiB |#                     | Elapsed Time: 0:00:04 ETA:   0:01:27
  5% of 267.5 MiB |#                     | Elapsed Time: 0:00:05 ETA:   0:01:23
  6% of 267.5 MiB |#                     | Elapsed Time: 0:00:05 ETA:   0:01:19
  7% of 267.5 MiB |#                     | Elapsed Time: 0:00:05 ETA:   0:01:15
  7% of 267.5 MiB |#                     | Elapsed Time: 0:00:06 ETA:   0:01:11
  8% of 267.5 MiB |#                     | Elapsed Time: 0:00:06 ETA:   0:01:08
  9% of 267.5 MiB |##                    | Elapsed Time: 0:00:06 ETA:   0:01:05
  9% of 267.5 MiB |##                    | Elapsed Time: 0:00:06 ETA:   0:01:02
 10% of 267.5 MiB |##                    | Elapsed Time: 0:00:07 ETA:   0:00:59
 11% of 267.5 MiB |##                    | Elapsed Time: 0:00:07 ETA:   0:00:57
 12% of 267.5 MiB |##                    | Elapsed Time: 0:00:07 ETA:   0:00:54
 13% of 267.5 MiB |##                    | Elapsed Time: 0:00:07 ETA:   0:00:51
 14% of 267.5 MiB |###                   | Elapsed Time: 0:00:08 ETA:   0:00:49
 15% of 267.5 MiB |###                   | Elapsed Time: 0:00:08 ETA:   0:00:47
 16% of 267.5 MiB |###                   | Elapsed Time: 0:00:08 ETA:   0:00:45
 17% of 267.5 MiB |###                   | Elapsed Time: 0:00:09 ETA:   0:00:42
 18% of 267.5 MiB |####                  | Elapsed Time: 0:00:09 ETA:   0:00:40
 19% of 267.5 MiB |####                  | Elapsed Time: 0:00:09 ETA:   0:00:38
 20% of 267.5 MiB |####                  | Elapsed Time: 0:00:09 ETA:   0:00:38
 21% of 267.5 MiB |####                  | Elapsed Time: 0:00:09 ETA:   0:00:37
 22% of 267.5 MiB |####                  | Elapsed Time: 0:00:10 ETA:   0:00:36
 23% of 267.5 MiB |#####                 | Elapsed Time: 0:00:10 ETA:   0:00:35
 24% of 267.5 MiB |#####                 | Elapsed Time: 0:00:10 ETA:   0:00:33
 25% of 267.5 MiB |#####                 | Elapsed Time: 0:00:11 ETA:   0:00:32
 26% of 267.5 MiB |#####                 | Elapsed Time: 0:00:11 ETA:   0:00:31
 26% of 267.5 MiB |#####                 | Elapsed Time: 0:00:11 ETA:   0:00:32
 27% of 267.5 MiB |######                | Elapsed Time: 0:00:11 ETA:   0:00:30
 28% of 267.5 MiB |######                | Elapsed Time: 0:00:12 ETA:   0:00:29
 30% of 267.5 MiB |######                | Elapsed Time: 0:00:12 ETA:   0:00:29
 31% of 267.5 MiB |######                | Elapsed Time: 0:00:12 ETA:   0:00:28
 32% of 267.5 MiB |#######               | Elapsed Time: 0:00:13 ETA:   0:00:27
 33% of 267.5 MiB |#######               | Elapsed Time: 0:00:13 ETA:   0:00:26
 34% of 267.5 MiB |#######               | Elapsed Time: 0:00:13 ETA:   0:00:25
 35% of 267.5 MiB |#######               | Elapsed Time: 0:00:13 ETA:   0:00:25
 36% of 267.5 MiB |########              | Elapsed Time: 0:00:13 ETA:   0:00:24
 36% of 267.5 MiB |########              | Elapsed Time: 0:00:14 ETA:   0:00:24
 37% of 267.5 MiB |########              | Elapsed Time: 0:00:14 ETA:   0:00:23
 38% of 267.5 MiB |########              | Elapsed Time: 0:00:14 ETA:   0:00:23
 39% of 267.5 MiB |########              | Elapsed Time: 0:00:15 ETA:   0:00:22
 40% of 267.5 MiB |#########             | Elapsed Time: 0:00:15 ETA:   0:00:22
 42% of 267.5 MiB |#########             | Elapsed Time: 0:00:15 ETA:   0:00:21
 43% of 267.5 MiB |#########             | Elapsed Time: 0:00:15 ETA:   0:00:20
 44% of 267.5 MiB |#########             | Elapsed Time: 0:00:16 ETA:   0:00:20
 45% of 267.5 MiB |#########             | Elapsed Time: 0:00:16 ETA:   0:00:20
 46% of 267.5 MiB |##########            | Elapsed Time: 0:00:16 ETA:   0:00:19
 47% of 267.5 MiB |##########            | Elapsed Time: 0:00:17 ETA:   0:00:19
 48% of 267.5 MiB |##########            | Elapsed Time: 0:00:17 ETA:   0:00:18
 49% of 267.5 MiB |##########            | Elapsed Time: 0:00:17 ETA:   0:00:18
 50% of 267.5 MiB |###########           | Elapsed Time: 0:00:18 ETA:   0:00:17
 51% of 267.5 MiB |###########           | Elapsed Time: 0:00:18 ETA:   0:00:17
 52% of 267.5 MiB |###########           | Elapsed Time: 0:00:18 ETA:   0:00:16
 53% of 267.5 MiB |###########           | Elapsed Time: 0:00:18 ETA:   0:00:16
 54% of 267.5 MiB |###########           | Elapsed Time: 0:00:18 ETA:   0:00:15
 54% of 267.5 MiB |############          | Elapsed Time: 0:00:19 ETA:   0:00:15
 55% of 267.5 MiB |############          | Elapsed Time: 0:00:19 ETA:   0:00:15
 55% of 267.5 MiB |############          | Elapsed Time: 0:00:19 ETA:   0:00:15
 56% of 267.5 MiB |############          | Elapsed Time: 0:00:19 ETA:   0:00:14
 57% of 267.5 MiB |############          | Elapsed Time: 0:00:19 ETA:   0:00:14
 58% of 267.5 MiB |############          | Elapsed Time: 0:00:20 ETA:   0:00:14
 59% of 267.5 MiB |#############         | Elapsed Time: 0:00:20 ETA:   0:00:13
 59% of 267.5 MiB |#############         | Elapsed Time: 0:00:20 ETA:   0:00:13
 60% of 267.5 MiB |#############         | Elapsed Time: 0:00:20 ETA:   0:00:13
 60% of 267.5 MiB |#############         | Elapsed Time: 0:00:20 ETA:   0:00:13
 61% of 267.5 MiB |#############         | Elapsed Time: 0:00:20 ETA:   0:00:12
 62% of 267.5 MiB |#############         | Elapsed Time: 0:00:20 ETA:   0:00:12
 62% of 267.5 MiB |#############         | Elapsed Time: 0:00:21 ETA:   0:00:12
 63% of 267.5 MiB |#############         | Elapsed Time: 0:00:21 ETA:   0:00:12
 63% of 267.5 MiB |##############        | Elapsed Time: 0:00:21 ETA:   0:00:12
 64% of 267.5 MiB |##############        | Elapsed Time: 0:00:21 ETA:   0:00:11
 66% of 267.5 MiB |##############        | Elapsed Time: 0:00:22 ETA:   0:00:11
 67% of 267.5 MiB |##############        | Elapsed Time: 0:00:22 ETA:   0:00:10
 68% of 267.5 MiB |###############       | Elapsed Time: 0:00:22 ETA:   0:00:10
 69% of 267.5 MiB |###############       | Elapsed Time: 0:00:22 ETA:   0:00:10
 70% of 267.5 MiB |###############       | Elapsed Time: 0:00:23 ETA:   0:00:09
 71% of 267.5 MiB |###############       | Elapsed Time: 0:00:23 ETA:   0:00:09
 72% of 267.5 MiB |###############       | Elapsed Time: 0:00:23 ETA:   0:00:08
 73% of 267.5 MiB |################      | Elapsed Time: 0:00:23 ETA:   0:00:08
 74% of 267.5 MiB |################      | Elapsed Time: 0:00:24 ETA:   0:00:08
 75% of 267.5 MiB |################      | Elapsed Time: 0:00:24 ETA:   0:00:07
 76% of 267.5 MiB |################      | Elapsed Time: 0:00:24 ETA:   0:00:07
 77% of 267.5 MiB |#################     | Elapsed Time: 0:00:25 ETA:   0:00:07
 78% of 267.5 MiB |#################     | Elapsed Time: 0:00:25 ETA:   0:00:06
 79% of 267.5 MiB |#################     | Elapsed Time: 0:00:25 ETA:   0:00:06
 80% of 267.5 MiB |#################     | Elapsed Time: 0:00:25 ETA:   0:00:06
 82% of 267.5 MiB |##################    | Elapsed Time: 0:00:26 ETA:   0:00:05
 83% of 267.5 MiB |##################    | Elapsed Time: 0:00:26 ETA:   0:00:05
 84% of 267.5 MiB |##################    | Elapsed Time: 0:00:26 ETA:   0:00:04
 85% of 267.5 MiB |##################    | Elapsed Time: 0:00:27 ETA:   0:00:04
 86% of 267.5 MiB |###################   | Elapsed Time: 0:00:27 ETA:   0:00:04
 87% of 267.5 MiB |###################   | Elapsed Time: 0:00:27 ETA:   0:00:03
 88% of 267.5 MiB |###################   | Elapsed Time: 0:00:27 ETA:   0:00:03
 89% of 267.5 MiB |###################   | Elapsed Time: 0:00:28 ETA:   0:00:03
 90% of 267.5 MiB |###################   | Elapsed Time: 0:00:28 ETA:   0:00:02
 91% of 267.5 MiB |####################  | Elapsed Time: 0:00:28 ETA:   0:00:02
 92% of 267.5 MiB |####################  | Elapsed Time: 0:00:29 ETA:   0:00:02
 93% of 267.5 MiB |####################  | Elapsed Time: 0:00:29 ETA:   0:00:01
 95% of 267.5 MiB |####################  | Elapsed Time: 0:00:29 ETA:   0:00:01
 96% of 267.5 MiB |##################### | Elapsed Time: 0:00:29 ETA:   0:00:01
 97% of 267.5 MiB |##################### | Elapsed Time: 0:00:30 ETA:   0:00:00
 98% of 267.5 MiB |##################### | Elapsed Time: 0:00:30 ETA:   0:00:00
 99% of 267.5 MiB |##################### | Elapsed Time: 0:00:30 ETA:   0:00:00
100% of 267.5 MiB |######################| Elapsed Time: 0:00:30 Time:  0:00:30
</pre></div>
</div>
</div>
</div>
</section>
<section id="add-surface-type-observation-to-gridded-data">
<h2>add surface type observation to gridded data<a class="headerlink" href="#add-surface-type-observation-to-gridded-data" title="Link to this heading">#</a></h2>
<p>For simplicity, instead of creating a lookup table for the original observation files, I merged them for our region of interest in Austria (only two files per timestamp). If there is still time for further development, we could add the option to use the original files by creating a lookup table.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">xarray</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xr</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">salem</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bs4</span><span class="w"> </span><span class="kn">import</span> <span class="n">BeautifulSoup</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This function is based on oggm.shop.millan22._filter_and_reproj</span>
<span class="k">def</span><span class="w"> </span><span class="nf">reproject_single_sfc_type_file</span><span class="p">(</span><span class="n">gdir</span><span class="p">,</span> <span class="n">input_file</span><span class="p">):</span>
    <span class="c1"># Subset to avoid mega files</span>
    <span class="n">dsb</span> <span class="o">=</span> <span class="n">salem</span><span class="o">.</span><span class="n">GeoTiff</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>
    
    <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">gdir</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">extent_in_crs</span><span class="p">(</span><span class="n">dsb</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">proj</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">():</span>
        <span class="c1"># This can trigger an out of bounds warning</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">RuntimeWarning</span><span class="p">,</span>
                                <span class="n">message</span><span class="o">=</span><span class="s1">&#39;.*out of bounds.*&#39;</span><span class="p">)</span>
        <span class="n">dsb</span><span class="o">.</span><span class="n">set_subset</span><span class="p">(</span><span class="n">corners</span><span class="o">=</span><span class="p">((</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">),</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">)),</span>
                       <span class="n">crs</span><span class="o">=</span><span class="n">dsb</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">proj</span><span class="p">,</span>
                       <span class="n">margin</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    
    <span class="n">data_sfc_types</span> <span class="o">=</span> <span class="n">dsb</span><span class="o">.</span><span class="n">get_vardata</span><span class="p">(</span><span class="n">var_id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">data_uncertainty</span> <span class="o">=</span> <span class="n">dsb</span><span class="o">.</span><span class="n">get_vardata</span><span class="p">(</span><span class="n">var_id</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    
    <span class="c1"># Reproject now</span>
    <span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">():</span>
        <span class="c1"># This can trigger an out of bounds warning</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">RuntimeWarning</span><span class="p">,</span>
                                <span class="n">message</span><span class="o">=</span><span class="s1">&#39;.*out of bounds.*&#39;</span><span class="p">)</span>
        <span class="n">r_data_sfc_types</span> <span class="o">=</span> <span class="n">gdir</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">map_gridded_data</span><span class="p">(</span><span class="n">data_sfc_types</span><span class="p">,</span> <span class="n">dsb</span><span class="o">.</span><span class="n">grid</span><span class="p">,</span> <span class="n">interp</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span>
        <span class="n">r_data_uncertainty</span> <span class="o">=</span> <span class="n">gdir</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">map_gridded_data</span><span class="p">(</span><span class="n">data_uncertainty</span><span class="p">,</span> <span class="n">dsb</span><span class="o">.</span><span class="n">grid</span><span class="p">,</span> <span class="n">interp</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">r_data_sfc_types</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">r_data_uncertainty</span><span class="o">.</span><span class="n">data</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">add_sfc_type_observation</span><span class="p">(</span><span class="n">gdir</span><span class="p">,</span> <span class="n">data_base_url</span><span class="p">):</span>
    <span class="c1"># open gridded data</span>
    <span class="k">with</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">gdir</span><span class="o">.</span><span class="n">get_filepath</span><span class="p">(</span><span class="s1">&#39;gridded_data&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">ds</span><span class="p">:</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

    <span class="c1"># get all available files of observations from the url, only one per day</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">data_base_url</span><span class="p">)</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
    
    <span class="n">files_used</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">sfc_type_dates</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">href</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">file</span> <span class="o">=</span> <span class="n">link</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.tif&#39;</span><span class="p">):</span>
            <span class="n">date</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">date</span> <span class="ow">in</span> <span class="n">sfc_type_dates</span><span class="p">:</span>
                <span class="c1"># their is already an observation for this date available</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Surface type for </span><span class="si">{</span><span class="n">date</span><span class="si">}</span><span class="s1"> already added! &#39;</span>
                                 <span class="s1">&#39;Check the provided input files, for each &#39;</span>
                                 <span class="s1">&#39;date only one should be provided!&#39;</span><span class="p">)</span>
            <span class="n">sfc_type_dates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
            <span class="n">files_used</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

    <span class="c1"># prepare structure for data</span>
    <span class="n">sfc_type_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">sfc_type_dates</span><span class="p">),</span> <span class="o">*</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;glacier_mask&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
    <span class="n">sfc_type_uncertainty</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">sfc_type_dates</span><span class="p">),</span> <span class="o">*</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;glacier_mask&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>

    <span class="c1"># loop through all files and add one after the other</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">filename</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">files_used</span><span class="p">):</span>
        <span class="c1"># download data</span>
        <span class="n">input_file</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">file_downloader</span><span class="p">(</span><span class="n">data_base_url</span> <span class="o">+</span> <span class="n">filename</span><span class="p">)</span>
        
        <span class="n">r_data</span><span class="p">,</span> <span class="n">r_uncertainty</span> <span class="o">=</span> <span class="n">reproject_single_sfc_type_file</span><span class="p">(</span><span class="n">gdir</span><span class="p">,</span> <span class="n">input_file</span><span class="p">)</span>
        <span class="n">sfc_type_data</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">r_data</span>
        <span class="n">sfc_type_uncertainty</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">r_uncertainty</span>

    <span class="c1"># use nan for missing data</span>
    <span class="n">missing_data_val</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="n">sfc_type_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">sfc_type_data</span> <span class="o">==</span> <span class="mi">255</span><span class="p">,</span>
                             <span class="n">missing_data_val</span><span class="p">,</span> <span class="n">sfc_type_data</span><span class="p">)</span>
    <span class="n">sfc_type_uncertainty</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">sfc_type_uncertainty</span> <span class="o">==</span> <span class="mi">255</span><span class="p">,</span>
                                    <span class="n">missing_data_val</span><span class="p">,</span> <span class="n">sfc_type_uncertainty</span><span class="p">)</span>

    <span class="c1"># add to gridded data with some attributes</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;t_sfc_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">sfc_type_dates</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;t_sfc_type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Timestamp of surface type observations&#39;</span>
    <span class="p">}</span>
    <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;sfc_type_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;t_sfc_type&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">sfc_type_data</span><span class="p">)</span>
    <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;sfc_type_data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Glacier facies classification&#39;</span><span class="p">,</span>
        <span class="s1">&#39;data_source&#39;</span><span class="p">:</span> <span class="s1">&#39;ENVEO&#39;</span><span class="p">,</span>
        <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span>
        <span class="s1">&#39;code_description&#39;</span><span class="p">:</span> <span class="s1">&#39;Extract dict with ast.literal_eval(ds.code).&#39;</span><span class="p">,</span>
        <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">({</span>
            <span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;unclassified&#39;</span><span class="p">,</span>
            <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;snow&#39;</span><span class="p">,</span>
            <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;firn / old snow / bright ice&#39;</span><span class="p">,</span>
            <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;clean ice&#39;</span><span class="p">,</span>
            <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;debris&#39;</span><span class="p">,</span>
            <span class="mi">5</span><span class="p">:</span> <span class="s1">&#39;cloud&#39;</span><span class="p">,</span>
            <span class="s1">&#39;nan&#39;</span><span class="p">:</span> <span class="s1">&#39;no data&#39;</span><span class="p">,</span>
        <span class="p">}),</span>
    <span class="p">}</span>

    <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;sfc_type_uncertainty&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;t_sfc_type&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">sfc_type_uncertainty</span><span class="p">)</span>
    <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;sfc_type_uncertainty&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;long_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Glacier facies classification uncertainty&#39;</span><span class="p">,</span>
        <span class="s1">&#39;data_source&#39;</span><span class="p">:</span> <span class="s1">&#39;ENVEO&#39;</span><span class="p">,</span>
        <span class="s1">&#39;units&#39;</span><span class="p">:</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span>
        <span class="s1">&#39;code_description&#39;</span><span class="p">:</span> <span class="s1">&#39;Extract dict with ast.literal_eval(ds.code).&#39;</span><span class="p">,</span>
        <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">({</span>
            <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;low uncertainty for illuminated pixel&#39;</span><span class="p">,</span>
            <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;medium uncertainty for illuminated pixel&#39;</span><span class="p">,</span>
            <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;high uncertainty for illuminated pixel&#39;</span><span class="p">,</span>
            <span class="mi">5</span><span class="p">:</span> <span class="s1">&#39;cloud&#39;</span><span class="p">,</span>
            <span class="mi">11</span><span class="p">:</span> <span class="s1">&#39;low uncertainty for shaded pixel&#39;</span><span class="p">,</span>
            <span class="mi">12</span><span class="p">:</span> <span class="s1">&#39;medium uncertainty for shaded pixel&#39;</span><span class="p">,</span>
            <span class="mi">13</span><span class="p">:</span> <span class="s1">&#39;high uncertainty for shaded pixel&#39;</span><span class="p">,</span>
            <span class="s1">&#39;nan&#39;</span><span class="p">:</span> <span class="s1">&#39;no data&#39;</span><span class="p">,</span>
        <span class="p">}),</span>
    <span class="p">}</span>

    <span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">sortby</span><span class="p">(</span><span class="s1">&#39;t_sfc_type&#39;</span><span class="p">)</span>

    <span class="n">ds</span><span class="o">.</span><span class="n">to_netcdf</span><span class="p">(</span><span class="n">gdir</span><span class="o">.</span><span class="n">get_filepath</span><span class="p">(</span><span class="s1">&#39;gridded_data&#39;</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">ds</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_base_url</span> <span class="o">=</span> <span class="s1">&#39;https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/&#39;</span>
<span class="n">ds_test</span> <span class="o">=</span> <span class="n">add_sfc_type_observation</span><span class="p">(</span><span class="n">gdir</span><span class="p">,</span> <span class="n">data_base_url</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-11-18 13:51:00: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20150704_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20150704_R022.tif...
  0% of  12.3 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  12.3 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:23
  2% of  12.3 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:55
  4% of  12.3 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:33
  7% of  12.3 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:22
 14% of  12.3 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:12
 27% of  12.3 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:06
 53% of  12.3 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 83% of  12.3 MiB |##################    | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.3 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:51:04: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20150803_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20150803_R022.tif...
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:24
  1% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:55
  2% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:46
  6% of  12.9 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:22
 12% of  12.9 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:12
 19% of  12.9 MiB |####                  | Elapsed Time: 0:00:02 ETA:   0:00:08
 26% of  12.9 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 33% of  12.9 MiB |#######               | Elapsed Time: 0:00:02 ETA:   0:00:05
 41% of  12.9 MiB |#########             | Elapsed Time: 0:00:02 ETA:   0:00:04
 50% of  12.9 MiB |###########           | Elapsed Time: 0:00:03 ETA:   0:00:03
 59% of  12.9 MiB |############          | Elapsed Time: 0:00:03 ETA:   0:00:02
 67% of  12.9 MiB |##############        | Elapsed Time: 0:00:03 ETA:   0:00:01
 77% of  12.9 MiB |#################     | Elapsed Time: 0:00:04 ETA:   0:00:01
 87% of  12.9 MiB |###################   | Elapsed Time: 0:00:04 ETA:   0:00:00
 97% of  12.9 MiB |##################### | Elapsed Time: 0:00:04 ETA:   0:00:00
100% of  12.9 MiB |######################| Elapsed Time: 0:00:04 Time:  0:00:04
2025-11-18 13:51:14: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20150813_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20150813_R022.tif...
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:26
  1% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:57
  3% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:35
  6% of  12.9 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 12% of  12.9 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:13
 25% of  12.9 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 50% of  12.9 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 73% of  12.9 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:01
 98% of  12.9 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.9 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:51:18: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20150826_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20150826_R065.tif...
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:23
  1% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:55
  2% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:55
  3% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:48
  4% of  13.2 MiB |#                     | Elapsed Time: 0:00:02 ETA:   0:00:44
  5% of  13.2 MiB |#                     | Elapsed Time: 0:00:02 ETA:   0:00:41
  6% of  13.2 MiB |#                     | Elapsed Time: 0:00:02 ETA:   0:00:38
  7% of  13.2 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:00:37
  8% of  13.2 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:00:35
  9% of  13.2 MiB |##                    | Elapsed Time: 0:00:03 ETA:   0:00:34
 10% of  13.2 MiB |##                    | Elapsed Time: 0:00:03 ETA:   0:00:33
 11% of  13.2 MiB |##                    | Elapsed Time: 0:00:04 ETA:   0:00:32
 13% of  13.2 MiB |##                    | Elapsed Time: 0:00:04 ETA:   0:00:29
 14% of  13.2 MiB |###                   | Elapsed Time: 0:00:04 ETA:   0:00:28
 15% of  13.2 MiB |###                   | Elapsed Time: 0:00:05 ETA:   0:00:27
 17% of  13.2 MiB |###                   | Elapsed Time: 0:00:05 ETA:   0:00:25
 18% of  13.2 MiB |###                   | Elapsed Time: 0:00:05 ETA:   0:00:25
 19% of  13.2 MiB |####                  | Elapsed Time: 0:00:05 ETA:   0:00:23
 21% of  13.2 MiB |####                  | Elapsed Time: 0:00:06 ETA:   0:00:21
 23% of  13.2 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:20
 24% of  13.2 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:20
 26% of  13.2 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:19
 28% of  13.2 MiB |######                | Elapsed Time: 0:00:07 ETA:   0:00:17
 29% of  13.2 MiB |######                | Elapsed Time: 0:00:07 ETA:   0:00:17
 31% of  13.2 MiB |######                | Elapsed Time: 0:00:07 ETA:   0:00:16
 32% of  13.2 MiB |#######               | Elapsed Time: 0:00:07 ETA:   0:00:15
 33% of  13.2 MiB |#######               | Elapsed Time: 0:00:07 ETA:   0:00:15
 35% of  13.2 MiB |#######               | Elapsed Time: 0:00:08 ETA:   0:00:14
 36% of  13.2 MiB |########              | Elapsed Time: 0:00:08 ETA:   0:00:13
 37% of  13.2 MiB |########              | Elapsed Time: 0:00:08 ETA:   0:00:13
 39% of  13.2 MiB |########              | Elapsed Time: 0:00:08 ETA:   0:00:13
 42% of  13.2 MiB |#########             | Elapsed Time: 0:00:08 ETA:   0:00:11
 45% of  13.2 MiB |##########            | Elapsed Time: 0:00:09 ETA:   0:00:10
 46% of  13.2 MiB |##########            | Elapsed Time: 0:00:09 ETA:   0:00:10
 48% of  13.2 MiB |##########            | Elapsed Time: 0:00:09 ETA:   0:00:09
 49% of  13.2 MiB |##########            | Elapsed Time: 0:00:09 ETA:   0:00:09
 52% of  13.2 MiB |###########           | Elapsed Time: 0:00:09 ETA:   0:00:08
 55% of  13.2 MiB |############          | Elapsed Time: 0:00:10 ETA:   0:00:07
 59% of  13.2 MiB |#############         | Elapsed Time: 0:00:10 ETA:   0:00:06
 60% of  13.2 MiB |#############         | Elapsed Time: 0:00:10 ETA:   0:00:06
 63% of  13.2 MiB |#############         | Elapsed Time: 0:00:10 ETA:   0:00:05
 64% of  13.2 MiB |##############        | Elapsed Time: 0:00:10 ETA:   0:00:05
 69% of  13.2 MiB |###############       | Elapsed Time: 0:00:10 ETA:   0:00:04
 73% of  13.2 MiB |################      | Elapsed Time: 0:00:10 ETA:   0:00:04
 73% of  13.2 MiB |################      | Elapsed Time: 0:00:11 ETA:   0:00:03
 78% of  13.2 MiB |#################     | Elapsed Time: 0:00:11 ETA:   0:00:03
 79% of  13.2 MiB |#################     | Elapsed Time: 0:00:11 ETA:   0:00:02
 84% of  13.2 MiB |##################    | Elapsed Time: 0:00:11 ETA:   0:00:02
 85% of  13.2 MiB |##################    | Elapsed Time: 0:00:11 ETA:   0:00:02
 90% of  13.2 MiB |###################   | Elapsed Time: 0:00:11 ETA:   0:00:01
 91% of  13.2 MiB |####################  | Elapsed Time: 0:00:11 ETA:   0:00:01
 95% of  13.2 MiB |##################### | Elapsed Time: 0:00:12 ETA:   0:00:00
 97% of  13.2 MiB |##################### | Elapsed Time: 0:00:12 ETA:   0:00:00
100% of  13.2 MiB |######################| Elapsed Time: 0:00:12 Time:  0:00:12
2025-11-18 13:51:33: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20151022_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20151022_R022.tif...
  0% of  12.5 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.5 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:24
  1% of  12.5 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:55
  2% of  12.5 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:46
  5% of  12.5 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:26
 11% of  12.5 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:14
 23% of  12.5 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:07
 45% of  12.5 MiB |##########            | Elapsed Time: 0:00:02 ETA:   0:00:03
 69% of  12.5 MiB |###############       | Elapsed Time: 0:00:02 ETA:   0:00:01
 93% of  12.5 MiB |####################  | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.5 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:51:38: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20160522_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20160522_R065.tif...
  0% of  11.9 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  11.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:01:43
  3% of  11.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:42
  5% of  11.9 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:29
  9% of  11.9 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:18
 18% of  11.9 MiB |####                  | Elapsed Time: 0:00:02 ETA:   0:00:09
 37% of  11.9 MiB |########              | Elapsed Time: 0:00:02 ETA:   0:00:04
 66% of  11.9 MiB |##############        | Elapsed Time: 0:00:03 ETA:   0:00:01
 92% of  11.9 MiB |####################  | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  11.9 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:51:42: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20160628_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20160628_R022.tif...
  0% of  11.8 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  11.8 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:18
  2% of  11.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:51
  4% of  11.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:31
  7% of  11.8 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:21
 13% of  11.8 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:12
 27% of  11.8 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:05
 55% of  11.8 MiB |############          | Elapsed Time: 0:00:02 ETA:   0:00:02
 80% of  11.8 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 81% of  11.8 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
100% of  11.8 MiB |######################| Elapsed Time: 0:00:02 Time:  0:00:02
2025-11-18 13:51:46: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20160718_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20160718_R022.tif...
  0% of  12.2 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  12.2 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:22
  2% of  12.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:54
  4% of  12.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:33
  7% of  12.2 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:22
 13% of  12.2 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  12.2 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 51% of  12.2 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 75% of  12.2 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
100% of  12.2 MiB |######################| Elapsed Time: 0:00:03 ETA:  00:00:00
100% of  12.2 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:51:52: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20160807_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20160807_R022.tif...
  0% of  12.1 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  12.1 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:19
  2% of  12.1 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:52
  3% of  12.1 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:43
  7% of  12.1 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:21
 13% of  12.1 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:12
 25% of  12.1 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 49% of  12.1 MiB |##########            | Elapsed Time: 0:00:02 ETA:   0:00:02
 76% of  12.1 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
100% of  12.1 MiB |######################| Elapsed Time: 0:00:02 Time:  0:00:02
2025-11-18 13:51:56: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20160827_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20160827_R022.tif...
  0% of  13.1 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.1 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:27
  1% of  13.1 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:57
  2% of  13.1 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:47
  5% of  13.1 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:27
 12% of  13.1 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:13
 23% of  13.1 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:07
 46% of  13.1 MiB |##########            | Elapsed Time: 0:00:02 ETA:   0:00:02
 70% of  13.1 MiB |###############       | Elapsed Time: 0:00:02 ETA:   0:00:01
 76% of  13.1 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 86% of  13.1 MiB |###################   | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  13.1 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:52:00: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20160909_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20160909_R065.tif...
  0% of  12.5 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.5 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:24
  1% of  12.5 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:55
  3% of  12.5 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:33
  6% of  12.5 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:21
 13% of  12.5 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:11
 20% of  12.5 MiB |####                  | Elapsed Time: 0:00:02 ETA:   0:00:08
 28% of  12.5 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:06
 36% of  12.5 MiB |########              | Elapsed Time: 0:00:02 ETA:   0:00:04
 44% of  12.5 MiB |#########             | Elapsed Time: 0:00:03 ETA:   0:00:03
 53% of  12.5 MiB |###########           | Elapsed Time: 0:00:03 ETA:   0:00:02
 62% of  12.5 MiB |#############         | Elapsed Time: 0:00:03 ETA:   0:00:02
 72% of  12.5 MiB |################      | Elapsed Time: 0:00:03 ETA:   0:00:01
 82% of  12.5 MiB |##################    | Elapsed Time: 0:00:04 ETA:   0:00:00
 92% of  12.5 MiB |####################  | Elapsed Time: 0:00:04 ETA:   0:00:00
 93% of  12.5 MiB |####################  | Elapsed Time: 0:00:04 ETA:   0:00:00
100% of  12.5 MiB |######################| Elapsed Time: 0:00:04 Time:  0:00:04
2025-11-18 13:52:06: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20160926_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20160926_R022.tif...
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:24
  1% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:55
  2% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:46
  5% of  12.9 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:26
 11% of  12.9 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:14
 23% of  12.9 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:07
 44% of  12.9 MiB |#########             | Elapsed Time: 0:00:02 ETA:   0:00:03
 68% of  12.9 MiB |##############        | Elapsed Time: 0:00:02 ETA:   0:00:01
 90% of  12.9 MiB |###################   | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.9 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:52:10: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20161016_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20161016_R022.tif...
  0% of  12.5 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.5 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:23
  1% of  12.5 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:54
  3% of  12.5 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:33
  6% of  12.5 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:21
 13% of  12.5 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:11
 20% of  12.5 MiB |####                  | Elapsed Time: 0:00:02 ETA:   0:00:08
 28% of  12.5 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:06
 36% of  12.5 MiB |########              | Elapsed Time: 0:00:02 ETA:   0:00:04
 44% of  12.5 MiB |#########             | Elapsed Time: 0:00:03 ETA:   0:00:03
 53% of  12.5 MiB |###########           | Elapsed Time: 0:00:03 ETA:   0:00:02
 62% of  12.5 MiB |#############         | Elapsed Time: 0:00:03 ETA:   0:00:02
 72% of  12.5 MiB |################      | Elapsed Time: 0:00:03 ETA:   0:00:01
 82% of  12.5 MiB |##################    | Elapsed Time: 0:00:04 ETA:   0:00:00
 93% of  12.5 MiB |####################  | Elapsed Time: 0:00:04 ETA:   0:00:00
100% of  12.5 MiB |######################| Elapsed Time: 0:00:04 Time:  0:00:04
2025-11-18 13:52:16: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20161029_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20161029_R065.tif...
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:25
  1% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:56
  2% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:46
  4% of  12.6 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:32
 10% of  12.6 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:16
 19% of  12.6 MiB |####                  | Elapsed Time: 0:00:02 ETA:   0:00:09
 38% of  12.6 MiB |########              | Elapsed Time: 0:00:02 ETA:   0:00:04
 63% of  12.6 MiB |#############         | Elapsed Time: 0:00:02 ETA:   0:00:01
 87% of  12.6 MiB |###################   | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.6 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:52:21: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170517_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170517_R065.tif...
  0% of  11.0 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  11.0 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:12
  2% of  11.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:47
  3% of  11.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:39
  5% of  11.0 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:27
 11% of  11.0 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:14
 22% of  11.0 MiB |####                  | Elapsed Time: 0:00:02 ETA:   0:00:07
 33% of  11.0 MiB |#######               | Elapsed Time: 0:00:02 ETA:   0:00:04
 46% of  11.0 MiB |##########            | Elapsed Time: 0:00:02 ETA:   0:00:03
 60% of  11.0 MiB |#############         | Elapsed Time: 0:00:02 ETA:   0:00:01
 73% of  11.0 MiB |################      | Elapsed Time: 0:00:03 ETA:   0:00:01
 87% of  11.0 MiB |###################   | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  11.0 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:52:25: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170527_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170527_R065.tif...
  0% of  11.1 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  11.1 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:13
  2% of  11.1 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:48
  4% of  11.1 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:29
  7% of  11.1 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:19
 15% of  11.1 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:10
 29% of  11.1 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:05
 57% of  11.1 MiB |############          | Elapsed Time: 0:00:02 ETA:   0:00:01
 84% of  11.1 MiB |##################    | Elapsed Time: 0:00:02 ETA:   0:00:00
 87% of  11.1 MiB |###################   | Elapsed Time: 0:00:02 ETA:   0:00:00
100% of  11.1 MiB |######################| Elapsed Time: 0:00:02 Time:  0:00:02
2025-11-18 13:52:30: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170613_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170613_R022.tif...
  0% of  12.0 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  12.0 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:21
  2% of  12.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:53
  4% of  12.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:32
  7% of  12.0 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:21
 14% of  12.0 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:11
 28% of  12.0 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:05
 55% of  12.0 MiB |############          | Elapsed Time: 0:00:02 ETA:   0:00:02
 79% of  12.0 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 81% of  12.0 MiB |#################     | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.0 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:52:34: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170626_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170626_R065.tif...
  0% of  12.4 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  12.4 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:21
  2% of  12.4 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:53
  4% of  12.4 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:32
  7% of  12.4 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:21
 14% of  12.4 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:11
 27% of  12.4 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:05
 52% of  12.4 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 77% of  12.4 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 78% of  12.4 MiB |#################     | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.4 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:52:39: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170706_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170706_R065.tif...
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:24
  1% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:55
  3% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:34
  6% of  12.6 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:22
 13% of  12.6 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  12.6 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 51% of  12.6 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 74% of  12.6 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 97% of  12.6 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.6 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:52:44: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170716_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170716_R065.tif...
  0% of  12.8 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.8 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:26
  1% of  12.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:57
  3% of  12.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:35
  6% of  12.8 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 13% of  12.8 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  12.8 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 51% of  12.8 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 74% of  12.8 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 95% of  12.8 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.8 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:52:48: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170805_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170805_R065.tif...
  0% of  12.7 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:01:51
  1% of  12.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:01:08
  2% of  12.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:54
  5% of  12.7 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:30
 10% of  12.7 MiB |##                    | Elapsed Time: 0:00:02 ETA:   0:00:18
 21% of  12.7 MiB |####                  | Elapsed Time: 0:00:02 ETA:   0:00:08
 43% of  12.7 MiB |#########             | Elapsed Time: 0:00:02 ETA:   0:00:03
 65% of  12.7 MiB |##############        | Elapsed Time: 0:00:03 ETA:   0:00:01
 88% of  12.7 MiB |###################   | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.7 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:52:54: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170807_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170807_R022.tif...
  0% of  13.0 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.0 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:27
  1% of  13.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:57
  2% of  13.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:47
  4% of  13.0 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:33
  8% of  13.0 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:20
 17% of  13.0 MiB |###                   | Elapsed Time: 0:00:02 ETA:   0:00:10
 34% of  13.0 MiB |#######               | Elapsed Time: 0:00:02 ETA:   0:00:04
 59% of  13.0 MiB |#############         | Elapsed Time: 0:00:02 ETA:   0:00:01
 60% of  13.0 MiB |#############         | Elapsed Time: 0:00:03 ETA:   0:00:02
 84% of  13.0 MiB |##################    | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  13.0 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:52:59: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170822_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170822_R022.tif...
  0% of  13.0 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.0 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:26
  1% of  13.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:57
  3% of  13.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:35
  6% of  13.0 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 13% of  13.0 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:12
 25% of  13.0 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 51% of  13.0 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 74% of  13.0 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 96% of  13.0 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  13.0 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:53:05: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170825_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170825_R065.tif...
  0% of  13.1 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.1 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:28
  1% of  13.1 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:58
  2% of  13.1 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:48
  4% of  13.1 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:33
  9% of  13.1 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:18
 18% of  13.1 MiB |###                   | Elapsed Time: 0:00:02 ETA:   0:00:10
 36% of  13.1 MiB |#######               | Elapsed Time: 0:00:02 ETA:   0:00:04
 62% of  13.1 MiB |#############         | Elapsed Time: 0:00:02 ETA:   0:00:01
 63% of  13.1 MiB |##############        | Elapsed Time: 0:00:03 ETA:   0:00:01
 88% of  13.1 MiB |###################   | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  13.1 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:53:10: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170830_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170830_R065.tif...
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:26
  1% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:57
  3% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:35
  6% of  13.2 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 12% of  13.2 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:13
 25% of  13.2 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 49% of  13.2 MiB |##########            | Elapsed Time: 0:00:02 ETA:   0:00:02
 74% of  13.2 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 75% of  13.2 MiB |################      | Elapsed Time: 0:00:03 ETA:   0:00:00
 96% of  13.2 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  13.2 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:53:14: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170921_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20170921_R022.tif...
  0% of  12.0 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  12.0 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:17
  2% of  12.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:01:17
  3% of  12.0 MiB |                      | Elapsed Time: 0:00:02 ETA:   0:01:08
  4% of  12.0 MiB |                      | Elapsed Time: 0:00:02 ETA:   0:01:03
  5% of  12.0 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:01:00
  6% of  12.0 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:00:54
  7% of  12.0 MiB |#                     | Elapsed Time: 0:00:04 ETA:   0:00:53
  8% of  12.0 MiB |#                     | Elapsed Time: 0:00:04 ETA:   0:00:49
  9% of  12.0 MiB |##                    | Elapsed Time: 0:00:04 ETA:   0:00:47
 10% of  12.0 MiB |##                    | Elapsed Time: 0:00:05 ETA:   0:00:45
 11% of  12.0 MiB |##                    | Elapsed Time: 0:00:05 ETA:   0:00:43
 12% of  12.0 MiB |##                    | Elapsed Time: 0:00:05 ETA:   0:00:41
 13% of  12.0 MiB |##                    | Elapsed Time: 0:00:06 ETA:   0:00:39
 14% of  12.0 MiB |###                   | Elapsed Time: 0:00:06 ETA:   0:00:37
 16% of  12.0 MiB |###                   | Elapsed Time: 0:00:06 ETA:   0:00:33
 17% of  12.0 MiB |###                   | Elapsed Time: 0:00:06 ETA:   0:00:32
 19% of  12.0 MiB |####                  | Elapsed Time: 0:00:07 ETA:   0:00:29
 20% of  12.0 MiB |####                  | Elapsed Time: 0:00:07 ETA:   0:00:28
 21% of  12.0 MiB |####                  | Elapsed Time: 0:00:07 ETA:   0:00:27
 22% of  12.0 MiB |#####                 | Elapsed Time: 0:00:07 ETA:   0:00:26
 24% of  12.0 MiB |#####                 | Elapsed Time: 0:00:07 ETA:   0:00:24
 26% of  12.0 MiB |#####                 | Elapsed Time: 0:00:08 ETA:   0:00:23
 28% of  12.0 MiB |######                | Elapsed Time: 0:00:08 ETA:   0:00:21
 30% of  12.0 MiB |######                | Elapsed Time: 0:00:08 ETA:   0:00:20
 33% of  12.0 MiB |#######               | Elapsed Time: 0:00:08 ETA:   0:00:17
 36% of  12.0 MiB |########              | Elapsed Time: 0:00:09 ETA:   0:00:16
 39% of  12.0 MiB |########              | Elapsed Time: 0:00:09 ETA:   0:00:14
 40% of  12.0 MiB |########              | Elapsed Time: 0:00:09 ETA:   0:00:13
 43% of  12.0 MiB |#########             | Elapsed Time: 0:00:09 ETA:   0:00:12
 47% of  12.0 MiB |##########            | Elapsed Time: 0:00:10 ETA:   0:00:10
 52% of  12.0 MiB |###########           | Elapsed Time: 0:00:10 ETA:   0:00:09
 56% of  12.0 MiB |############          | Elapsed Time: 0:00:10 ETA:   0:00:08
 57% of  12.0 MiB |############          | Elapsed Time: 0:00:10 ETA:   0:00:07
 61% of  12.0 MiB |#############         | Elapsed Time: 0:00:10 ETA:   0:00:06
 66% of  12.0 MiB |##############        | Elapsed Time: 0:00:11 ETA:   0:00:05
 67% of  12.0 MiB |##############        | Elapsed Time: 0:00:11 ETA:   0:00:05
 72% of  12.0 MiB |################      | Elapsed Time: 0:00:11 ETA:   0:00:04
 79% of  12.0 MiB |#################     | Elapsed Time: 0:00:11 ETA:   0:00:03
 85% of  12.0 MiB |##################    | Elapsed Time: 0:00:11 ETA:   0:00:02
 92% of  12.0 MiB |####################  | Elapsed Time: 0:00:12 ETA:   0:00:00
 99% of  12.0 MiB |##################### | Elapsed Time: 0:00:12 ETA:   0:00:00
100% of  12.0 MiB |######################| Elapsed Time: 0:00:12 ETA:  00:00:00
100% of  12.0 MiB |######################| Elapsed Time: 0:00:12 Time:  0:00:12
2025-11-18 13:53:28: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180616_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180616_R065.tif...
  0% of  12.0 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  12.0 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:20
  2% of  12.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:53
  4% of  12.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:32
  7% of  12.0 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:21
 14% of  12.0 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:11
 28% of  12.0 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:05
 55% of  12.0 MiB |############          | Elapsed Time: 0:00:02 ETA:   0:00:02
 79% of  12.0 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 84% of  12.0 MiB |##################    | Elapsed Time: 0:00:02 ETA:   0:00:00
100% of  12.0 MiB |######################| Elapsed Time: 0:00:02 Time:  0:00:02
2025-11-18 13:53:32: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180623_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180623_R022.tif...
  0% of  12.1 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  12.1 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:19
  2% of  12.1 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:52
  3% of  12.1 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:43
  7% of  12.1 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:21
 13% of  12.1 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  12.1 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 52% of  12.1 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 77% of  12.1 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 82% of  12.1 MiB |##################    | Elapsed Time: 0:00:02 ETA:   0:00:00
100% of  12.1 MiB |######################| Elapsed Time: 0:00:02 Time:  0:00:02
2025-11-18 13:53:36: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180701_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180701_R065.tif...
  0% of  12.4 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  12.4 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:22
  2% of  12.4 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:54
  4% of  12.4 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:33
  7% of  12.4 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:22
 14% of  12.4 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:11
 27% of  12.4 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:05
 54% of  12.4 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 77% of  12.4 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 81% of  12.4 MiB |#################     | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.4 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:53:42: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180713_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180713_R022.tif...
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:24
  1% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:55
  3% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:34
  6% of  12.6 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:22
 13% of  12.6 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  12.6 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 51% of  12.6 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 74% of  12.6 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 97% of  12.6 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.6 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:53:46: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180718_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180718_R022.tif...
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:22
  1% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:54
  2% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:45
  5% of  12.6 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:26
 10% of  12.6 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:15
 21% of  12.6 MiB |####                  | Elapsed Time: 0:00:01 ETA:   0:00:07
 22% of  12.6 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:07
 43% of  12.6 MiB |#########             | Elapsed Time: 0:00:02 ETA:   0:00:03
 67% of  12.6 MiB |##############        | Elapsed Time: 0:00:02 ETA:   0:00:01
 91% of  12.6 MiB |####################  | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.6 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:53:51: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180726_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180726_R065.tif...
  0% of  11.8 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  11.8 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:18
  2% of  11.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:51
  4% of  11.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:31
  7% of  11.8 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:21
 14% of  11.8 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:11
 28% of  11.8 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:05
 56% of  11.8 MiB |############          | Elapsed Time: 0:00:02 ETA:   0:00:01
 80% of  11.8 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 83% of  11.8 MiB |##################    | Elapsed Time: 0:00:02 ETA:   0:00:00
 84% of  11.8 MiB |##################    | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  11.8 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:53:56: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180731_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180731_R065.tif...
  0% of  13.0 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:01:49
  1% of  13.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:01:08
  2% of  13.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:55
  3% of  13.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:48
  4% of  13.0 MiB |#                     | Elapsed Time: 0:00:02 ETA:   0:00:49
  5% of  13.0 MiB |#                     | Elapsed Time: 0:00:02 ETA:   0:00:45
  6% of  13.0 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:00:42
  7% of  13.0 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:00:40
  8% of  13.0 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:00:38
 10% of  13.0 MiB |##                    | Elapsed Time: 0:00:03 ETA:   0:00:33
 11% of  13.0 MiB |##                    | Elapsed Time: 0:00:04 ETA:   0:00:32
 12% of  13.0 MiB |##                    | Elapsed Time: 0:00:04 ETA:   0:00:31
 13% of  13.0 MiB |##                    | Elapsed Time: 0:00:04 ETA:   0:00:30
 15% of  13.0 MiB |###                   | Elapsed Time: 0:00:05 ETA:   0:00:27
 16% of  13.0 MiB |###                   | Elapsed Time: 0:00:05 ETA:   0:00:27
 18% of  13.0 MiB |####                  | Elapsed Time: 0:00:05 ETA:   0:00:25
 19% of  13.0 MiB |####                  | Elapsed Time: 0:00:05 ETA:   0:00:24
 21% of  13.0 MiB |####                  | Elapsed Time: 0:00:06 ETA:   0:00:23
 23% of  13.0 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:21
 24% of  13.0 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:20
 25% of  13.0 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:19
 26% of  13.0 MiB |#####                 | Elapsed Time: 0:00:07 ETA:   0:00:19
 27% of  13.0 MiB |######                | Elapsed Time: 0:00:07 ETA:   0:00:18
 29% of  13.0 MiB |######                | Elapsed Time: 0:00:07 ETA:   0:00:17
 30% of  13.0 MiB |######                | Elapsed Time: 0:00:07 ETA:   0:00:17
 32% of  13.0 MiB |#######               | Elapsed Time: 0:00:07 ETA:   0:00:16
 34% of  13.0 MiB |#######               | Elapsed Time: 0:00:08 ETA:   0:00:15
 37% of  13.0 MiB |########              | Elapsed Time: 0:00:08 ETA:   0:00:14
 39% of  13.0 MiB |########              | Elapsed Time: 0:00:08 ETA:   0:00:13
 41% of  13.0 MiB |#########             | Elapsed Time: 0:00:08 ETA:   0:00:12
 42% of  13.0 MiB |#########             | Elapsed Time: 0:00:09 ETA:   0:00:12
 45% of  13.0 MiB |#########             | Elapsed Time: 0:00:09 ETA:   0:00:11
 48% of  13.0 MiB |##########            | Elapsed Time: 0:00:09 ETA:   0:00:10
 51% of  13.0 MiB |###########           | Elapsed Time: 0:00:09 ETA:   0:00:09
 54% of  13.0 MiB |############          | Elapsed Time: 0:00:10 ETA:   0:00:08
 55% of  13.0 MiB |############          | Elapsed Time: 0:00:10 ETA:   0:00:08
 58% of  13.0 MiB |############          | Elapsed Time: 0:00:10 ETA:   0:00:07
 59% of  13.0 MiB |#############         | Elapsed Time: 0:00:10 ETA:   0:00:07
 63% of  13.0 MiB |#############         | Elapsed Time: 0:00:10 ETA:   0:00:06
 67% of  13.0 MiB |##############        | Elapsed Time: 0:00:10 ETA:   0:00:05
 69% of  13.0 MiB |###############       | Elapsed Time: 0:00:10 ETA:   0:00:04
 72% of  13.0 MiB |###############       | Elapsed Time: 0:00:11 ETA:   0:00:04
 73% of  13.0 MiB |################      | Elapsed Time: 0:00:11 ETA:   0:00:04
 77% of  13.0 MiB |#################     | Elapsed Time: 0:00:11 ETA:   0:00:03
 82% of  13.0 MiB |##################    | Elapsed Time: 0:00:11 ETA:   0:00:02
 83% of  13.0 MiB |##################    | Elapsed Time: 0:00:11 ETA:   0:00:02
 88% of  13.0 MiB |###################   | Elapsed Time: 0:00:11 ETA:   0:00:01
 89% of  13.0 MiB |###################   | Elapsed Time: 0:00:12 ETA:   0:00:01
 95% of  13.0 MiB |####################  | Elapsed Time: 0:00:12 ETA:   0:00:00
100% of  13.0 MiB |######################| Elapsed Time: 0:00:12 Time:  0:00:12
2025-11-18 13:54:09: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180817_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180817_R022.tif...
  0% of  13.1 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.1 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:25
  1% of  13.1 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:56
  3% of  13.1 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:34
  6% of  13.1 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 13% of  13.1 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:12
 25% of  13.1 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 50% of  13.1 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 76% of  13.1 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 83% of  13.1 MiB |##################    | Elapsed Time: 0:00:03 ETA:   0:00:00
 97% of  13.1 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
 98% of  13.1 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
 99% of  13.1 MiB |##################### | Elapsed Time: 0:00:04 ETA:   0:00:00
100% of  13.1 MiB |######################| Elapsed Time: 0:00:04 Time:  0:00:04
2025-11-18 13:54:15: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180820_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180820_R065.tif...
  0% of  12.7 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.7 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:25
  1% of  12.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:56
  2% of  12.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:46
  6% of  12.7 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 12% of  12.7 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:13
 25% of  12.7 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 46% of  12.7 MiB |##########            | Elapsed Time: 0:00:02 ETA:   0:00:02
 74% of  12.7 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 98% of  12.7 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.7 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:54:19: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180827_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180827_R022.tif...
  0% of  12.5 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.5 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:23
  1% of  12.5 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:55
  3% of  12.5 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:33
  6% of  12.5 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:22
 13% of  12.5 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  12.5 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 51% of  12.5 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 75% of  12.5 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 76% of  12.5 MiB |################      | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.5 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:54:24: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180919_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180919_R065.tif...
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:27
  1% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:57
  3% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:34
  6% of  12.6 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:22
 12% of  12.6 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:13
 25% of  12.6 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 49% of  12.6 MiB |##########            | Elapsed Time: 0:00:02 ETA:   0:00:02
 73% of  12.6 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:01
 94% of  12.6 MiB |####################  | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.6 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:54:28: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180921_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180921_R022.tif...
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:29
  1% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:58
  2% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:48
  6% of  13.2 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:24
 12% of  13.2 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:14
 23% of  13.2 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:07
 44% of  13.2 MiB |#########             | Elapsed Time: 0:00:02 ETA:   0:00:03
 67% of  13.2 MiB |##############        | Elapsed Time: 0:00:03 ETA:   0:00:01
 88% of  13.2 MiB |###################   | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  13.2 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:54:33: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180926_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20180926_R022.tif...
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:27
  1% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:57
  2% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:47
  6% of  13.2 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 12% of  13.2 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:13
 24% of  13.2 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 47% of  13.2 MiB |##########            | Elapsed Time: 0:00:02 ETA:   0:00:02
 70% of  13.2 MiB |###############       | Elapsed Time: 0:00:03 ETA:   0:00:01
 92% of  13.2 MiB |####################  | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  13.2 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:54:38: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190502_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190502_R065.tif...
  0% of  11.9 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  11.9 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:19
  2% of  11.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:01:18
  3% of  11.9 MiB |                      | Elapsed Time: 0:00:02 ETA:   0:01:09
  4% of  11.9 MiB |                      | Elapsed Time: 0:00:02 ETA:   0:01:04
  5% of  11.9 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:01:01
  6% of  11.9 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:00:55
  7% of  11.9 MiB |#                     | Elapsed Time: 0:00:04 ETA:   0:00:53
  8% of  11.9 MiB |#                     | Elapsed Time: 0:00:04 ETA:   0:00:49
  9% of  11.9 MiB |##                    | Elapsed Time: 0:00:05 ETA:   0:00:48
 10% of  11.9 MiB |##                    | Elapsed Time: 0:00:05 ETA:   0:00:45
 11% of  11.9 MiB |##                    | Elapsed Time: 0:00:05 ETA:   0:00:43
 12% of  11.9 MiB |##                    | Elapsed Time: 0:00:05 ETA:   0:00:41
 13% of  11.9 MiB |###                   | Elapsed Time: 0:00:06 ETA:   0:00:39
 14% of  11.9 MiB |###                   | Elapsed Time: 0:00:06 ETA:   0:00:37
 16% of  11.9 MiB |###                   | Elapsed Time: 0:00:06 ETA:   0:00:33
 17% of  11.9 MiB |###                   | Elapsed Time: 0:00:07 ETA:   0:00:32
 20% of  11.9 MiB |####                  | Elapsed Time: 0:00:07 ETA:   0:00:29
 22% of  11.9 MiB |####                  | Elapsed Time: 0:00:07 ETA:   0:00:27
 24% of  11.9 MiB |#####                 | Elapsed Time: 0:00:07 ETA:   0:00:24
 26% of  11.9 MiB |#####                 | Elapsed Time: 0:00:08 ETA:   0:00:23
 28% of  11.9 MiB |######                | Elapsed Time: 0:00:08 ETA:   0:00:21
 31% of  11.9 MiB |######                | Elapsed Time: 0:00:08 ETA:   0:00:19
 34% of  11.9 MiB |#######               | Elapsed Time: 0:00:09 ETA:   0:00:17
 37% of  11.9 MiB |########              | Elapsed Time: 0:00:09 ETA:   0:00:15
 41% of  11.9 MiB |#########             | Elapsed Time: 0:00:09 ETA:   0:00:13
 45% of  11.9 MiB |#########             | Elapsed Time: 0:00:09 ETA:   0:00:11
 49% of  11.9 MiB |##########            | Elapsed Time: 0:00:10 ETA:   0:00:10
 53% of  11.9 MiB |###########           | Elapsed Time: 0:00:10 ETA:   0:00:08
 57% of  11.9 MiB |############          | Elapsed Time: 0:00:10 ETA:   0:00:07
 59% of  11.9 MiB |############          | Elapsed Time: 0:00:10 ETA:   0:00:07
 62% of  11.9 MiB |#############         | Elapsed Time: 0:00:10 ETA:   0:00:06
 63% of  11.9 MiB |#############         | Elapsed Time: 0:00:10 ETA:   0:00:06
 68% of  11.9 MiB |###############       | Elapsed Time: 0:00:11 ETA:   0:00:05
 69% of  11.9 MiB |###############       | Elapsed Time: 0:00:11 ETA:   0:00:04
 73% of  11.9 MiB |################      | Elapsed Time: 0:00:11 ETA:   0:00:04
 74% of  11.9 MiB |################      | Elapsed Time: 0:00:11 ETA:   0:00:03
 80% of  11.9 MiB |#################     | Elapsed Time: 0:00:11 ETA:   0:00:02
 81% of  11.9 MiB |#################     | Elapsed Time: 0:00:11 ETA:   0:00:02
 87% of  11.9 MiB |###################   | Elapsed Time: 0:00:11 ETA:   0:00:01
 88% of  11.9 MiB |###################   | Elapsed Time: 0:00:12 ETA:   0:00:01
 95% of  11.9 MiB |##################### | Elapsed Time: 0:00:12 ETA:   0:00:00
100% of  11.9 MiB |######################| Elapsed Time: 0:00:12 Time:  0:00:12
2025-11-18 13:54:52: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190524_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190524_R022.tif...
  0% of  11.7 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  11.7 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:16
  2% of  11.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:50
  4% of  11.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:30
  7% of  11.7 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:20
 14% of  11.7 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:11
 28% of  11.7 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:05
 57% of  11.7 MiB |############          | Elapsed Time: 0:00:02 ETA:   0:00:01
 83% of  11.7 MiB |##################    | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  11.7 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:54:57: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190601_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190601_R065.tif...
  0% of  11.8 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  11.8 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:13
  2% of  11.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:01:02
  3% of  11.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:49
  4% of  11.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:44
  5% of  11.8 MiB |#                     | Elapsed Time: 0:00:02 ETA:   0:00:44
  6% of  11.8 MiB |#                     | Elapsed Time: 0:00:02 ETA:   0:00:40
  7% of  11.8 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:00:37
  8% of  11.8 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:00:35
  9% of  11.8 MiB |##                    | Elapsed Time: 0:00:03 ETA:   0:00:34
 10% of  11.8 MiB |##                    | Elapsed Time: 0:00:03 ETA:   0:00:32
 11% of  11.8 MiB |##                    | Elapsed Time: 0:00:04 ETA:   0:00:31
 12% of  11.8 MiB |##                    | Elapsed Time: 0:00:04 ETA:   0:00:30
 13% of  11.8 MiB |###                   | Elapsed Time: 0:00:04 ETA:   0:00:29
 15% of  11.8 MiB |###                   | Elapsed Time: 0:00:05 ETA:   0:00:26
 16% of  11.8 MiB |###                   | Elapsed Time: 0:00:05 ETA:   0:00:25
 17% of  11.8 MiB |###                   | Elapsed Time: 0:00:05 ETA:   0:00:25
 20% of  11.8 MiB |####                  | Elapsed Time: 0:00:05 ETA:   0:00:23
 21% of  11.8 MiB |####                  | Elapsed Time: 0:00:06 ETA:   0:00:22
 23% of  11.8 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:21
 24% of  11.8 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:20
 26% of  11.8 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:19
 28% of  11.8 MiB |######                | Elapsed Time: 0:00:07 ETA:   0:00:18
 30% of  11.8 MiB |######                | Elapsed Time: 0:00:07 ETA:   0:00:17
 32% of  11.8 MiB |#######               | Elapsed Time: 0:00:07 ETA:   0:00:16
 34% of  11.8 MiB |#######               | Elapsed Time: 0:00:08 ETA:   0:00:15
 37% of  11.8 MiB |########              | Elapsed Time: 0:00:08 ETA:   0:00:14
 40% of  11.8 MiB |########              | Elapsed Time: 0:00:08 ETA:   0:00:12
 43% of  11.8 MiB |#########             | Elapsed Time: 0:00:08 ETA:   0:00:11
 46% of  11.8 MiB |##########            | Elapsed Time: 0:00:09 ETA:   0:00:10
 49% of  11.8 MiB |##########            | Elapsed Time: 0:00:09 ETA:   0:00:09
 52% of  11.8 MiB |###########           | Elapsed Time: 0:00:09 ETA:   0:00:08
 57% of  11.8 MiB |############          | Elapsed Time: 0:00:10 ETA:   0:00:07
 61% of  11.8 MiB |#############         | Elapsed Time: 0:00:10 ETA:   0:00:06
 66% of  11.8 MiB |##############        | Elapsed Time: 0:00:10 ETA:   0:00:05
 70% of  11.8 MiB |###############       | Elapsed Time: 0:00:10 ETA:   0:00:04
 73% of  11.8 MiB |################      | Elapsed Time: 0:00:10 ETA:   0:00:04
 76% of  11.8 MiB |################      | Elapsed Time: 0:00:10 ETA:   0:00:03
 77% of  11.8 MiB |################      | Elapsed Time: 0:00:11 ETA:   0:00:03
 82% of  11.8 MiB |##################    | Elapsed Time: 0:00:11 ETA:   0:00:02
 88% of  11.8 MiB |###################   | Elapsed Time: 0:00:11 ETA:   0:00:01
 95% of  11.8 MiB |####################  | Elapsed Time: 0:00:11 ETA:   0:00:00
100% of  11.8 MiB |######################| Elapsed Time: 0:00:11 Time:  0:00:11
2025-11-18 13:55:12: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190603_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190603_R022.tif...
  0% of  11.7 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  11.7 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:18
  2% of  11.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:52
  3% of  11.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:42
  7% of  11.7 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:21
 13% of  11.7 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:12
 27% of  11.7 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:05
 53% of  11.7 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 77% of  11.7 MiB |#################     | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  11.7 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:55:17: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190613_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190613_R022.tif...
  0% of  11.4 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  11.4 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:15
  2% of  11.4 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:49
  4% of  11.4 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:30
  7% of  11.4 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:19
 15% of  11.4 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:10
 29% of  11.4 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:05
 44% of  11.4 MiB |#########             | Elapsed Time: 0:00:02 ETA:   0:00:02
 61% of  11.4 MiB |#############         | Elapsed Time: 0:00:02 ETA:   0:00:01
 78% of  11.4 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 97% of  11.4 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  11.4 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:55:22: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190618_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190618_R022.tif...
  0% of  11.8 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  11.8 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:19
  2% of  11.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:52
  3% of  11.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:43
  6% of  11.8 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:25
 12% of  11.8 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:13
 24% of  11.8 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:07
 47% of  11.8 MiB |##########            | Elapsed Time: 0:00:02 ETA:   0:00:02
 76% of  11.8 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 78% of  11.8 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 79% of  11.8 MiB |#################     | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  11.8 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:55:27: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190628_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190628_R022.tif...
  0% of  11.8 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  11.8 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:18
  2% of  11.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:51
  3% of  11.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:42
  7% of  11.8 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:20
 13% of  11.8 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:12
 27% of  11.8 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:05
 54% of  11.8 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 80% of  11.8 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 83% of  11.8 MiB |##################    | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  11.8 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:55:31: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190716_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190716_R065.tif...
  0% of  12.2 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  12.2 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:19
  2% of  12.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:52
  4% of  12.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:32
  7% of  12.2 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:21
 13% of  12.2 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  12.2 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 53% of  12.2 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 78% of  12.2 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 81% of  12.2 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
100% of  12.2 MiB |######################| Elapsed Time: 0:00:02 Time:  0:00:02
2025-11-18 13:55:36: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190723_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190723_R022.tif...
  0% of  12.2 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  12.2 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:22
  2% of  12.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:54
  3% of  12.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:44
  6% of  12.2 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:26
 12% of  12.2 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:14
 24% of  12.2 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 49% of  12.2 MiB |##########            | Elapsed Time: 0:00:02 ETA:   0:00:02
 71% of  12.2 MiB |###############       | Elapsed Time: 0:00:02 ETA:   0:00:01
 79% of  12.2 MiB |#################     | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.2 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:55:40: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190827_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190827_R022.tif...
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:01:51
  1% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:01:24
  2% of  13.2 MiB |                      | Elapsed Time: 0:00:02 ETA:   0:01:24
  3% of  13.2 MiB |                      | Elapsed Time: 0:00:03 ETA:   0:01:17
  4% of  13.2 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:01:12
  5% of  13.2 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:01:05
  6% of  13.2 MiB |#                     | Elapsed Time: 0:00:04 ETA:   0:01:02
  7% of  13.2 MiB |#                     | Elapsed Time: 0:00:04 ETA:   0:00:59
  8% of  13.2 MiB |#                     | Elapsed Time: 0:00:05 ETA:   0:00:56
  9% of  13.2 MiB |##                    | Elapsed Time: 0:00:05 ETA:   0:00:53
 10% of  13.2 MiB |##                    | Elapsed Time: 0:00:05 ETA:   0:00:50
 11% of  13.2 MiB |##                    | Elapsed Time: 0:00:06 ETA:   0:00:47
 12% of  13.2 MiB |##                    | Elapsed Time: 0:00:06 ETA:   0:00:45
 13% of  13.2 MiB |##                    | Elapsed Time: 0:00:06 ETA:   0:00:43
 14% of  13.2 MiB |###                   | Elapsed Time: 0:00:06 ETA:   0:00:40
 15% of  13.2 MiB |###                   | Elapsed Time: 0:00:06 ETA:   0:00:39
 16% of  13.2 MiB |###                   | Elapsed Time: 0:00:07 ETA:   0:00:37
 17% of  13.2 MiB |###                   | Elapsed Time: 0:00:07 ETA:   0:00:35
 17% of  13.2 MiB |###                   | Elapsed Time: 0:00:07 ETA:   0:00:34
 18% of  13.2 MiB |####                  | Elapsed Time: 0:00:07 ETA:   0:00:32
 19% of  13.2 MiB |####                  | Elapsed Time: 0:00:07 ETA:   0:00:31
 20% of  13.2 MiB |####                  | Elapsed Time: 0:00:07 ETA:   0:00:30
 21% of  13.2 MiB |####                  | Elapsed Time: 0:00:08 ETA:   0:00:29
 23% of  13.2 MiB |#####                 | Elapsed Time: 0:00:08 ETA:   0:00:27
 25% of  13.2 MiB |#####                 | Elapsed Time: 0:00:08 ETA:   0:00:24
 26% of  13.2 MiB |#####                 | Elapsed Time: 0:00:08 ETA:   0:00:24
 27% of  13.2 MiB |######                | Elapsed Time: 0:00:08 ETA:   0:00:23
 28% of  13.2 MiB |######                | Elapsed Time: 0:00:08 ETA:   0:00:22
 29% of  13.2 MiB |######                | Elapsed Time: 0:00:08 ETA:   0:00:21
 31% of  13.2 MiB |######                | Elapsed Time: 0:00:09 ETA:   0:00:20
 32% of  13.2 MiB |#######               | Elapsed Time: 0:00:09 ETA:   0:00:19
 33% of  13.2 MiB |#######               | Elapsed Time: 0:00:09 ETA:   0:00:18
 35% of  13.2 MiB |#######               | Elapsed Time: 0:00:09 ETA:   0:00:17
 36% of  13.2 MiB |########              | Elapsed Time: 0:00:09 ETA:   0:00:16
 38% of  13.2 MiB |########              | Elapsed Time: 0:00:09 ETA:   0:00:15
 39% of  13.2 MiB |########              | Elapsed Time: 0:00:09 ETA:   0:00:14
 40% of  13.2 MiB |########              | Elapsed Time: 0:00:09 ETA:   0:00:14
 42% of  13.2 MiB |#########             | Elapsed Time: 0:00:10 ETA:   0:00:13
 43% of  13.2 MiB |#########             | Elapsed Time: 0:00:10 ETA:   0:00:13
 44% of  13.2 MiB |#########             | Elapsed Time: 0:00:10 ETA:   0:00:12
 46% of  13.2 MiB |##########            | Elapsed Time: 0:00:10 ETA:   0:00:11
 48% of  13.2 MiB |##########            | Elapsed Time: 0:00:10 ETA:   0:00:11
 50% of  13.2 MiB |###########           | Elapsed Time: 0:00:10 ETA:   0:00:10
 52% of  13.2 MiB |###########           | Elapsed Time: 0:00:10 ETA:   0:00:09
 53% of  13.2 MiB |###########           | Elapsed Time: 0:00:10 ETA:   0:00:09
 54% of  13.2 MiB |############          | Elapsed Time: 0:00:10 ETA:   0:00:08
 57% of  13.2 MiB |############          | Elapsed Time: 0:00:10 ETA:   0:00:08
 59% of  13.2 MiB |#############         | Elapsed Time: 0:00:11 ETA:   0:00:07
 62% of  13.2 MiB |#############         | Elapsed Time: 0:00:11 ETA:   0:00:06
 63% of  13.2 MiB |#############         | Elapsed Time: 0:00:11 ETA:   0:00:06
 65% of  13.2 MiB |##############        | Elapsed Time: 0:00:11 ETA:   0:00:06
 67% of  13.2 MiB |##############        | Elapsed Time: 0:00:11 ETA:   0:00:05
 69% of  13.2 MiB |###############       | Elapsed Time: 0:00:11 ETA:   0:00:05
 70% of  13.2 MiB |###############       | Elapsed Time: 0:00:11 ETA:   0:00:04
 73% of  13.2 MiB |################      | Elapsed Time: 0:00:11 ETA:   0:00:04
 74% of  13.2 MiB |################      | Elapsed Time: 0:00:11 ETA:   0:00:03
 77% of  13.2 MiB |#################     | Elapsed Time: 0:00:11 ETA:   0:00:03
 80% of  13.2 MiB |#################     | Elapsed Time: 0:00:12 ETA:   0:00:02
 81% of  13.2 MiB |#################     | Elapsed Time: 0:00:12 ETA:   0:00:02
 83% of  13.2 MiB |##################    | Elapsed Time: 0:00:12 ETA:   0:00:02
 86% of  13.2 MiB |##################    | Elapsed Time: 0:00:12 ETA:   0:00:01
 88% of  13.2 MiB |###################   | Elapsed Time: 0:00:12 ETA:   0:00:01
 90% of  13.2 MiB |###################   | Elapsed Time: 0:00:12 ETA:   0:00:01
 93% of  13.2 MiB |####################  | Elapsed Time: 0:00:12 ETA:   0:00:00
 95% of  13.2 MiB |##################### | Elapsed Time: 0:00:12 ETA:   0:00:00
 98% of  13.2 MiB |##################### | Elapsed Time: 0:00:12 ETA:   0:00:00
100% of  13.2 MiB |######################| Elapsed Time: 0:00:12 Time:  0:00:12
2025-11-18 13:55:54: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190830_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190830_R065.tif...
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:27
  1% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:57
  3% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:35
  6% of  12.9 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:22
 13% of  12.9 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:11
 26% of  12.9 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 39% of  12.9 MiB |########              | Elapsed Time: 0:00:02 ETA:   0:00:03
 54% of  12.9 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 69% of  12.9 MiB |###############       | Elapsed Time: 0:00:02 ETA:   0:00:01
 85% of  12.9 MiB |##################    | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.9 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:56:04: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190904_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190904_R065.tif...
  0% of  13.3 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.3 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:27
  1% of  13.3 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:57
  3% of  13.3 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:35
  6% of  13.3 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 12% of  13.3 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:13
 24% of  13.3 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 44% of  13.3 MiB |#########             | Elapsed Time: 0:00:02 ETA:   0:00:03
 64% of  13.3 MiB |##############        | Elapsed Time: 0:00:02 ETA:   0:00:01
 81% of  13.3 MiB |##################    | Elapsed Time: 0:00:02 ETA:   0:00:00
 93% of  13.3 MiB |####################  | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  13.3 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:56:09: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190916_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190916_R022.tif...
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:23
  1% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:55
  2% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:45
  4% of  12.6 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:32
  8% of  12.6 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:19
 17% of  12.6 MiB |###                   | Elapsed Time: 0:00:02 ETA:   0:00:10
 35% of  12.6 MiB |#######               | Elapsed Time: 0:00:02 ETA:   0:00:04
 59% of  12.6 MiB |#############         | Elapsed Time: 0:00:02 ETA:   0:00:01
 60% of  12.6 MiB |#############         | Elapsed Time: 0:00:03 ETA:   0:00:01
 87% of  12.6 MiB |###################   | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.6 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:56:14: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190921_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190921_R022.tif...
  0% of  12.7 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.7 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:25
  1% of  12.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:56
  3% of  12.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:34
  6% of  12.7 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:22
 13% of  12.7 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  12.7 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 50% of  12.7 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 72% of  12.7 MiB |###############       | Elapsed Time: 0:00:02 ETA:   0:00:01
 83% of  12.7 MiB |##################    | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.7 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:56:18: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190929_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20190929_R065.tif...
  0% of  12.8 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.8 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:24
  1% of  12.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:55
  2% of  12.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:46
  4% of  12.8 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:32
  9% of  12.8 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:17
 18% of  12.8 MiB |####                  | Elapsed Time: 0:00:02 ETA:   0:00:09
 36% of  12.8 MiB |########              | Elapsed Time: 0:00:02 ETA:   0:00:04
 63% of  12.8 MiB |#############         | Elapsed Time: 0:00:02 ETA:   0:00:01
 84% of  12.8 MiB |##################    | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.8 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:56:23: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200521_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200521_R065.tif...
  0% of  11.7 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  11.7 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:18
  2% of  11.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:51
  4% of  11.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:31
  7% of  11.7 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:20
 13% of  11.7 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  11.7 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 52% of  11.7 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 78% of  11.7 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 84% of  11.7 MiB |##################    | Elapsed Time: 0:00:02 ETA:   0:00:00
 85% of  11.7 MiB |##################    | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  11.7 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:56:29: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200602_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200602_R022.tif...
  0% of  12.0 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  12.0 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:20
  2% of  12.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:53
  4% of  12.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:32
  7% of  12.0 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:21
 14% of  12.0 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:11
 28% of  12.0 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:05
 56% of  12.0 MiB |############          | Elapsed Time: 0:00:02 ETA:   0:00:01
 74% of  12.0 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:01
 98% of  12.0 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.0 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:56:34: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200612_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200612_R022.tif...
  0% of  11.8 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  11.8 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:17
  2% of  11.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:51
  3% of  11.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:42
  6% of  11.8 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:24
 12% of  11.8 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:13
 24% of  11.8 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 48% of  11.8 MiB |##########            | Elapsed Time: 0:00:02 ETA:   0:00:02
 78% of  11.8 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 81% of  11.8 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
100% of  11.8 MiB |######################| Elapsed Time: 0:00:02 Time:  0:00:02
2025-11-18 13:56:39: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200627_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200627_R022.tif...
  0% of  12.0 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  12.0 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:19
  2% of  12.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:52
  4% of  12.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:32
  7% of  12.0 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:21
 14% of  12.0 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:11
 28% of  12.0 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:05
 56% of  12.0 MiB |############          | Elapsed Time: 0:00:02 ETA:   0:00:01
 81% of  12.0 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 82% of  12.0 MiB |##################    | Elapsed Time: 0:00:02 ETA:   0:00:00
 83% of  12.0 MiB |##################    | Elapsed Time: 0:00:02 ETA:   0:00:00
100% of  12.0 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:56:45: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200707_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200707_R022.tif...
  0% of  12.1 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  12.1 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:21
  2% of  12.1 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:53
  4% of  12.1 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:32
  7% of  12.1 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:21
 13% of  12.1 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  12.1 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 53% of  12.1 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 77% of  12.1 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 79% of  12.1 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 93% of  12.1 MiB |####################  | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.1 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:56:50: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200712_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200712_R022.tif...
  0% of  12.2 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  12.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:01:46
  2% of  12.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:01:05
  4% of  12.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:38
  7% of  12.2 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:24
 14% of  12.2 MiB |###                   | Elapsed Time: 0:00:02 ETA:   0:00:13
 27% of  12.2 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:06
 54% of  12.2 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 80% of  12.2 MiB |#################     | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.2 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:56:54: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200727_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200727_R022.tif...
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:24
  1% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:55
  3% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:34
  6% of  12.6 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:22
 12% of  12.6 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:13
 25% of  12.6 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 52% of  12.6 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 76% of  12.6 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 99% of  12.6 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.6 MiB |######################| Elapsed Time: 0:00:03 ETA:  00:00:00
100% of  12.6 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:56:59: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200801_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200801_R022.tif...
  0% of  12.7 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.7 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:25
  1% of  12.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:56
  3% of  12.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:34
  6% of  12.7 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 13% of  12.7 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  12.7 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 52% of  12.7 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 72% of  12.7 MiB |###############       | Elapsed Time: 0:00:02 ETA:   0:00:00
 76% of  12.7 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 99% of  12.7 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.7 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:57:04: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200806_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200806_R022.tif...
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:22
  1% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:54
  3% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:33
  6% of  12.6 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:22
 13% of  12.6 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:11
 26% of  12.6 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 50% of  12.6 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 73% of  12.6 MiB |################      | Elapsed Time: 0:00:03 ETA:   0:00:01
 98% of  12.6 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.6 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:57:09: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200809_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200809_R065.tif...
  0% of  13.0 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.0 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:25
  1% of  13.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:56
  3% of  13.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:34
  6% of  13.0 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 13% of  13.0 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  13.0 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 51% of  13.0 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 52% of  13.0 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 75% of  13.0 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 89% of  13.0 MiB |###################   | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  13.0 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:57:14: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200811_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200811_R022.tif...
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:20
  1% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:54
  2% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:54
  3% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:47
  4% of  12.9 MiB |#                     | Elapsed Time: 0:00:02 ETA:   0:00:43
  5% of  12.9 MiB |#                     | Elapsed Time: 0:00:02 ETA:   0:00:40
  6% of  12.9 MiB |#                     | Elapsed Time: 0:00:02 ETA:   0:00:38
  7% of  12.9 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:00:36
  8% of  12.9 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:00:35
  9% of  12.9 MiB |##                    | Elapsed Time: 0:00:03 ETA:   0:00:32
 10% of  12.9 MiB |##                    | Elapsed Time: 0:00:03 ETA:   0:00:30
 11% of  12.9 MiB |##                    | Elapsed Time: 0:00:03 ETA:   0:00:29
 12% of  12.9 MiB |##                    | Elapsed Time: 0:00:04 ETA:   0:00:29
 13% of  12.9 MiB |##                    | Elapsed Time: 0:00:04 ETA:   0:00:28
 15% of  12.9 MiB |###                   | Elapsed Time: 0:00:04 ETA:   0:00:26
 16% of  12.9 MiB |###                   | Elapsed Time: 0:00:05 ETA:   0:00:25
 18% of  12.9 MiB |####                  | Elapsed Time: 0:00:05 ETA:   0:00:23
 19% of  12.9 MiB |####                  | Elapsed Time: 0:00:05 ETA:   0:00:23
 21% of  12.9 MiB |####                  | Elapsed Time: 0:00:05 ETA:   0:00:21
 23% of  12.9 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:20
 25% of  12.9 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:19
 27% of  12.9 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:18
 29% of  12.9 MiB |######                | Elapsed Time: 0:00:07 ETA:   0:00:17
 31% of  12.9 MiB |######                | Elapsed Time: 0:00:07 ETA:   0:00:16
 32% of  12.9 MiB |#######               | Elapsed Time: 0:00:07 ETA:   0:00:15
 35% of  12.9 MiB |#######               | Elapsed Time: 0:00:07 ETA:   0:00:14
 37% of  12.9 MiB |########              | Elapsed Time: 0:00:08 ETA:   0:00:13
 40% of  12.9 MiB |########              | Elapsed Time: 0:00:08 ETA:   0:00:12
 42% of  12.9 MiB |#########             | Elapsed Time: 0:00:08 ETA:   0:00:11
 43% of  12.9 MiB |#########             | Elapsed Time: 0:00:08 ETA:   0:00:11
 45% of  12.9 MiB |##########            | Elapsed Time: 0:00:08 ETA:   0:00:10
 46% of  12.9 MiB |##########            | Elapsed Time: 0:00:09 ETA:   0:00:10
 49% of  12.9 MiB |##########            | Elapsed Time: 0:00:09 ETA:   0:00:09
 52% of  12.9 MiB |###########           | Elapsed Time: 0:00:09 ETA:   0:00:08
 56% of  12.9 MiB |############          | Elapsed Time: 0:00:09 ETA:   0:00:07
 60% of  12.9 MiB |#############         | Elapsed Time: 0:00:10 ETA:   0:00:06
 63% of  12.9 MiB |##############        | Elapsed Time: 0:00:10 ETA:   0:00:05
 64% of  12.9 MiB |##############        | Elapsed Time: 0:00:10 ETA:   0:00:05
 68% of  12.9 MiB |###############       | Elapsed Time: 0:00:10 ETA:   0:00:04
 73% of  12.9 MiB |################      | Elapsed Time: 0:00:10 ETA:   0:00:03
 78% of  12.9 MiB |#################     | Elapsed Time: 0:00:11 ETA:   0:00:03
 79% of  12.9 MiB |#################     | Elapsed Time: 0:00:11 ETA:   0:00:02
 84% of  12.9 MiB |##################    | Elapsed Time: 0:00:11 ETA:   0:00:02
 90% of  12.9 MiB |###################   | Elapsed Time: 0:00:11 ETA:   0:00:01
 91% of  12.9 MiB |####################  | Elapsed Time: 0:00:11 ETA:   0:00:01
 96% of  12.9 MiB |##################### | Elapsed Time: 0:00:12 ETA:   0:00:00
100% of  12.9 MiB |######################| Elapsed Time: 0:00:12 Time:  0:00:12
2025-11-18 13:57:27: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200819_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200819_R065.tif...
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:26
  1% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:57
  3% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:35
  6% of  12.9 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 13% of  12.9 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  12.9 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 51% of  12.9 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 74% of  12.9 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 77% of  12.9 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 98% of  12.9 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.9 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:57:32: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200821_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200821_R022.tif...
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:26
  1% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:57
  3% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:35
  6% of  13.2 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 13% of  13.2 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:12
 25% of  13.2 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 47% of  13.2 MiB |##########            | Elapsed Time: 0:00:02 ETA:   0:00:02
 71% of  13.2 MiB |###############       | Elapsed Time: 0:00:02 ETA:   0:00:01
 72% of  13.2 MiB |###############       | Elapsed Time: 0:00:03 ETA:   0:00:01
 94% of  13.2 MiB |####################  | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  13.2 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:57:37: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200903_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200903_R065.tif...
  0% of  12.5 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.5 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:24
  1% of  12.5 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:55
  3% of  12.5 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:34
  6% of  12.5 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:22
 12% of  12.5 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:13
 24% of  12.5 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 50% of  12.5 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 75% of  12.5 MiB |################      | Elapsed Time: 0:00:03 ETA:   0:00:01
 97% of  12.5 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.5 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:57:41: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200905_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200905_R022.tif...
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:26
  1% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:57
  3% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:35
  6% of  12.9 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 13% of  12.9 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  12.9 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 51% of  12.9 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 73% of  12.9 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 77% of  12.9 MiB |#################     | Elapsed Time: 0:00:03 ETA:   0:00:00
 99% of  12.9 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.9 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:57:46: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200908_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200908_R065.tif...
  0% of  13.0 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.0 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:25
  1% of  13.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:56
  3% of  13.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:34
  6% of  13.0 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:22
 12% of  13.0 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:13
 24% of  13.0 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 47% of  13.0 MiB |##########            | Elapsed Time: 0:00:02 ETA:   0:00:02
 69% of  13.0 MiB |###############       | Elapsed Time: 0:00:02 ETA:   0:00:01
 91% of  13.0 MiB |####################  | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  13.0 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:57:50: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200913_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200913_R065.tif...
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:29
  1% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:59
  3% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:36
  6% of  13.2 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:24
 13% of  13.2 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:13
 25% of  13.2 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 50% of  13.2 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 74% of  13.2 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 91% of  13.2 MiB |####################  | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  13.2 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:57:55: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200915_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20200915_R022.tif...
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:28
  1% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:57
  2% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:44
  6% of  13.2 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:22
  9% of  13.2 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:17
 12% of  13.2 MiB |##                    | Elapsed Time: 0:00:02 ETA:   0:00:15
 16% of  13.2 MiB |###                   | Elapsed Time: 0:00:02 ETA:   0:00:12
 19% of  13.2 MiB |####                  | Elapsed Time: 0:00:02 ETA:   0:00:10
 23% of  13.2 MiB |#####                 | Elapsed Time: 0:00:03 ETA:   0:00:09
 28% of  13.2 MiB |######                | Elapsed Time: 0:00:03 ETA:   0:00:08
 32% of  13.2 MiB |#######               | Elapsed Time: 0:00:03 ETA:   0:00:07
 37% of  13.2 MiB |########              | Elapsed Time: 0:00:03 ETA:   0:00:06
 41% of  13.2 MiB |#########             | Elapsed Time: 0:00:04 ETA:   0:00:05
 46% of  13.2 MiB |##########            | Elapsed Time: 0:00:04 ETA:   0:00:05
 52% of  13.2 MiB |###########           | Elapsed Time: 0:00:04 ETA:   0:00:04
 57% of  13.2 MiB |############          | Elapsed Time: 0:00:04 ETA:   0:00:03
 63% of  13.2 MiB |#############         | Elapsed Time: 0:00:05 ETA:   0:00:03
 69% of  13.2 MiB |###############       | Elapsed Time: 0:00:05 ETA:   0:00:02
 75% of  13.2 MiB |################      | Elapsed Time: 0:00:05 ETA:   0:00:01
 82% of  13.2 MiB |##################    | Elapsed Time: 0:00:06 ETA:   0:00:01
 89% of  13.2 MiB |###################   | Elapsed Time: 0:00:06 ETA:   0:00:00
 90% of  13.2 MiB |###################   | Elapsed Time: 0:00:06 ETA:   0:00:00
 96% of  13.2 MiB |##################### | Elapsed Time: 0:00:06 ETA:   0:00:00
100% of  13.2 MiB |######################| Elapsed Time: 0:00:06 Time:  0:00:06
2025-11-18 13:58:03: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210811_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210811_R022.tif...
  0% of  11.8 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  11.8 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:19
  2% of  11.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:52
  4% of  11.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:32
  7% of  11.8 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:21
 14% of  11.8 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:11
 28% of  11.8 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:05
 54% of  11.8 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 79% of  11.8 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
 80% of  11.8 MiB |#################     | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  11.8 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:58:08: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210814_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210814_R065.tif...
  0% of  13.1 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.1 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:27
  1% of  13.1 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:57
  3% of  13.1 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:35
  6% of  13.1 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 13% of  13.1 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:12
 25% of  13.1 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 45% of  13.1 MiB |#########             | Elapsed Time: 0:00:02 ETA:   0:00:03
 55% of  13.1 MiB |############          | Elapsed Time: 0:00:02 ETA:   0:00:02
 70% of  13.1 MiB |###############       | Elapsed Time: 0:00:03 ETA:   0:00:01
 91% of  13.1 MiB |####################  | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  13.1 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:58:13: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210821_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210821_R022.tif...
  0% of  13.0 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.0 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:25
  1% of  13.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:56
  3% of  13.0 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:34
  6% of  13.0 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 12% of  13.0 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:13
 23% of  13.0 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:07
 46% of  13.0 MiB |##########            | Elapsed Time: 0:00:02 ETA:   0:00:02
 68% of  13.0 MiB |##############        | Elapsed Time: 0:00:02 ETA:   0:00:01
 69% of  13.0 MiB |###############       | Elapsed Time: 0:00:03 ETA:   0:00:01
 92% of  13.0 MiB |####################  | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  13.0 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:58:18: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210903_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210903_R065.tif...
  0% of  12.7 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.7 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:26
  1% of  12.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:56
  3% of  12.7 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:34
  6% of  12.7 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 13% of  12.7 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  12.7 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 52% of  12.7 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 53% of  12.7 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 76% of  12.7 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 77% of  12.7 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
100% of  12.7 MiB |######################| Elapsed Time: 0:00:02 Time:  0:00:02
2025-11-18 13:58:22: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210905_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210905_R022.tif...
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.6 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:24
  1% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:55
  3% of  12.6 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:34
  6% of  12.6 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:22
 13% of  12.6 MiB |###                   | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  12.6 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 51% of  12.6 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 53% of  12.6 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 78% of  12.6 MiB |#################     | Elapsed Time: 0:00:02 ETA:   0:00:00
100% of  12.6 MiB |######################| Elapsed Time: 0:00:02 Time:  0:00:02
2025-11-18 13:58:27: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210910_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210910_R022.tif...
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:17
  1% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:52
  2% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:52
  3% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:46
  4% of  12.9 MiB |#                     | Elapsed Time: 0:00:02 ETA:   0:00:42
  5% of  12.9 MiB |#                     | Elapsed Time: 0:00:02 ETA:   0:00:40
  6% of  12.9 MiB |#                     | Elapsed Time: 0:00:02 ETA:   0:00:38
  7% of  12.9 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:00:36
  8% of  12.9 MiB |#                     | Elapsed Time: 0:00:03 ETA:   0:00:34
  9% of  12.9 MiB |##                    | Elapsed Time: 0:00:03 ETA:   0:00:33
 10% of  12.9 MiB |##                    | Elapsed Time: 0:00:03 ETA:   0:00:31
 11% of  12.9 MiB |##                    | Elapsed Time: 0:00:04 ETA:   0:00:30
 12% of  12.9 MiB |##                    | Elapsed Time: 0:00:04 ETA:   0:00:30
 13% of  12.9 MiB |##                    | Elapsed Time: 0:00:04 ETA:   0:00:28
 14% of  12.9 MiB |###                   | Elapsed Time: 0:00:04 ETA:   0:00:27
 15% of  12.9 MiB |###                   | Elapsed Time: 0:00:04 ETA:   0:00:26
 16% of  12.9 MiB |###                   | Elapsed Time: 0:00:05 ETA:   0:00:26
 18% of  12.9 MiB |####                  | Elapsed Time: 0:00:05 ETA:   0:00:24
 19% of  12.9 MiB |####                  | Elapsed Time: 0:00:05 ETA:   0:00:23
 20% of  12.9 MiB |####                  | Elapsed Time: 0:00:05 ETA:   0:00:22
 21% of  12.9 MiB |####                  | Elapsed Time: 0:00:06 ETA:   0:00:22
 22% of  12.9 MiB |####                  | Elapsed Time: 0:00:06 ETA:   0:00:21
 23% of  12.9 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:20
 24% of  12.9 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:19
 25% of  12.9 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:19
 26% of  12.9 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:18
 27% of  12.9 MiB |#####                 | Elapsed Time: 0:00:06 ETA:   0:00:18
 28% of  12.9 MiB |######                | Elapsed Time: 0:00:06 ETA:   0:00:17
 29% of  12.9 MiB |######                | Elapsed Time: 0:00:07 ETA:   0:00:17
 31% of  12.9 MiB |######                | Elapsed Time: 0:00:07 ETA:   0:00:16
 32% of  12.9 MiB |#######               | Elapsed Time: 0:00:07 ETA:   0:00:15
 33% of  12.9 MiB |#######               | Elapsed Time: 0:00:07 ETA:   0:00:15
 34% of  12.9 MiB |#######               | Elapsed Time: 0:00:07 ETA:   0:00:14
 36% of  12.9 MiB |########              | Elapsed Time: 0:00:08 ETA:   0:00:13
 37% of  12.9 MiB |########              | Elapsed Time: 0:00:08 ETA:   0:00:13
 38% of  12.9 MiB |########              | Elapsed Time: 0:00:08 ETA:   0:00:13
 39% of  12.9 MiB |########              | Elapsed Time: 0:00:08 ETA:   0:00:12
 41% of  12.9 MiB |#########             | Elapsed Time: 0:00:08 ETA:   0:00:11
 42% of  12.9 MiB |#########             | Elapsed Time: 0:00:08 ETA:   0:00:11
 44% of  12.9 MiB |#########             | Elapsed Time: 0:00:08 ETA:   0:00:10
 45% of  12.9 MiB |##########            | Elapsed Time: 0:00:09 ETA:   0:00:10
 47% of  12.9 MiB |##########            | Elapsed Time: 0:00:09 ETA:   0:00:10
 48% of  12.9 MiB |##########            | Elapsed Time: 0:00:09 ETA:   0:00:09
 51% of  12.9 MiB |###########           | Elapsed Time: 0:00:09 ETA:   0:00:08
 52% of  12.9 MiB |###########           | Elapsed Time: 0:00:09 ETA:   0:00:08
 55% of  12.9 MiB |############          | Elapsed Time: 0:00:09 ETA:   0:00:07
 56% of  12.9 MiB |############          | Elapsed Time: 0:00:09 ETA:   0:00:07
 58% of  12.9 MiB |############          | Elapsed Time: 0:00:09 ETA:   0:00:07
 60% of  12.9 MiB |#############         | Elapsed Time: 0:00:10 ETA:   0:00:06
 62% of  12.9 MiB |#############         | Elapsed Time: 0:00:10 ETA:   0:00:06
 64% of  12.9 MiB |##############        | Elapsed Time: 0:00:10 ETA:   0:00:05
 66% of  12.9 MiB |##############        | Elapsed Time: 0:00:10 ETA:   0:00:05
 68% of  12.9 MiB |###############       | Elapsed Time: 0:00:10 ETA:   0:00:04
 70% of  12.9 MiB |###############       | Elapsed Time: 0:00:10 ETA:   0:00:04
 72% of  12.9 MiB |################      | Elapsed Time: 0:00:10 ETA:   0:00:04
 73% of  12.9 MiB |################      | Elapsed Time: 0:00:10 ETA:   0:00:03
 76% of  12.9 MiB |################      | Elapsed Time: 0:00:10 ETA:   0:00:03
 78% of  12.9 MiB |#################     | Elapsed Time: 0:00:11 ETA:   0:00:03
 81% of  12.9 MiB |#################     | Elapsed Time: 0:00:11 ETA:   0:00:02
 83% of  12.9 MiB |##################    | Elapsed Time: 0:00:11 ETA:   0:00:02
 86% of  12.9 MiB |###################   | Elapsed Time: 0:00:11 ETA:   0:00:01
 89% of  12.9 MiB |###################   | Elapsed Time: 0:00:11 ETA:   0:00:01
 93% of  12.9 MiB |####################  | Elapsed Time: 0:00:11 ETA:   0:00:00
 96% of  12.9 MiB |##################### | Elapsed Time: 0:00:12 ETA:   0:00:00
 99% of  12.9 MiB |##################### | Elapsed Time: 0:00:12 ETA:   0:00:00
100% of  12.9 MiB |######################| Elapsed Time: 0:00:12 Time:  0:00:12
2025-11-18 13:58:41: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210913_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210913_R065.tif...
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.9 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:26
  1% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:56
  3% of  12.9 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:34
  6% of  12.9 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:23
 13% of  12.9 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:12
 26% of  12.9 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 52% of  12.9 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 68% of  12.9 MiB |###############       | Elapsed Time: 0:00:02 ETA:   0:00:01
 82% of  12.9 MiB |##################    | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.9 MiB |######################| Elapsed Time: 0:00:03 ETA:  00:00:00
100% of  12.9 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:58:45: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210918_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210918_R065.tif...
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  13.2 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:29
  1% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:58
  3% of  13.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:36
  6% of  13.2 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:24
 13% of  13.2 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:13
 25% of  13.2 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:06
 51% of  13.2 MiB |###########           | Elapsed Time: 0:00:02 ETA:   0:00:02
 70% of  13.2 MiB |###############       | Elapsed Time: 0:00:02 ETA:   0:00:01
 73% of  13.2 MiB |################      | Elapsed Time: 0:00:02 ETA:   0:00:00
 94% of  13.2 MiB |####################  | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  13.2 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:58:50: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210923_R065.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210923_R065.tif...
  0% of  12.2 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  1% of  12.2 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:20
  2% of  12.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:52
  4% of  12.2 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:32
  7% of  12.2 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:21
 13% of  12.2 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:12
 27% of  12.2 MiB |######                | Elapsed Time: 0:00:02 ETA:   0:00:05
 48% of  12.2 MiB |##########            | Elapsed Time: 0:00:02 ETA:   0:00:02
 70% of  12.2 MiB |###############       | Elapsed Time: 0:00:02 ETA:   0:00:01
 94% of  12.2 MiB |####################  | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.2 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
2025-11-18 13:58:56: oggm.utils: Downloading https://cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210925_R022.tif to /home/runner/OGGM/download_cache/cluster.klima.uni-bremen.de/~dtcg/test_files/case_study_regions/austria/sfc_type_obs/merged_data/20210925_R022.tif...
  0% of  12.8 MiB |                      | Elapsed Time: 0:00:00 ETA:  --:--:--
  0% of  12.8 MiB |                      | Elapsed Time: 0:00:00 ETA:   0:01:25
  1% of  12.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:56
  2% of  12.8 MiB |                      | Elapsed Time: 0:00:01 ETA:   0:00:46
  5% of  12.8 MiB |#                     | Elapsed Time: 0:00:01 ETA:   0:00:27
 11% of  12.8 MiB |##                    | Elapsed Time: 0:00:01 ETA:   0:00:14
 23% of  12.8 MiB |#####                 | Elapsed Time: 0:00:02 ETA:   0:00:07
 46% of  12.8 MiB |##########            | Elapsed Time: 0:00:02 ETA:   0:00:02
 71% of  12.8 MiB |###############       | Elapsed Time: 0:00:02 ETA:   0:00:01
 73% of  12.8 MiB |################      | Elapsed Time: 0:00:03 ETA:   0:00:01
 97% of  12.8 MiB |##################### | Elapsed Time: 0:00:03 ETA:   0:00:00
100% of  12.8 MiB |######################| Elapsed Time: 0:00:03 Time:  0:00:03
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">gdir</span><span class="o">.</span><span class="n">get_filepath</span><span class="p">(</span><span class="s1">&#39;gridded_data&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">ds</span><span class="p">:</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in notebooks */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
  line-height: 1.6;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-obj-name,
.xr-group-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-group-name::before {
  content: "üìÅ";
  padding-right: 0.3em;
}

.xr-group-name,
.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
  margin-block-start: 0;
  margin-block-end: 0;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
  margin: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
  border: 2px solid transparent !important;
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0) !important;
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "‚ñ∫";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "‚ñº";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-top: 4px;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-group-box {
  display: inline-grid;
  grid-template-columns: 0px 20px auto;
  width: 100%;
}

.xr-group-box-vline {
  grid-column-start: 1;
  border-right: 0.2em solid;
  border-color: var(--xr-border-color);
  width: 0px;
}

.xr-group-box-hline {
  grid-column-start: 2;
  grid-row-start: 1;
  height: 1em;
  width: 20px;
  border-bottom: 0.2em solid;
  border-color: var(--xr-border-color);
}

.xr-group-box-contents {
  grid-column-start: 3;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 77MB
Dimensions:               (y: 229, x: 254, t_sfc_type: 82)
Coordinates:
  * y                     (y) float32 916B 5.197e+06 5.197e+06 ... 5.185e+06
  * x                     (x) float32 1kB -6.412e+03 -6.361e+03 ... 6.491e+03
  * t_sfc_type            (t_sfc_type) datetime64[ns] 656B 2015-07-04 ... 202...
Data variables:
    topo                  (y, x) float32 233kB 1.849e+03 1.807e+03 ... 2.194e+03
    topo_smoothed         (y, x) float32 233kB 1.816e+03 1.8e+03 ... 2.226e+03
    topo_valid_mask       (y, x) int8 58kB 1 1 1 1 1 1 1 1 1 ... 1 1 1 1 1 1 1 1
    glacier_mask          (y, x) int8 58kB 0 0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0
    glacier_ext           (y, x) int8 58kB 0 0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0
    sfc_type_data         (t_sfc_type, y, x) float64 38MB nan nan ... nan nan
    sfc_type_uncertainty  (t_sfc_type, y, x) float64 38MB nan nan ... nan nan
Attributes:
    author:         OGGM
    author_info:    Open Global Glacier Model
    pyproj_srs:     +proj=tmerc +lat_0=0 +lon_0=10.818 +k=0.9996 +x_0=0 +y_0=...
    max_h_dem:      3733.0
    min_h_dem:      1718.0
    max_h_glacier:  3567.0
    min_h_glacier:  2814.0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-68beaf81-0814-40c4-9765-67df98296851' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-68beaf81-0814-40c4-9765-67df98296851' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>y</span>: 229</li><li><span class='xr-has-index'>x</span>: 254</li><li><span class='xr-has-index'>t_sfc_type</span>: 82</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-895f24d3-378a-4905-b197-bcfe8f9ba193' class='xr-section-summary-in' type='checkbox'  checked><label for='section-895f24d3-378a-4905-b197-bcfe8f9ba193' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>5.197e+06 5.197e+06 ... 5.185e+06</div><input id='attrs-f92f6094-c138-492b-9e8d-cd416d5ccc36' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f92f6094-c138-492b-9e8d-cd416d5ccc36' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2bdfaaa0-eaca-44e8-af43-8952d2d96f08' class='xr-var-data-in' type='checkbox'><label for='data-2bdfaaa0-eaca-44e8-af43-8952d2d96f08' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>m</dd><dt><span>long_name :</span></dt><dd>y coordinate of projection</dd><dt><span>standard_name :</span></dt><dd>projection_y_coordinate</dd></dl></div><div class='xr-var-data'><pre>array([5.197069e+06, 5.197018e+06, 5.196967e+06, ..., 5.185543e+06,
       5.185492e+06, 5.185441e+06], shape=(229,), dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-6.412e+03 -6.361e+03 ... 6.491e+03</div><input id='attrs-ccf49a9d-bbe5-4014-a11b-885789cd9c25' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ccf49a9d-bbe5-4014-a11b-885789cd9c25' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9fa71885-3c5d-48ad-b2bd-9f916154558e' class='xr-var-data-in' type='checkbox'><label for='data-9fa71885-3c5d-48ad-b2bd-9f916154558e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>m</dd><dt><span>long_name :</span></dt><dd>x coordinate of projection</dd><dt><span>standard_name :</span></dt><dd>projection_x_coordinate</dd></dl></div><div class='xr-var-data'><pre>array([-6412.465, -6361.465, -6310.465, ...,  6388.535,  6439.535,  6490.535],
      shape=(254,), dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>t_sfc_type</span></div><div class='xr-var-dims'>(t_sfc_type)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2015-07-04 ... 2021-09-25</div><input id='attrs-e16b75f3-bf46-48dd-abf2-6c3312e6c55a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e16b75f3-bf46-48dd-abf2-6c3312e6c55a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-175c7d79-b4ac-422e-8888-f8ecc1a6b96d' class='xr-var-data-in' type='checkbox'><label for='data-175c7d79-b4ac-422e-8888-f8ecc1a6b96d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Timestamp of surface type observations</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2015-07-04T00:00:00.000000000&#x27;, &#x27;2015-08-03T00:00:00.000000000&#x27;,
       &#x27;2015-08-13T00:00:00.000000000&#x27;, &#x27;2015-08-26T00:00:00.000000000&#x27;,
       &#x27;2015-10-22T00:00:00.000000000&#x27;, &#x27;2016-05-22T00:00:00.000000000&#x27;,
       &#x27;2016-06-28T00:00:00.000000000&#x27;, &#x27;2016-07-18T00:00:00.000000000&#x27;,
       &#x27;2016-08-07T00:00:00.000000000&#x27;, &#x27;2016-08-27T00:00:00.000000000&#x27;,
       &#x27;2016-09-09T00:00:00.000000000&#x27;, &#x27;2016-09-26T00:00:00.000000000&#x27;,
       &#x27;2016-10-16T00:00:00.000000000&#x27;, &#x27;2016-10-29T00:00:00.000000000&#x27;,
       &#x27;2017-05-17T00:00:00.000000000&#x27;, &#x27;2017-05-27T00:00:00.000000000&#x27;,
       &#x27;2017-06-13T00:00:00.000000000&#x27;, &#x27;2017-06-26T00:00:00.000000000&#x27;,
       &#x27;2017-07-06T00:00:00.000000000&#x27;, &#x27;2017-07-16T00:00:00.000000000&#x27;,
       &#x27;2017-08-05T00:00:00.000000000&#x27;, &#x27;2017-08-07T00:00:00.000000000&#x27;,
       &#x27;2017-08-22T00:00:00.000000000&#x27;, &#x27;2017-08-25T00:00:00.000000000&#x27;,
       &#x27;2017-08-30T00:00:00.000000000&#x27;, &#x27;2017-09-21T00:00:00.000000000&#x27;,
       &#x27;2018-06-16T00:00:00.000000000&#x27;, &#x27;2018-06-23T00:00:00.000000000&#x27;,
       &#x27;2018-07-01T00:00:00.000000000&#x27;, &#x27;2018-07-13T00:00:00.000000000&#x27;,
       &#x27;2018-07-18T00:00:00.000000000&#x27;, &#x27;2018-07-26T00:00:00.000000000&#x27;,
       &#x27;2018-07-31T00:00:00.000000000&#x27;, &#x27;2018-08-17T00:00:00.000000000&#x27;,
       &#x27;2018-08-20T00:00:00.000000000&#x27;, &#x27;2018-08-27T00:00:00.000000000&#x27;,
       &#x27;2018-09-19T00:00:00.000000000&#x27;, &#x27;2018-09-21T00:00:00.000000000&#x27;,
       &#x27;2018-09-26T00:00:00.000000000&#x27;, &#x27;2019-05-02T00:00:00.000000000&#x27;,
       &#x27;2019-05-24T00:00:00.000000000&#x27;, &#x27;2019-06-01T00:00:00.000000000&#x27;,
       &#x27;2019-06-03T00:00:00.000000000&#x27;, &#x27;2019-06-13T00:00:00.000000000&#x27;,
       &#x27;2019-06-18T00:00:00.000000000&#x27;, &#x27;2019-06-28T00:00:00.000000000&#x27;,
       &#x27;2019-07-16T00:00:00.000000000&#x27;, &#x27;2019-07-23T00:00:00.000000000&#x27;,
       &#x27;2019-08-27T00:00:00.000000000&#x27;, &#x27;2019-08-30T00:00:00.000000000&#x27;,
       &#x27;2019-09-04T00:00:00.000000000&#x27;, &#x27;2019-09-16T00:00:00.000000000&#x27;,
       &#x27;2019-09-21T00:00:00.000000000&#x27;, &#x27;2019-09-29T00:00:00.000000000&#x27;,
       &#x27;2020-05-21T00:00:00.000000000&#x27;, &#x27;2020-06-02T00:00:00.000000000&#x27;,
       &#x27;2020-06-12T00:00:00.000000000&#x27;, &#x27;2020-06-27T00:00:00.000000000&#x27;,
       &#x27;2020-07-07T00:00:00.000000000&#x27;, &#x27;2020-07-12T00:00:00.000000000&#x27;,
       &#x27;2020-07-27T00:00:00.000000000&#x27;, &#x27;2020-08-01T00:00:00.000000000&#x27;,
       &#x27;2020-08-06T00:00:00.000000000&#x27;, &#x27;2020-08-09T00:00:00.000000000&#x27;,
       &#x27;2020-08-11T00:00:00.000000000&#x27;, &#x27;2020-08-19T00:00:00.000000000&#x27;,
       &#x27;2020-08-21T00:00:00.000000000&#x27;, &#x27;2020-09-03T00:00:00.000000000&#x27;,
       &#x27;2020-09-05T00:00:00.000000000&#x27;, &#x27;2020-09-08T00:00:00.000000000&#x27;,
       &#x27;2020-09-13T00:00:00.000000000&#x27;, &#x27;2020-09-15T00:00:00.000000000&#x27;,
       &#x27;2021-08-11T00:00:00.000000000&#x27;, &#x27;2021-08-14T00:00:00.000000000&#x27;,
       &#x27;2021-08-21T00:00:00.000000000&#x27;, &#x27;2021-09-03T00:00:00.000000000&#x27;,
       &#x27;2021-09-05T00:00:00.000000000&#x27;, &#x27;2021-09-10T00:00:00.000000000&#x27;,
       &#x27;2021-09-13T00:00:00.000000000&#x27;, &#x27;2021-09-18T00:00:00.000000000&#x27;,
       &#x27;2021-09-23T00:00:00.000000000&#x27;, &#x27;2021-09-25T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-1ec55d65-f7ad-44bd-9fde-dc35fd6fd4c6' class='xr-section-summary-in' type='checkbox'  checked><label for='section-1ec55d65-f7ad-44bd-9fde-dc35fd6fd4c6' class='xr-section-summary' >Data variables: <span>(7)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>topo</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>1.849e+03 1.807e+03 ... 2.194e+03</div><input id='attrs-68b37050-3ecc-4f62-9d2e-3ed8dbcbc57f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-68b37050-3ecc-4f62-9d2e-3ed8dbcbc57f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-43b6ce64-5fba-43f2-b8e7-c86ae8e83f76' class='xr-var-data-in' type='checkbox'><label for='data-43b6ce64-5fba-43f2-b8e7-c86ae8e83f76' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>m</dd><dt><span>long_name :</span></dt><dd>DEM topography</dd></dl></div><div class='xr-var-data'><pre>array([[1849., 1807., 1764., ..., 2623., 2623., 2627.],
       [1846., 1824., 1778., ..., 2634., 2633., 2639.],
       [1847., 1799., 1780., ..., 2641., 2641., 2645.],
       ...,
       [2754., 2778., 2795., ..., 2275., 2242., 2209.],
       [2755., 2767., 2783., ..., 2265., 2229., 2196.],
       [2758., 2772., 2785., ..., 2253., 2226., 2194.]],
      shape=(229, 254), dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>topo_smoothed</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>1.816e+03 1.8e+03 ... 2.226e+03</div><input id='attrs-df520d16-c30a-404a-afbc-40233f096cce' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-df520d16-c30a-404a-afbc-40233f096cce' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dfb6fa93-be2f-4fe2-a9bc-cbe27b70680c' class='xr-var-data-in' type='checkbox'><label for='data-dfb6fa93-be2f-4fe2-a9bc-cbe27b70680c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>m</dd><dt><span>long_name :</span></dt><dd>DEM topography smoothed with radius: 3e+02 m</dd></dl></div><div class='xr-var-data'><pre>array([[1816.078 , 1800.158 , 1775.4413, ..., 2629.9312, 2631.4329,
        2632.3389],
       [1815.3606, 1799.8505, 1775.6869, ..., 2632.926 , 2634.3962,
        2635.2896],
       [1813.8464, 1798.8047, 1775.3369, ..., 2637.3337, 2638.6982,
        2639.5623],
       ...,
       [2786.4148, 2799.6812, 2822.3342, ..., 2280.4866, 2254.9998,
        2240.0876],
       [2775.5574, 2785.7324, 2803.8423, ..., 2270.864 , 2245.7812,
        2231.0544],
       [2771.1765, 2779.6396, 2795.058 , ..., 2265.4893, 2240.7385,
        2226.1707]], shape=(229, 254), dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>topo_valid_mask</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>int8</div><div class='xr-var-preview xr-preview'>1 1 1 1 1 1 1 1 ... 1 1 1 1 1 1 1 1</div><input id='attrs-389ac0d8-a029-42f7-a2c4-1838d597232e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-389ac0d8-a029-42f7-a2c4-1838d597232e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-82261b99-4436-451f-bf08-a84909bf8c29' class='xr-var-data-in' type='checkbox'><label for='data-82261b99-4436-451f-bf08-a84909bf8c29' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>-</dd><dt><span>long_name :</span></dt><dd>DEM validity mask according to geotiff input (1-0)</dd></dl></div><div class='xr-var-data'><pre>array([[1, 1, 1, ..., 1, 1, 1],
       [1, 1, 1, ..., 1, 1, 1],
       [1, 1, 1, ..., 1, 1, 1],
       ...,
       [1, 1, 1, ..., 1, 1, 1],
       [1, 1, 1, ..., 1, 1, 1],
       [1, 1, 1, ..., 1, 1, 1]], shape=(229, 254), dtype=int8)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>glacier_mask</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>int8</div><div class='xr-var-preview xr-preview'>0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0</div><input id='attrs-af3f7958-9dc6-4bd6-b935-f5d3d52fc2be' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-af3f7958-9dc6-4bd6-b935-f5d3d52fc2be' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a8453538-f61f-4c8c-8ec1-a457e5633cb2' class='xr-var-data-in' type='checkbox'><label for='data-a8453538-f61f-4c8c-8ec1-a457e5633cb2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>-</dd><dt><span>long_name :</span></dt><dd>Glacier mask</dd></dl></div><div class='xr-var-data'><pre>array([[0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       ...,
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0]], shape=(229, 254), dtype=int8)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>glacier_ext</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>int8</div><div class='xr-var-preview xr-preview'>0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0</div><input id='attrs-a61d6478-db96-487f-980e-7af1847ef645' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a61d6478-db96-487f-980e-7af1847ef645' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f236acec-782c-41d1-84d5-87b268694c80' class='xr-var-data-in' type='checkbox'><label for='data-f236acec-782c-41d1-84d5-87b268694c80' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>-</dd><dt><span>long_name :</span></dt><dd>Glacier external boundaries</dd></dl></div><div class='xr-var-data'><pre>array([[0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       ...,
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0]], shape=(229, 254), dtype=int8)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sfc_type_data</span></div><div class='xr-var-dims'>(t_sfc_type, y, x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>nan nan nan nan ... nan nan nan nan</div><input id='attrs-e66e8cb6-684b-4a50-8c50-1b5a5f636a7c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e66e8cb6-684b-4a50-8c50-1b5a5f636a7c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-758dc9fd-7f2d-4547-9def-8b2904da1f74' class='xr-var-data-in' type='checkbox'><label for='data-758dc9fd-7f2d-4547-9def-8b2904da1f74' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Glacier facies classification</dd><dt><span>data_source :</span></dt><dd>ENVEO</dd><dt><span>units :</span></dt><dd>none</dd><dt><span>code_description :</span></dt><dd>Extract dict with ast.literal_eval(ds.code).</dd><dt><span>code :</span></dt><dd>{0: &#x27;unclassified&#x27;, 1: &#x27;snow&#x27;, 2: &#x27;firn / old snow / bright ice&#x27;, 3: &#x27;clean ice&#x27;, 4: &#x27;debris&#x27;, 5: &#x27;cloud&#x27;, &#x27;nan&#x27;: &#x27;no data&#x27;}</dd></dl></div><div class='xr-var-data'><pre>array([[[nan, nan, nan, ...,  3., nan, nan],
        [nan, nan, nan, ...,  3., nan, nan],
        [nan, nan, nan, ...,  3., nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [ 4.,  4., nan, ..., nan, nan, nan],
        [ 4.,  4.,  4., ..., nan, nan, nan]],

       [[nan, nan, nan, ...,  3., nan, nan],
        [nan, nan, nan, ...,  3., nan, nan],
        [nan, nan, nan, ...,  3., nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [ 4.,  4., nan, ..., nan, nan, nan],
        [ 4.,  4.,  4., ..., nan, nan, nan]],

       [[nan, nan, nan, ...,  3., nan, nan],
        [nan, nan, nan, ...,  3., nan, nan],
        [nan, nan, nan, ...,  3., nan, nan],
        ...,
...
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [ 4.,  4., nan, ..., nan, nan, nan],
        [ 4.,  4.,  4., ..., nan, nan, nan]],

       [[nan, nan, nan, ...,  5., nan, nan],
        [nan, nan, nan, ...,  5., nan, nan],
        [nan, nan, nan, ...,  5., nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [ 4.,  4., nan, ..., nan, nan, nan],
        [ 4.,  4.,  4., ..., nan, nan, nan]],

       [[nan, nan, nan, ...,  1., nan, nan],
        [nan, nan, nan, ...,  1., nan, nan],
        [nan, nan, nan, ...,  1., nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [ 4.,  4., nan, ..., nan, nan, nan],
        [ 4.,  4.,  4., ..., nan, nan, nan]]], shape=(82, 229, 254))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>sfc_type_uncertainty</span></div><div class='xr-var-dims'>(t_sfc_type, y, x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>nan nan nan nan ... nan nan nan nan</div><input id='attrs-2095a2e6-e388-4dcd-9d12-d73b8265e08b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-2095a2e6-e388-4dcd-9d12-d73b8265e08b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a321f994-20aa-4f79-a985-26ddafc949e1' class='xr-var-data-in' type='checkbox'><label for='data-a321f994-20aa-4f79-a985-26ddafc949e1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Glacier facies classification uncertainty</dd><dt><span>data_source :</span></dt><dd>ENVEO</dd><dt><span>units :</span></dt><dd>none</dd><dt><span>code_description :</span></dt><dd>Extract dict with ast.literal_eval(ds.code).</dd><dt><span>code :</span></dt><dd>{1: &#x27;low uncertainty for illuminated pixel&#x27;, 2: &#x27;medium uncertainty for illuminated pixel&#x27;, 3: &#x27;high uncertainty for illuminated pixel&#x27;, 5: &#x27;cloud&#x27;, 11: &#x27;low uncertainty for shaded pixel&#x27;, 12: &#x27;medium uncertainty for shaded pixel&#x27;, 13: &#x27;high uncertainty for shaded pixel&#x27;, &#x27;nan&#x27;: &#x27;no data&#x27;}</dd></dl></div><div class='xr-var-data'><pre>array([[[nan, nan, nan, ...,  1., nan, nan],
        [nan, nan, nan, ...,  2., nan, nan],
        [nan, nan, nan, ...,  3., nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [ 1.,  1., nan, ..., nan, nan, nan],
        [ 1.,  1.,  1., ..., nan, nan, nan]],

       [[nan, nan, nan, ...,  1., nan, nan],
        [nan, nan, nan, ...,  2., nan, nan],
        [nan, nan, nan, ...,  2., nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [ 1.,  1., nan, ..., nan, nan, nan],
        [ 1.,  1.,  1., ..., nan, nan, nan]],

       [[nan, nan, nan, ..., 12., nan, nan],
        [nan, nan, nan, ...,  2., nan, nan],
        [nan, nan, nan, ...,  2., nan, nan],
        ...,
...
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [ 1.,  1., nan, ..., nan, nan, nan],
        [ 1.,  1.,  1., ..., nan, nan, nan]],

       [[nan, nan, nan, ...,  5., nan, nan],
        [nan, nan, nan, ...,  5., nan, nan],
        [nan, nan, nan, ...,  5., nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [ 1.,  1., nan, ..., nan, nan, nan],
        [ 1.,  1.,  1., ..., nan, nan, nan]],

       [[nan, nan, nan, ...,  2., nan, nan],
        [nan, nan, nan, ...,  2., nan, nan],
        [nan, nan, nan, ...,  3., nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [ 1.,  1., nan, ..., nan, nan, nan],
        [ 1.,  1.,  1., ..., nan, nan, nan]]], shape=(82, 229, 254))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-cde10d32-101f-4dc2-b774-db55e7e62793' class='xr-section-summary-in' type='checkbox'  checked><label for='section-cde10d32-101f-4dc2-b774-db55e7e62793' class='xr-section-summary' >Attributes: <span>(7)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>author :</span></dt><dd>OGGM</dd><dt><span>author_info :</span></dt><dd>Open Global Glacier Model</dd><dt><span>pyproj_srs :</span></dt><dd>+proj=tmerc +lat_0=0 +lon_0=10.818 +k=0.9996 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs</dd><dt><span>max_h_dem :</span></dt><dd>3733.0</dd><dt><span>min_h_dem :</span></dt><dd>1718.0</dd><dt><span>max_h_glacier :</span></dt><dd>3567.0</dd><dt><span>min_h_glacier :</span></dt><dd>2814.0</dd></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">ast</span>
<span class="n">ds</span><span class="o">.</span><span class="n">sfc_type_data</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">t_sfc_type</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">sfc_type_data</span><span class="o">.</span><span class="n">code</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{0: &#39;unclassified&#39;, 1: &#39;snow&#39;, 2: &#39;firn / old snow / bright ice&#39;, 3: &#39;clean ice&#39;, 4: &#39;debris&#39;, 5: &#39;cloud&#39;, &#39;nan&#39;: &#39;no data&#39;}
</pre></div>
</div>
<img alt="../_images/ddd9e40dfa35d58e6b5f7362a09d01475fe60c7c4f7bfd36073da68144365e01.png" src="../_images/ddd9e40dfa35d58e6b5f7362a09d01475fe60c7c4f7bfd36073da68144365e01.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">sfc_type_uncertainty</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">t_sfc_type</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">sfc_type_uncertainty</span><span class="o">.</span><span class="n">code</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{1: &#39;low uncertainty for illuminated pixel&#39;, 2: &#39;medium uncertainty for illuminated pixel&#39;, 3: &#39;high uncertainty for illuminated pixel&#39;, 5: &#39;cloud&#39;, 11: &#39;low uncertainty for shaded pixel&#39;, 12: &#39;medium uncertainty for shaded pixel&#39;, 13: &#39;high uncertainty for shaded pixel&#39;, &#39;nan&#39;: &#39;no data&#39;}
</pre></div>
</div>
<img alt="../_images/a2960a5aa1c8ef2b321cb91c4854e6589fdc659e72f53d0cdb7f5afaf0369aef.png" src="../_images/a2960a5aa1c8ef2b321cb91c4854e6589fdc659e72f53d0cdb7f5afaf0369aef.png" />
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="generate-a-snow-line-observation">
<h1>Generate a snow line observation<a class="headerlink" href="#generate-a-snow-line-observation" title="Link to this heading">#</a></h1>
<p>This part prepares the surface type observations to be used during calibration by generating a snowline altitude. In terms of <code class="docutils literal notranslate"><span class="pre">dtcg</span></code>, this is equivalent to creating a time series from the eolis gridded data, making the gridded observations usable for model calibration.</p>
<p><strong>This is still under development and will likely need further refinement, depending on the time available for additional work.</strong></p>
<p>Current approach:</p>
<ul class="simple">
<li><p>If more than 50% of the total area is cloud-covered, the date will be ignored.</p></li>
<li><p>Calculate the relative snow cover area fraction per elevation bin (ignoring cloud-covered pixels).</p></li>
<li><p>Use three thresholds (25%, 50%, and 75%) to extract the snowline altitude along with an associated uncertainty.</p></li>
<li><p>Currently, the provided pixel uncertainty is ignored.</p></li>
</ul>
<section id="define-elevation-bands-used-for-snow-line-creation">
<h2>Define elevation bands used for snow line creation<a class="headerlink" href="#define-elevation-bands-used-for-snow-line-creation" title="Link to this heading">#</a></h2>
<p>Here, we define elevation bands using the model flowline and also include the maximum and minimum values of the DEM to ensure that no observations are missed.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_elev_band_edges</span><span class="p">(</span><span class="n">gdir</span><span class="p">,</span> <span class="n">topo_data</span><span class="o">=</span><span class="s1">&#39;topo_smoothed&#39;</span><span class="p">):</span>
    <span class="c1"># load flowline</span>
    <span class="n">fl_inv</span> <span class="o">=</span> <span class="n">gdir</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s1">&#39;inversion_flowlines&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">fl_inv</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Only works with one flowline.&#39;</span>
    <span class="n">fl_inv</span> <span class="o">=</span> <span class="n">fl_inv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># get max and min height of glacier outline</span>
    <span class="k">with</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">gdir</span><span class="o">.</span><span class="n">get_filepath</span><span class="p">(</span><span class="s1">&#39;gridded_data&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">ds</span><span class="p">:</span>
        <span class="n">glacier_topo_flat</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">topo_data</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">ds</span><span class="o">.</span><span class="n">glacier_mask</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">)]</span>
        <span class="n">max_glacier_elevation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">glacier_topo_flat</span><span class="p">)</span>
        <span class="n">min_glacier_elevation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">glacier_topo_flat</span><span class="p">)</span>

    <span class="c1"># define edges just in between two surface heights</span>
    <span class="n">sfc_h</span> <span class="o">=</span> <span class="n">fl_inv</span><span class="o">.</span><span class="n">surface_h</span>
    <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">sfc_h</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">sfc_h</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="n">elev_band_edges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
        <span class="p">[[</span><span class="n">max_glacier_elevation</span> <span class="o">*</span> <span class="mf">1.01</span><span class="p">],</span>  <span class="c1"># upper edge, add a little to contain all values</span>
         <span class="n">mid</span><span class="p">,</span>
         <span class="p">[</span><span class="n">min_glacier_elevation</span> <span class="o">*</span> <span class="mf">0.99</span><span class="p">],</span>  <span class="c1"># lower edge, subtract a little to contain all values</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">elev_band_edges</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">elev_band_edges</span> <span class="o">=</span> <span class="n">get_elev_band_edges</span><span class="p">(</span><span class="n">gdir</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">elev_band_edges</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([3563.78369141, 3500.99729934, 3475.38321223, 3455.53270592,
       3435.51346985, 3406.3001613 , 3371.15116819, 3336.29807654,
       3302.48828803, 3271.23122264, 3241.22243016, 3212.62426943,
       3185.72058298, 3160.15784849, 3136.37567545, 3114.10171109,
       3092.93901759, 3072.91856645, 3054.01310389, 3036.48596897,
       3019.75595458, 3002.43547331, 2984.30220585, 2965.47695765,
       2946.23275942, 2926.4222284 , 2905.51917058, 2883.04061531,
       2860.97359102, 2841.78025411, 2826.35303129, 2789.87695312])
</pre></div>
</div>
</div>
</div>
</section>
<section id="count-surface-types-and-uncertainty-flags-per-elevation-band">
<h2>Count surface types and uncertainty flags per elevation band<a class="headerlink" href="#count-surface-types-and-uncertainty-flags-per-elevation-band" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_categories_per_elevation_band</span><span class="p">(</span><span class="n">gdir</span><span class="p">,</span>
                                      <span class="n">topo_data</span><span class="o">=</span><span class="s1">&#39;topo_smoothed&#39;</span><span class="p">,</span>
                                      <span class="n">category_data</span><span class="o">=</span><span class="s1">&#39;sfc_type_data&#39;</span><span class="p">,</span>
                                      <span class="n">category_uncertainty</span><span class="o">=</span><span class="s1">&#39;sfc_type_uncertainty&#39;</span><span class="p">,</span>
                                      <span class="n">category_time_var</span><span class="o">=</span><span class="s1">&#39;t_sfc_type&#39;</span><span class="p">,</span>
                                      <span class="n">nodata_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                                     <span class="p">):</span>
    
    <span class="c1"># open needed data for aggregation</span>
    <span class="k">with</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">gdir</span><span class="o">.</span><span class="n">get_filepath</span><span class="p">(</span><span class="s1">&#39;gridded_data&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">ds</span><span class="p">:</span>
        <span class="n">elevations</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">topo_data</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">ds</span><span class="o">.</span><span class="n">glacier_mask</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">)]</span>
        <span class="n">categories</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">category_data</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span><span class="n">ds</span><span class="o">.</span><span class="n">glacier_mask</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">)]</span>
        <span class="n">categories_attrs</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">category_data</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span>
        <span class="n">uncertainties</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">category_uncertainty</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span><span class="n">ds</span><span class="o">.</span><span class="n">glacier_mask</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">)]</span>
        <span class="n">uncertainties_attrs</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">category_uncertainty</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span>
        <span class="n">time_dim</span> <span class="o">=</span> <span class="n">categories</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">time_values</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">category_time_var</span><span class="p">]</span>
        <span class="c1"># Mask out nodata</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">nodata_value</span><span class="p">):</span>
            <span class="n">valid_mask</span> <span class="o">=</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">categories</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">valid_mask</span> <span class="o">=</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">categories</span><span class="p">,</span> <span class="n">nodata_value</span><span class="p">)</span>
    
    <span class="c1"># get elevation bands, need to be ascending for np.digitize</span>
    <span class="n">elev_band_edges</span> <span class="o">=</span> <span class="n">get_elev_band_edges</span><span class="p">(</span><span class="n">gdir</span><span class="p">,</span> <span class="n">topo_data</span><span class="o">=</span><span class="n">topo_data</span><span class="p">)</span>
    <span class="n">n_bins</span> <span class="o">=</span> <span class="n">elev_band_edges</span><span class="o">.</span><span class="n">size</span> <span class="o">-</span> <span class="mi">1</span>
    
    <span class="c1"># assign elevation band indexes, -1 to start from 0</span>
    <span class="n">bin_ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">digitize</span><span class="p">(</span><span class="n">elevations</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">elev_band_edges</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">count_values_per_elevation_bin</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="c1"># Get unique valid categories (excluding nodata and -1)</span>
        <span class="n">unique_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">unique_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">unique_values</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">nodata_value</span><span class="p">):</span>
            <span class="n">unique_values</span> <span class="o">=</span> <span class="n">unique_values</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">unique_values</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">unique_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">setdiff1d</span><span class="p">(</span><span class="n">unique_values</span><span class="p">,</span> <span class="p">[</span><span class="n">nodata_value</span><span class="p">])</span>
        <span class="c1"># we assign values from 0 to len(unique_cats) to be able to use hist 2d later</span>
        <span class="n">values_to_index</span> <span class="o">=</span> <span class="p">{</span><span class="n">value</span><span class="p">:</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">unique_values</span><span class="p">)}</span>
    
        <span class="c1"># Create result array: shape should be (time, elevation_bin, valid categories)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">time_dim</span><span class="p">,</span> <span class="n">n_bins</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_values</span><span class="p">)),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        
        <span class="c1"># Efficient per-time counting</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">time_dim</span><span class="p">):</span>
            <span class="n">valid</span> <span class="o">=</span> <span class="n">valid_mask</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
            <span class="n">binned</span> <span class="o">=</span> <span class="n">bin_ids</span><span class="p">[</span><span class="n">valid</span><span class="p">]</span>
            <span class="n">datavals</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">t</span><span class="p">][</span><span class="n">valid</span><span class="p">]</span>
        
            <span class="c1"># Map category values to indices</span>
            <span class="n">value_idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">values_to_index</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">datavals</span><span class="p">])</span>
            <span class="n">hist2d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n_bins</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_values</span><span class="p">)),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        
            <span class="c1"># Use np.add.at for fast 2D histogram</span>
            <span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="n">hist2d</span><span class="p">,</span> <span class="p">(</span><span class="n">binned</span><span class="p">,</span> <span class="n">value_idx</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">result</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">hist2d</span>
    
        <span class="k">return</span> <span class="n">result</span><span class="p">,</span> <span class="n">unique_values</span>
    
    <span class="n">category_counts</span><span class="p">,</span> <span class="n">unique_cats</span> <span class="o">=</span> <span class="n">count_values_per_elevation_bin</span><span class="p">(</span><span class="n">categories</span><span class="p">)</span>
    <span class="n">uncertainty_counts</span><span class="p">,</span> <span class="n">unique_uncert</span> <span class="o">=</span> <span class="n">count_values_per_elevation_bin</span><span class="p">(</span><span class="n">uncertainties</span><span class="p">)</span>
    
    <span class="c1"># create dataset of result</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span>
        <span class="n">data_vars</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;category_counts&quot;</span><span class="p">:</span> <span class="p">(</span>
                <span class="p">(</span><span class="s2">&quot;t_sfc_type&quot;</span><span class="p">,</span> <span class="s2">&quot;elevation_bin&quot;</span><span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">),</span>
                <span class="n">category_counts</span><span class="p">,</span>
                <span class="p">{</span><span class="s2">&quot;long_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Count of glacier facies classification per elevation band&quot;</span><span class="p">},</span>
            <span class="p">),</span>
            <span class="s2">&quot;uncertainty_counts&quot;</span><span class="p">:</span> <span class="p">(</span>
                <span class="p">(</span><span class="s2">&quot;t_sfc_type&quot;</span><span class="p">,</span> <span class="s2">&quot;elevation_bin&quot;</span><span class="p">,</span> <span class="s2">&quot;uncertainty_flag&quot;</span><span class="p">),</span>
                <span class="n">uncertainty_counts</span><span class="p">,</span>
                <span class="p">{</span><span class="s2">&quot;long_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Count of glacier facies classification  uncertainty per elevation band&quot;</span><span class="p">},</span>
            <span class="p">),</span>
        <span class="p">},</span>
        <span class="n">coords</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;t_sfc_type&quot;</span><span class="p">:</span> <span class="n">time_values</span><span class="p">,</span>
            <span class="s2">&quot;elevation_bin&quot;</span><span class="p">:</span> <span class="p">((</span><span class="s2">&quot;elevation_bin&quot;</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_bins</span><span class="p">),</span>
                              <span class="p">{</span><span class="s2">&quot;long_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Index of elevation bin&quot;</span><span class="p">}),</span>
            <span class="s2">&quot;lower_elevation&quot;</span><span class="p">:</span> <span class="p">((</span><span class="s2">&quot;elevation_bin&quot;</span><span class="p">),</span> <span class="n">elev_band_edges</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
                                <span class="p">{</span><span class="s2">&quot;long_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Lower boundary of elevation bin&quot;</span><span class="p">}),</span>
            <span class="s2">&quot;upper_elevation&quot;</span><span class="p">:</span> <span class="p">((</span><span class="s2">&quot;elevation_bin&quot;</span><span class="p">),</span> <span class="n">elev_band_edges</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                                <span class="p">{</span><span class="s2">&quot;long_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Upper boundary of elevation bin&quot;</span><span class="p">}),</span>
            <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="p">((</span><span class="s2">&quot;category&quot;</span><span class="p">),</span> <span class="n">unique_cats</span><span class="p">,</span> <span class="n">categories_attrs</span><span class="p">),</span>
            <span class="s2">&quot;uncertainty_flag&quot;</span><span class="p">:</span> <span class="p">((</span><span class="s2">&quot;uncertainty_flag&quot;</span><span class="p">),</span> <span class="n">unique_uncert</span><span class="p">,</span> <span class="n">uncertainties_attrs</span><span class="p">),</span>
        <span class="p">},</span>
    <span class="p">)</span>
    
    <span class="k">return</span> <span class="n">ds</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_counts</span> <span class="o">=</span> <span class="n">get_categories_per_elevation_band</span><span class="p">(</span><span class="n">gdir</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_counts</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in notebooks */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
  line-height: 1.6;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-obj-name,
.xr-group-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-group-name::before {
  content: "üìÅ";
  padding-right: 0.3em;
}

.xr-group-name,
.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
  margin-block-start: 0;
  margin-block-end: 0;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
  margin: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
  border: 2px solid transparent !important;
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0) !important;
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "‚ñ∫";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "‚ñº";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-top: 4px;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-group-box {
  display: inline-grid;
  grid-template-columns: 0px 20px auto;
  width: 100%;
}

.xr-group-box-vline {
  grid-column-start: 1;
  border-right: 0.2em solid;
  border-color: var(--xr-border-color);
  width: 0px;
}

.xr-group-box-hline {
  grid-column-start: 2;
  grid-row-start: 1;
  height: 1em;
  width: 20px;
  border-bottom: 0.2em solid;
  border-color: var(--xr-border-color);
}

.xr-group-box-contents {
  grid-column-start: 3;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 246kB
Dimensions:             (t_sfc_type: 82, elevation_bin: 31, category: 5,
                         uncertainty_flag: 7)
Coordinates:
  * t_sfc_type          (t_sfc_type) datetime64[ns] 656B 2015-07-04 ... 2021-...
  * elevation_bin       (elevation_bin) int64 248B 0 1 2 3 4 ... 26 27 28 29 30
  * category            (category) float64 40B 1.0 2.0 3.0 4.0 5.0
  * uncertainty_flag    (uncertainty_flag) float64 56B 1.0 2.0 3.0 ... 12.0 13.0
    lower_elevation     (elevation_bin) float64 248B 3.501e+03 ... 2.79e+03
    upper_elevation     (elevation_bin) float64 248B 3.564e+03 ... 2.826e+03
Data variables:
    category_counts     (t_sfc_type, elevation_bin, category) int64 102kB 3 ....
    uncertainty_counts  (t_sfc_type, elevation_bin, uncertainty_flag) int64 142kB ...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-4723a0bf-3468-4fab-95ff-4f623d1fb752' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-4723a0bf-3468-4fab-95ff-4f623d1fb752' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>t_sfc_type</span>: 82</li><li><span class='xr-has-index'>elevation_bin</span>: 31</li><li><span class='xr-has-index'>category</span>: 5</li><li><span class='xr-has-index'>uncertainty_flag</span>: 7</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-cb95961c-7ea3-49f0-bce0-8950267d1e42' class='xr-section-summary-in' type='checkbox'  checked><label for='section-cb95961c-7ea3-49f0-bce0-8950267d1e42' class='xr-section-summary' >Coordinates: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>t_sfc_type</span></div><div class='xr-var-dims'>(t_sfc_type)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2015-07-04 ... 2021-09-25</div><input id='attrs-ad50ee81-c2d7-4a91-9f61-42d6fe3ab06d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ad50ee81-c2d7-4a91-9f61-42d6fe3ab06d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6e07761e-7590-4684-a44a-9523a002f8b1' class='xr-var-data-in' type='checkbox'><label for='data-6e07761e-7590-4684-a44a-9523a002f8b1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Timestamp of surface type observations</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2015-07-04T00:00:00.000000000&#x27;, &#x27;2015-08-03T00:00:00.000000000&#x27;,
       &#x27;2015-08-13T00:00:00.000000000&#x27;, &#x27;2015-08-26T00:00:00.000000000&#x27;,
       &#x27;2015-10-22T00:00:00.000000000&#x27;, &#x27;2016-05-22T00:00:00.000000000&#x27;,
       &#x27;2016-06-28T00:00:00.000000000&#x27;, &#x27;2016-07-18T00:00:00.000000000&#x27;,
       &#x27;2016-08-07T00:00:00.000000000&#x27;, &#x27;2016-08-27T00:00:00.000000000&#x27;,
       &#x27;2016-09-09T00:00:00.000000000&#x27;, &#x27;2016-09-26T00:00:00.000000000&#x27;,
       &#x27;2016-10-16T00:00:00.000000000&#x27;, &#x27;2016-10-29T00:00:00.000000000&#x27;,
       &#x27;2017-05-17T00:00:00.000000000&#x27;, &#x27;2017-05-27T00:00:00.000000000&#x27;,
       &#x27;2017-06-13T00:00:00.000000000&#x27;, &#x27;2017-06-26T00:00:00.000000000&#x27;,
       &#x27;2017-07-06T00:00:00.000000000&#x27;, &#x27;2017-07-16T00:00:00.000000000&#x27;,
       &#x27;2017-08-05T00:00:00.000000000&#x27;, &#x27;2017-08-07T00:00:00.000000000&#x27;,
       &#x27;2017-08-22T00:00:00.000000000&#x27;, &#x27;2017-08-25T00:00:00.000000000&#x27;,
       &#x27;2017-08-30T00:00:00.000000000&#x27;, &#x27;2017-09-21T00:00:00.000000000&#x27;,
       &#x27;2018-06-16T00:00:00.000000000&#x27;, &#x27;2018-06-23T00:00:00.000000000&#x27;,
       &#x27;2018-07-01T00:00:00.000000000&#x27;, &#x27;2018-07-13T00:00:00.000000000&#x27;,
       &#x27;2018-07-18T00:00:00.000000000&#x27;, &#x27;2018-07-26T00:00:00.000000000&#x27;,
       &#x27;2018-07-31T00:00:00.000000000&#x27;, &#x27;2018-08-17T00:00:00.000000000&#x27;,
       &#x27;2018-08-20T00:00:00.000000000&#x27;, &#x27;2018-08-27T00:00:00.000000000&#x27;,
       &#x27;2018-09-19T00:00:00.000000000&#x27;, &#x27;2018-09-21T00:00:00.000000000&#x27;,
       &#x27;2018-09-26T00:00:00.000000000&#x27;, &#x27;2019-05-02T00:00:00.000000000&#x27;,
       &#x27;2019-05-24T00:00:00.000000000&#x27;, &#x27;2019-06-01T00:00:00.000000000&#x27;,
       &#x27;2019-06-03T00:00:00.000000000&#x27;, &#x27;2019-06-13T00:00:00.000000000&#x27;,
       &#x27;2019-06-18T00:00:00.000000000&#x27;, &#x27;2019-06-28T00:00:00.000000000&#x27;,
       &#x27;2019-07-16T00:00:00.000000000&#x27;, &#x27;2019-07-23T00:00:00.000000000&#x27;,
       &#x27;2019-08-27T00:00:00.000000000&#x27;, &#x27;2019-08-30T00:00:00.000000000&#x27;,
       &#x27;2019-09-04T00:00:00.000000000&#x27;, &#x27;2019-09-16T00:00:00.000000000&#x27;,
       &#x27;2019-09-21T00:00:00.000000000&#x27;, &#x27;2019-09-29T00:00:00.000000000&#x27;,
       &#x27;2020-05-21T00:00:00.000000000&#x27;, &#x27;2020-06-02T00:00:00.000000000&#x27;,
       &#x27;2020-06-12T00:00:00.000000000&#x27;, &#x27;2020-06-27T00:00:00.000000000&#x27;,
       &#x27;2020-07-07T00:00:00.000000000&#x27;, &#x27;2020-07-12T00:00:00.000000000&#x27;,
       &#x27;2020-07-27T00:00:00.000000000&#x27;, &#x27;2020-08-01T00:00:00.000000000&#x27;,
       &#x27;2020-08-06T00:00:00.000000000&#x27;, &#x27;2020-08-09T00:00:00.000000000&#x27;,
       &#x27;2020-08-11T00:00:00.000000000&#x27;, &#x27;2020-08-19T00:00:00.000000000&#x27;,
       &#x27;2020-08-21T00:00:00.000000000&#x27;, &#x27;2020-09-03T00:00:00.000000000&#x27;,
       &#x27;2020-09-05T00:00:00.000000000&#x27;, &#x27;2020-09-08T00:00:00.000000000&#x27;,
       &#x27;2020-09-13T00:00:00.000000000&#x27;, &#x27;2020-09-15T00:00:00.000000000&#x27;,
       &#x27;2021-08-11T00:00:00.000000000&#x27;, &#x27;2021-08-14T00:00:00.000000000&#x27;,
       &#x27;2021-08-21T00:00:00.000000000&#x27;, &#x27;2021-09-03T00:00:00.000000000&#x27;,
       &#x27;2021-09-05T00:00:00.000000000&#x27;, &#x27;2021-09-10T00:00:00.000000000&#x27;,
       &#x27;2021-09-13T00:00:00.000000000&#x27;, &#x27;2021-09-18T00:00:00.000000000&#x27;,
       &#x27;2021-09-23T00:00:00.000000000&#x27;, &#x27;2021-09-25T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>elevation_bin</span></div><div class='xr-var-dims'>(elevation_bin)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 25 26 27 28 29 30</div><input id='attrs-0e1c5ba3-2f74-4409-8a71-62b730bbf129' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0e1c5ba3-2f74-4409-8a71-62b730bbf129' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-09281238-c020-45d5-9e79-9b85a9357f70' class='xr-var-data-in' type='checkbox'><label for='data-09281238-c020-45d5-9e79-9b85a9357f70' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Index of elevation bin</dd></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,
       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>category</span></div><div class='xr-var-dims'>(category)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.0 2.0 3.0 4.0 5.0</div><input id='attrs-1a11e167-6497-4830-8545-dfb0ce508dbc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1a11e167-6497-4830-8545-dfb0ce508dbc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ada0048b-e4be-4a3b-9251-b5b516597dcd' class='xr-var-data-in' type='checkbox'><label for='data-ada0048b-e4be-4a3b-9251-b5b516597dcd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Glacier facies classification</dd><dt><span>data_source :</span></dt><dd>ENVEO</dd><dt><span>units :</span></dt><dd>none</dd><dt><span>code_description :</span></dt><dd>Extract dict with ast.literal_eval(ds.code).</dd><dt><span>code :</span></dt><dd>{0: &#x27;unclassified&#x27;, 1: &#x27;snow&#x27;, 2: &#x27;firn / old snow / bright ice&#x27;, 3: &#x27;clean ice&#x27;, 4: &#x27;debris&#x27;, 5: &#x27;cloud&#x27;, &#x27;nan&#x27;: &#x27;no data&#x27;}</dd></dl></div><div class='xr-var-data'><pre>array([1., 2., 3., 4., 5.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>uncertainty_flag</span></div><div class='xr-var-dims'>(uncertainty_flag)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.0 2.0 3.0 5.0 11.0 12.0 13.0</div><input id='attrs-6d65a335-a096-4918-aa39-910f239e6b78' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6d65a335-a096-4918-aa39-910f239e6b78' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e5e36286-ce67-490c-a2b0-dbcb85993e95' class='xr-var-data-in' type='checkbox'><label for='data-e5e36286-ce67-490c-a2b0-dbcb85993e95' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Glacier facies classification uncertainty</dd><dt><span>data_source :</span></dt><dd>ENVEO</dd><dt><span>units :</span></dt><dd>none</dd><dt><span>code_description :</span></dt><dd>Extract dict with ast.literal_eval(ds.code).</dd><dt><span>code :</span></dt><dd>{1: &#x27;low uncertainty for illuminated pixel&#x27;, 2: &#x27;medium uncertainty for illuminated pixel&#x27;, 3: &#x27;high uncertainty for illuminated pixel&#x27;, 5: &#x27;cloud&#x27;, 11: &#x27;low uncertainty for shaded pixel&#x27;, 12: &#x27;medium uncertainty for shaded pixel&#x27;, 13: &#x27;high uncertainty for shaded pixel&#x27;, &#x27;nan&#x27;: &#x27;no data&#x27;}</dd></dl></div><div class='xr-var-data'><pre>array([ 1.,  2.,  3.,  5., 11., 12., 13.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lower_elevation</span></div><div class='xr-var-dims'>(elevation_bin)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.501e+03 3.475e+03 ... 2.79e+03</div><input id='attrs-b1e6befb-916b-4b23-a088-b3130f5c3e7d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b1e6befb-916b-4b23-a088-b3130f5c3e7d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-80d5b728-f19f-4f92-9d54-8b48d9bee3b3' class='xr-var-data-in' type='checkbox'><label for='data-80d5b728-f19f-4f92-9d54-8b48d9bee3b3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Lower boundary of elevation bin</dd></dl></div><div class='xr-var-data'><pre>array([3500.99729934, 3475.38321223, 3455.53270592, 3435.51346985,
       3406.3001613 , 3371.15116819, 3336.29807654, 3302.48828803,
       3271.23122264, 3241.22243016, 3212.62426943, 3185.72058298,
       3160.15784849, 3136.37567545, 3114.10171109, 3092.93901759,
       3072.91856645, 3054.01310389, 3036.48596897, 3019.75595458,
       3002.43547331, 2984.30220585, 2965.47695765, 2946.23275942,
       2926.4222284 , 2905.51917058, 2883.04061531, 2860.97359102,
       2841.78025411, 2826.35303129, 2789.87695312])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>upper_elevation</span></div><div class='xr-var-dims'>(elevation_bin)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.564e+03 3.501e+03 ... 2.826e+03</div><input id='attrs-8a0f6545-bb3d-4cdc-a820-24444a68211b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8a0f6545-bb3d-4cdc-a820-24444a68211b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6650fd7f-1a71-4f25-a0ca-38d8876778e5' class='xr-var-data-in' type='checkbox'><label for='data-6650fd7f-1a71-4f25-a0ca-38d8876778e5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Upper boundary of elevation bin</dd></dl></div><div class='xr-var-data'><pre>array([3563.78369141, 3500.99729934, 3475.38321223, 3455.53270592,
       3435.51346985, 3406.3001613 , 3371.15116819, 3336.29807654,
       3302.48828803, 3271.23122264, 3241.22243016, 3212.62426943,
       3185.72058298, 3160.15784849, 3136.37567545, 3114.10171109,
       3092.93901759, 3072.91856645, 3054.01310389, 3036.48596897,
       3019.75595458, 3002.43547331, 2984.30220585, 2965.47695765,
       2946.23275942, 2926.4222284 , 2905.51917058, 2883.04061531,
       2860.97359102, 2841.78025411, 2826.35303129])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-6154fcba-7c91-44b9-93ba-189339a99a7c' class='xr-section-summary-in' type='checkbox'  checked><label for='section-6154fcba-7c91-44b9-93ba-189339a99a7c' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>category_counts</span></div><div class='xr-var-dims'>(t_sfc_type, elevation_bin, category)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>3 0 1 1 0 6 0 0 ... 0 0 0 0 0 0 0 0</div><input id='attrs-dd8c2cfd-b510-41bc-a7d7-bef8d089cc1a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-dd8c2cfd-b510-41bc-a7d7-bef8d089cc1a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ce8dc461-235c-4f32-8ba6-b5034647cfdb' class='xr-var-data-in' type='checkbox'><label for='data-ce8dc461-235c-4f32-8ba6-b5034647cfdb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Count of glacier facies classification per elevation band</dd></dl></div><div class='xr-var-data'><pre>array([[[ 3,  0,  1,  1,  0],
        [ 6,  0,  0,  0,  0],
        [32,  0,  0,  0,  0],
        ...,
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0]],

       [[ 3,  0,  0,  2,  0],
        [ 5,  0,  1,  0,  0],
        [32,  0,  0,  0,  0],
        ...,
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0]],

       [[ 0,  0,  0,  0,  5],
        [ 0,  0,  0,  0,  6],
        [25,  2,  0,  0,  5],
        ...,
...
        ...,
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0]],

       [[ 0,  0,  0,  0,  5],
        [ 0,  0,  0,  0,  6],
        [ 0,  0,  0,  0, 32],
        ...,
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0]],

       [[ 2,  0,  2,  1,  0],
        [ 4,  0,  2,  0,  0],
        [30,  0,  2,  0,  0],
        ...,
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0]]], shape=(82, 31, 5))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>uncertainty_counts</span></div><div class='xr-var-dims'>(t_sfc_type, elevation_bin, uncertainty_flag)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>3 1 0 0 1 0 0 5 ... 0 0 0 0 0 0 0 0</div><input id='attrs-49f8bbb6-42e0-4a34-8dee-d8c020af25dc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-49f8bbb6-42e0-4a34-8dee-d8c020af25dc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8b755d95-09cb-422e-a633-7f1c4e13765a' class='xr-var-data-in' type='checkbox'><label for='data-8b755d95-09cb-422e-a633-7f1c4e13765a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Count of glacier facies classification  uncertainty per elevation band</dd></dl></div><div class='xr-var-data'><pre>array([[[ 3,  1,  0, ...,  1,  0,  0],
        [ 5,  1,  0, ...,  0,  0,  0],
        [32,  0,  0, ...,  0,  0,  0],
        ...,
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0]],

       [[ 4,  1,  0, ...,  0,  0,  0],
        [ 5,  1,  0, ...,  0,  0,  0],
        [32,  0,  0, ...,  0,  0,  0],
        ...,
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0]],

       [[ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        [24,  1,  2, ...,  0,  0,  0],
        ...,
...
        ...,
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0]],

       [[ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        ...,
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0]],

       [[ 3,  1,  1, ...,  0,  0,  0],
        [ 4,  0,  2, ...,  0,  0,  0],
        [25,  5,  2, ...,  0,  0,  0],
        ...,
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0]]], shape=(82, 31, 7))</pre></div></li></ul></div></li></ul></div></div></div></div>
</div>
</section>
<section id="define-snowline-altitude-for-each-time-stamp">
<h2>Define snowline altitude for each time stamp<a class="headerlink" href="#define-snowline-altitude-for-each-time-stamp" title="Link to this heading">#</a></h2>
<p>This part likely requires further development. The main question is how to use the information from the category count together with the uncertainty count to derive a snowline altitude with associated uncertainty. Currently the provided observation undertainty is not used.</p>
<section id="exclude-elevation-bins-with-no-valid-data">
<h3>exclude elevation bins with no valid data<a class="headerlink" href="#exclude-elevation-bins-with-no-valid-data" title="Link to this heading">#</a></h3>
<p>This is happening because we use different outline.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">exclude_empty_elevation_bins</span><span class="p">(</span><span class="n">ds</span><span class="p">):</span>
    <span class="c1"># get the total number of observations per elevation band</span>
    <span class="n">number_grid_points_elev_bin</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">category_counts</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>

    <span class="c1"># check that this number is the same for each timestamp</span>
    <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">number_grid_points_elev_bin</span> <span class="o">==</span> <span class="n">number_grid_points_elev_bin</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">t_sfc_type</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
    
    <span class="c1"># if the number of grid points is 0 their is no valid data</span>
    <span class="k">return</span> <span class="n">ds</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">elevation_bin</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">number_grid_points_elev_bin</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">t_sfc_type</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># test it</span>
<span class="n">exclude_empty_elevation_bins</span><span class="p">(</span><span class="n">ds_counts</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in notebooks */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
  line-height: 1.6;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-obj-name,
.xr-group-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-group-name::before {
  content: "üìÅ";
  padding-right: 0.3em;
}

.xr-group-name,
.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
  margin-block-start: 0;
  margin-block-end: 0;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
  margin: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
  border: 2px solid transparent !important;
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0) !important;
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "‚ñ∫";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "‚ñº";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-top: 4px;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-group-box {
  display: inline-grid;
  grid-template-columns: 0px 20px auto;
  width: 100%;
}

.xr-group-box-vline {
  grid-column-start: 1;
  border-right: 0.2em solid;
  border-color: var(--xr-border-color);
  width: 0px;
}

.xr-group-box-hline {
  grid-column-start: 2;
  grid-row-start: 1;
  height: 1em;
  width: 20px;
  border-bottom: 0.2em solid;
  border-color: var(--xr-border-color);
}

.xr-group-box-contents {
  grid-column-start: 3;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 214kB
Dimensions:             (t_sfc_type: 82, elevation_bin: 27, category: 5,
                         uncertainty_flag: 7)
Coordinates:
  * t_sfc_type          (t_sfc_type) datetime64[ns] 656B 2015-07-04 ... 2021-...
  * elevation_bin       (elevation_bin) int64 216B 0 1 2 3 4 ... 22 23 24 25 26
  * category            (category) float64 40B 1.0 2.0 3.0 4.0 5.0
  * uncertainty_flag    (uncertainty_flag) float64 56B 1.0 2.0 3.0 ... 12.0 13.0
    lower_elevation     (elevation_bin) float64 216B 3.501e+03 ... 2.883e+03
    upper_elevation     (elevation_bin) float64 216B 3.564e+03 ... 2.906e+03
Data variables:
    category_counts     (t_sfc_type, elevation_bin, category) int64 89kB 3 ... 0
    uncertainty_counts  (t_sfc_type, elevation_bin, uncertainty_flag) int64 124kB ...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-68fd3b12-3833-42ed-8d42-15169f9b36bb' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-68fd3b12-3833-42ed-8d42-15169f9b36bb' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>t_sfc_type</span>: 82</li><li><span class='xr-has-index'>elevation_bin</span>: 27</li><li><span class='xr-has-index'>category</span>: 5</li><li><span class='xr-has-index'>uncertainty_flag</span>: 7</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-4f4b9f82-3d6e-4f4b-b5bf-64e732a7bf2c' class='xr-section-summary-in' type='checkbox'  checked><label for='section-4f4b9f82-3d6e-4f4b-b5bf-64e732a7bf2c' class='xr-section-summary' >Coordinates: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>t_sfc_type</span></div><div class='xr-var-dims'>(t_sfc_type)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2015-07-04 ... 2021-09-25</div><input id='attrs-ac2df591-cd0a-4471-9cac-dceaca2bb259' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ac2df591-cd0a-4471-9cac-dceaca2bb259' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-991bac12-8471-49e2-95b7-dc510531b200' class='xr-var-data-in' type='checkbox'><label for='data-991bac12-8471-49e2-95b7-dc510531b200' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Timestamp of surface type observations</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2015-07-04T00:00:00.000000000&#x27;, &#x27;2015-08-03T00:00:00.000000000&#x27;,
       &#x27;2015-08-13T00:00:00.000000000&#x27;, &#x27;2015-08-26T00:00:00.000000000&#x27;,
       &#x27;2015-10-22T00:00:00.000000000&#x27;, &#x27;2016-05-22T00:00:00.000000000&#x27;,
       &#x27;2016-06-28T00:00:00.000000000&#x27;, &#x27;2016-07-18T00:00:00.000000000&#x27;,
       &#x27;2016-08-07T00:00:00.000000000&#x27;, &#x27;2016-08-27T00:00:00.000000000&#x27;,
       &#x27;2016-09-09T00:00:00.000000000&#x27;, &#x27;2016-09-26T00:00:00.000000000&#x27;,
       &#x27;2016-10-16T00:00:00.000000000&#x27;, &#x27;2016-10-29T00:00:00.000000000&#x27;,
       &#x27;2017-05-17T00:00:00.000000000&#x27;, &#x27;2017-05-27T00:00:00.000000000&#x27;,
       &#x27;2017-06-13T00:00:00.000000000&#x27;, &#x27;2017-06-26T00:00:00.000000000&#x27;,
       &#x27;2017-07-06T00:00:00.000000000&#x27;, &#x27;2017-07-16T00:00:00.000000000&#x27;,
       &#x27;2017-08-05T00:00:00.000000000&#x27;, &#x27;2017-08-07T00:00:00.000000000&#x27;,
       &#x27;2017-08-22T00:00:00.000000000&#x27;, &#x27;2017-08-25T00:00:00.000000000&#x27;,
       &#x27;2017-08-30T00:00:00.000000000&#x27;, &#x27;2017-09-21T00:00:00.000000000&#x27;,
       &#x27;2018-06-16T00:00:00.000000000&#x27;, &#x27;2018-06-23T00:00:00.000000000&#x27;,
       &#x27;2018-07-01T00:00:00.000000000&#x27;, &#x27;2018-07-13T00:00:00.000000000&#x27;,
       &#x27;2018-07-18T00:00:00.000000000&#x27;, &#x27;2018-07-26T00:00:00.000000000&#x27;,
       &#x27;2018-07-31T00:00:00.000000000&#x27;, &#x27;2018-08-17T00:00:00.000000000&#x27;,
       &#x27;2018-08-20T00:00:00.000000000&#x27;, &#x27;2018-08-27T00:00:00.000000000&#x27;,
       &#x27;2018-09-19T00:00:00.000000000&#x27;, &#x27;2018-09-21T00:00:00.000000000&#x27;,
       &#x27;2018-09-26T00:00:00.000000000&#x27;, &#x27;2019-05-02T00:00:00.000000000&#x27;,
       &#x27;2019-05-24T00:00:00.000000000&#x27;, &#x27;2019-06-01T00:00:00.000000000&#x27;,
       &#x27;2019-06-03T00:00:00.000000000&#x27;, &#x27;2019-06-13T00:00:00.000000000&#x27;,
       &#x27;2019-06-18T00:00:00.000000000&#x27;, &#x27;2019-06-28T00:00:00.000000000&#x27;,
       &#x27;2019-07-16T00:00:00.000000000&#x27;, &#x27;2019-07-23T00:00:00.000000000&#x27;,
       &#x27;2019-08-27T00:00:00.000000000&#x27;, &#x27;2019-08-30T00:00:00.000000000&#x27;,
       &#x27;2019-09-04T00:00:00.000000000&#x27;, &#x27;2019-09-16T00:00:00.000000000&#x27;,
       &#x27;2019-09-21T00:00:00.000000000&#x27;, &#x27;2019-09-29T00:00:00.000000000&#x27;,
       &#x27;2020-05-21T00:00:00.000000000&#x27;, &#x27;2020-06-02T00:00:00.000000000&#x27;,
       &#x27;2020-06-12T00:00:00.000000000&#x27;, &#x27;2020-06-27T00:00:00.000000000&#x27;,
       &#x27;2020-07-07T00:00:00.000000000&#x27;, &#x27;2020-07-12T00:00:00.000000000&#x27;,
       &#x27;2020-07-27T00:00:00.000000000&#x27;, &#x27;2020-08-01T00:00:00.000000000&#x27;,
       &#x27;2020-08-06T00:00:00.000000000&#x27;, &#x27;2020-08-09T00:00:00.000000000&#x27;,
       &#x27;2020-08-11T00:00:00.000000000&#x27;, &#x27;2020-08-19T00:00:00.000000000&#x27;,
       &#x27;2020-08-21T00:00:00.000000000&#x27;, &#x27;2020-09-03T00:00:00.000000000&#x27;,
       &#x27;2020-09-05T00:00:00.000000000&#x27;, &#x27;2020-09-08T00:00:00.000000000&#x27;,
       &#x27;2020-09-13T00:00:00.000000000&#x27;, &#x27;2020-09-15T00:00:00.000000000&#x27;,
       &#x27;2021-08-11T00:00:00.000000000&#x27;, &#x27;2021-08-14T00:00:00.000000000&#x27;,
       &#x27;2021-08-21T00:00:00.000000000&#x27;, &#x27;2021-09-03T00:00:00.000000000&#x27;,
       &#x27;2021-09-05T00:00:00.000000000&#x27;, &#x27;2021-09-10T00:00:00.000000000&#x27;,
       &#x27;2021-09-13T00:00:00.000000000&#x27;, &#x27;2021-09-18T00:00:00.000000000&#x27;,
       &#x27;2021-09-23T00:00:00.000000000&#x27;, &#x27;2021-09-25T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>elevation_bin</span></div><div class='xr-var-dims'>(elevation_bin)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 21 22 23 24 25 26</div><input id='attrs-0b7a25d8-19b8-4f56-8704-a1de3f37baa0' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0b7a25d8-19b8-4f56-8704-a1de3f37baa0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-187893e1-f8ff-4a49-abfb-280a806f741f' class='xr-var-data-in' type='checkbox'><label for='data-187893e1-f8ff-4a49-abfb-280a806f741f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Index of elevation bin</dd></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,
       18, 19, 20, 21, 22, 23, 24, 25, 26])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>category</span></div><div class='xr-var-dims'>(category)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.0 2.0 3.0 4.0 5.0</div><input id='attrs-9ab2e13a-0a47-46d0-9967-80641a7c9a77' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9ab2e13a-0a47-46d0-9967-80641a7c9a77' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6f563794-dc6e-40fc-84fb-1993be93b374' class='xr-var-data-in' type='checkbox'><label for='data-6f563794-dc6e-40fc-84fb-1993be93b374' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Glacier facies classification</dd><dt><span>data_source :</span></dt><dd>ENVEO</dd><dt><span>units :</span></dt><dd>none</dd><dt><span>code_description :</span></dt><dd>Extract dict with ast.literal_eval(ds.code).</dd><dt><span>code :</span></dt><dd>{0: &#x27;unclassified&#x27;, 1: &#x27;snow&#x27;, 2: &#x27;firn / old snow / bright ice&#x27;, 3: &#x27;clean ice&#x27;, 4: &#x27;debris&#x27;, 5: &#x27;cloud&#x27;, &#x27;nan&#x27;: &#x27;no data&#x27;}</dd></dl></div><div class='xr-var-data'><pre>array([1., 2., 3., 4., 5.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>uncertainty_flag</span></div><div class='xr-var-dims'>(uncertainty_flag)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.0 2.0 3.0 5.0 11.0 12.0 13.0</div><input id='attrs-ff7ffb15-1c97-4f3b-8066-3731093d5939' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ff7ffb15-1c97-4f3b-8066-3731093d5939' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-428c908e-a116-4549-b94a-363d6fd568b2' class='xr-var-data-in' type='checkbox'><label for='data-428c908e-a116-4549-b94a-363d6fd568b2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Glacier facies classification uncertainty</dd><dt><span>data_source :</span></dt><dd>ENVEO</dd><dt><span>units :</span></dt><dd>none</dd><dt><span>code_description :</span></dt><dd>Extract dict with ast.literal_eval(ds.code).</dd><dt><span>code :</span></dt><dd>{1: &#x27;low uncertainty for illuminated pixel&#x27;, 2: &#x27;medium uncertainty for illuminated pixel&#x27;, 3: &#x27;high uncertainty for illuminated pixel&#x27;, 5: &#x27;cloud&#x27;, 11: &#x27;low uncertainty for shaded pixel&#x27;, 12: &#x27;medium uncertainty for shaded pixel&#x27;, 13: &#x27;high uncertainty for shaded pixel&#x27;, &#x27;nan&#x27;: &#x27;no data&#x27;}</dd></dl></div><div class='xr-var-data'><pre>array([ 1.,  2.,  3.,  5., 11., 12., 13.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lower_elevation</span></div><div class='xr-var-dims'>(elevation_bin)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.501e+03 3.475e+03 ... 2.883e+03</div><input id='attrs-b405d749-ac9c-4a40-ae68-2891a27d366b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b405d749-ac9c-4a40-ae68-2891a27d366b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9ebc1c30-f8e1-4556-a905-aa420bd0b45c' class='xr-var-data-in' type='checkbox'><label for='data-9ebc1c30-f8e1-4556-a905-aa420bd0b45c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Lower boundary of elevation bin</dd></dl></div><div class='xr-var-data'><pre>array([3500.99729934, 3475.38321223, 3455.53270592, 3435.51346985,
       3406.3001613 , 3371.15116819, 3336.29807654, 3302.48828803,
       3271.23122264, 3241.22243016, 3212.62426943, 3185.72058298,
       3160.15784849, 3136.37567545, 3114.10171109, 3092.93901759,
       3072.91856645, 3054.01310389, 3036.48596897, 3019.75595458,
       3002.43547331, 2984.30220585, 2965.47695765, 2946.23275942,
       2926.4222284 , 2905.51917058, 2883.04061531])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>upper_elevation</span></div><div class='xr-var-dims'>(elevation_bin)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.564e+03 3.501e+03 ... 2.906e+03</div><input id='attrs-67d14acb-4fde-434d-b17f-dd330ab4bd3b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-67d14acb-4fde-434d-b17f-dd330ab4bd3b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-385643a5-49ad-4748-9551-c5a26ce91013' class='xr-var-data-in' type='checkbox'><label for='data-385643a5-49ad-4748-9551-c5a26ce91013' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Upper boundary of elevation bin</dd></dl></div><div class='xr-var-data'><pre>array([3563.78369141, 3500.99729934, 3475.38321223, 3455.53270592,
       3435.51346985, 3406.3001613 , 3371.15116819, 3336.29807654,
       3302.48828803, 3271.23122264, 3241.22243016, 3212.62426943,
       3185.72058298, 3160.15784849, 3136.37567545, 3114.10171109,
       3092.93901759, 3072.91856645, 3054.01310389, 3036.48596897,
       3019.75595458, 3002.43547331, 2984.30220585, 2965.47695765,
       2946.23275942, 2926.4222284 , 2905.51917058])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-065bc387-747e-4940-81a2-28f15dc01332' class='xr-section-summary-in' type='checkbox'  checked><label for='section-065bc387-747e-4940-81a2-28f15dc01332' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>category_counts</span></div><div class='xr-var-dims'>(t_sfc_type, elevation_bin, category)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>3 0 1 1 0 6 0 0 ... 0 3 4 0 0 0 2 0</div><input id='attrs-7ebcca3c-8185-4dab-ae06-443392092f72' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7ebcca3c-8185-4dab-ae06-443392092f72' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1c6ebe4e-897a-426d-a23c-fc9f22f01a1c' class='xr-var-data-in' type='checkbox'><label for='data-1c6ebe4e-897a-426d-a23c-fc9f22f01a1c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Count of glacier facies classification per elevation band</dd></dl></div><div class='xr-var-data'><pre>array([[[ 3,  0,  1,  1,  0],
        [ 6,  0,  0,  0,  0],
        [32,  0,  0,  0,  0],
        ...,
        [23,  0,  2,  1,  0],
        [ 7,  0,  0,  0,  0],
        [ 2,  0,  0,  0,  0]],

       [[ 3,  0,  0,  2,  0],
        [ 5,  0,  1,  0,  0],
        [32,  0,  0,  0,  0],
        ...,
        [ 0,  0, 15, 11,  0],
        [ 0,  0,  4,  3,  0],
        [ 0,  0,  0,  2,  0]],

       [[ 0,  0,  0,  0,  5],
        [ 0,  0,  0,  0,  6],
        [25,  2,  0,  0,  5],
        ...,
...
        ...,
        [ 0,  0, 14, 12,  0],
        [ 0,  0,  2,  5,  0],
        [ 0,  0,  0,  2,  0]],

       [[ 0,  0,  0,  0,  5],
        [ 0,  0,  0,  0,  6],
        [ 0,  0,  0,  0, 32],
        ...,
        [ 0,  0,  0,  0, 26],
        [ 0,  0,  0,  0,  7],
        [ 0,  0,  0,  0,  2]],

       [[ 2,  0,  2,  1,  0],
        [ 4,  0,  2,  0,  0],
        [30,  0,  2,  0,  0],
        ...,
        [ 4,  0,  6, 13,  3],
        [ 0,  0,  0,  3,  4],
        [ 0,  0,  0,  2,  0]]], shape=(82, 27, 5))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>uncertainty_counts</span></div><div class='xr-var-dims'>(t_sfc_type, elevation_bin, uncertainty_flag)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>3 1 0 0 1 0 0 5 ... 0 2 0 0 0 0 0 0</div><input id='attrs-84597e72-9528-4d8b-bb6b-66940d86fad1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-84597e72-9528-4d8b-bb6b-66940d86fad1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6597d6e1-da8a-45ea-a2dc-d4706a9f76c1' class='xr-var-data-in' type='checkbox'><label for='data-6597d6e1-da8a-45ea-a2dc-d4706a9f76c1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Count of glacier facies classification  uncertainty per elevation band</dd></dl></div><div class='xr-var-data'><pre>array([[[ 3,  1,  0, ...,  1,  0,  0],
        [ 5,  1,  0, ...,  0,  0,  0],
        [32,  0,  0, ...,  0,  0,  0],
        ...,
        [ 1, 23,  2, ...,  0,  0,  0],
        [ 1,  6,  0, ...,  0,  0,  0],
        [ 0,  2,  0, ...,  0,  0,  0]],

       [[ 4,  1,  0, ...,  0,  0,  0],
        [ 5,  1,  0, ...,  0,  0,  0],
        [32,  0,  0, ...,  0,  0,  0],
        ...,
        [24,  2,  0, ...,  0,  0,  0],
        [ 7,  0,  0, ...,  0,  0,  0],
        [ 2,  0,  0, ...,  0,  0,  0]],

       [[ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        [24,  1,  2, ...,  0,  0,  0],
        ...,
...
        ...,
        [16,  7,  3, ...,  0,  0,  0],
        [ 5,  1,  1, ...,  0,  0,  0],
        [ 2,  0,  0, ...,  0,  0,  0]],

       [[ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        ...,
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0]],

       [[ 3,  1,  1, ...,  0,  0,  0],
        [ 4,  0,  2, ...,  0,  0,  0],
        [25,  5,  2, ...,  0,  0,  0],
        ...,
        [13,  8,  2, ...,  0,  0,  0],
        [ 3,  0,  0, ...,  0,  0,  0],
        [ 2,  0,  0, ...,  0,  0,  0]]], shape=(82, 27, 7))</pre></div></li></ul></div></li></ul></div></div></div></div>
</div>
<p>Three elevation bins less because of the use of a smaller outline compared to RGI.</p>
</section>
<section id="exclude-dates-with-more-than-50-cloud-cover">
<h3>exclude dates with more than 50% cloud cover<a class="headerlink" href="#exclude-dates-with-more-than-50-cloud-cover" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">exclude_dates_with_to_much_cloud_cover</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">cloud_cover</span><span class="o">=</span><span class="mf">0.5</span><span class="p">):</span>
    <span class="n">relative_cloud_cover</span> <span class="o">=</span> <span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">category_counts</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s1">&#39;elevation_bin&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="o">/</span>
                            <span class="n">ds</span><span class="o">.</span><span class="n">category_counts</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;elevation_bin&#39;</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">]))</span>

    <span class="k">return</span> <span class="n">ds</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">t_sfc_type</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">relative_cloud_cover</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">exclude_dates_with_to_much_cloud_cover</span><span class="p">(</span><span class="n">ds_counts</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in notebooks */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
  line-height: 1.6;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-obj-name,
.xr-group-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-group-name::before {
  content: "üìÅ";
  padding-right: 0.3em;
}

.xr-group-name,
.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
  margin-block-start: 0;
  margin-block-end: 0;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
  margin: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
  border: 2px solid transparent !important;
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0) !important;
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "‚ñ∫";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "‚ñº";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-top: 4px;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-group-box {
  display: inline-grid;
  grid-template-columns: 0px 20px auto;
  width: 100%;
}

.xr-group-box-vline {
  grid-column-start: 1;
  border-right: 0.2em solid;
  border-color: var(--xr-border-color);
  width: 0px;
}

.xr-group-box-hline {
  grid-column-start: 2;
  grid-row-start: 1;
  height: 1em;
  width: 20px;
  border-bottom: 0.2em solid;
  border-color: var(--xr-border-color);
}

.xr-group-box-contents {
  grid-column-start: 3;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 231kB
Dimensions:             (t_sfc_type: 77, elevation_bin: 31, category: 5,
                         uncertainty_flag: 7)
Coordinates:
  * t_sfc_type          (t_sfc_type) datetime64[ns] 616B 2015-07-04 ... 2021-...
  * elevation_bin       (elevation_bin) int64 248B 0 1 2 3 4 ... 26 27 28 29 30
  * category            (category) float64 40B 1.0 2.0 3.0 4.0 5.0
  * uncertainty_flag    (uncertainty_flag) float64 56B 1.0 2.0 3.0 ... 12.0 13.0
    lower_elevation     (elevation_bin) float64 248B 3.501e+03 ... 2.79e+03
    upper_elevation     (elevation_bin) float64 248B 3.564e+03 ... 2.826e+03
Data variables:
    category_counts     (t_sfc_type, elevation_bin, category) int64 95kB 3 ... 0
    uncertainty_counts  (t_sfc_type, elevation_bin, uncertainty_flag) int64 134kB ...</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-09e88efa-5161-4b89-a02f-a99455191a00' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-09e88efa-5161-4b89-a02f-a99455191a00' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>t_sfc_type</span>: 77</li><li><span class='xr-has-index'>elevation_bin</span>: 31</li><li><span class='xr-has-index'>category</span>: 5</li><li><span class='xr-has-index'>uncertainty_flag</span>: 7</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-5438e20d-cb6e-4352-8609-b5c48504394e' class='xr-section-summary-in' type='checkbox'  checked><label for='section-5438e20d-cb6e-4352-8609-b5c48504394e' class='xr-section-summary' >Coordinates: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>t_sfc_type</span></div><div class='xr-var-dims'>(t_sfc_type)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2015-07-04 ... 2021-09-25</div><input id='attrs-69042696-f6c4-4c40-9698-e4450834f040' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-69042696-f6c4-4c40-9698-e4450834f040' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9445ca9b-c4b3-491c-9ce0-3fba1948aabe' class='xr-var-data-in' type='checkbox'><label for='data-9445ca9b-c4b3-491c-9ce0-3fba1948aabe' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Timestamp of surface type observations</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2015-07-04T00:00:00.000000000&#x27;, &#x27;2015-08-03T00:00:00.000000000&#x27;,
       &#x27;2015-08-13T00:00:00.000000000&#x27;, &#x27;2015-08-26T00:00:00.000000000&#x27;,
       &#x27;2015-10-22T00:00:00.000000000&#x27;, &#x27;2016-05-22T00:00:00.000000000&#x27;,
       &#x27;2016-06-28T00:00:00.000000000&#x27;, &#x27;2016-07-18T00:00:00.000000000&#x27;,
       &#x27;2016-08-07T00:00:00.000000000&#x27;, &#x27;2016-08-27T00:00:00.000000000&#x27;,
       &#x27;2016-09-09T00:00:00.000000000&#x27;, &#x27;2016-09-26T00:00:00.000000000&#x27;,
       &#x27;2016-10-16T00:00:00.000000000&#x27;, &#x27;2016-10-29T00:00:00.000000000&#x27;,
       &#x27;2017-05-17T00:00:00.000000000&#x27;, &#x27;2017-05-27T00:00:00.000000000&#x27;,
       &#x27;2017-06-13T00:00:00.000000000&#x27;, &#x27;2017-06-26T00:00:00.000000000&#x27;,
       &#x27;2017-07-06T00:00:00.000000000&#x27;, &#x27;2017-07-16T00:00:00.000000000&#x27;,
       &#x27;2017-08-05T00:00:00.000000000&#x27;, &#x27;2017-08-07T00:00:00.000000000&#x27;,
       &#x27;2017-08-22T00:00:00.000000000&#x27;, &#x27;2017-08-25T00:00:00.000000000&#x27;,
       &#x27;2017-08-30T00:00:00.000000000&#x27;, &#x27;2017-09-21T00:00:00.000000000&#x27;,
       &#x27;2018-06-16T00:00:00.000000000&#x27;, &#x27;2018-06-23T00:00:00.000000000&#x27;,
       &#x27;2018-07-13T00:00:00.000000000&#x27;, &#x27;2018-07-18T00:00:00.000000000&#x27;,
       &#x27;2018-07-31T00:00:00.000000000&#x27;, &#x27;2018-08-17T00:00:00.000000000&#x27;,
       &#x27;2018-08-20T00:00:00.000000000&#x27;, &#x27;2018-08-27T00:00:00.000000000&#x27;,
       &#x27;2018-09-19T00:00:00.000000000&#x27;, &#x27;2018-09-21T00:00:00.000000000&#x27;,
       &#x27;2018-09-26T00:00:00.000000000&#x27;, &#x27;2019-05-02T00:00:00.000000000&#x27;,
       &#x27;2019-05-24T00:00:00.000000000&#x27;, &#x27;2019-06-01T00:00:00.000000000&#x27;,
       &#x27;2019-06-03T00:00:00.000000000&#x27;, &#x27;2019-06-13T00:00:00.000000000&#x27;,
       &#x27;2019-06-18T00:00:00.000000000&#x27;, &#x27;2019-06-28T00:00:00.000000000&#x27;,
       &#x27;2019-07-16T00:00:00.000000000&#x27;, &#x27;2019-07-23T00:00:00.000000000&#x27;,
       &#x27;2019-08-27T00:00:00.000000000&#x27;, &#x27;2019-08-30T00:00:00.000000000&#x27;,
       &#x27;2019-09-04T00:00:00.000000000&#x27;, &#x27;2019-09-16T00:00:00.000000000&#x27;,
       &#x27;2019-09-21T00:00:00.000000000&#x27;, &#x27;2019-09-29T00:00:00.000000000&#x27;,
       &#x27;2020-05-21T00:00:00.000000000&#x27;, &#x27;2020-06-02T00:00:00.000000000&#x27;,
       &#x27;2020-06-12T00:00:00.000000000&#x27;, &#x27;2020-06-27T00:00:00.000000000&#x27;,
       &#x27;2020-07-07T00:00:00.000000000&#x27;, &#x27;2020-07-12T00:00:00.000000000&#x27;,
       &#x27;2020-07-27T00:00:00.000000000&#x27;, &#x27;2020-08-01T00:00:00.000000000&#x27;,
       &#x27;2020-08-06T00:00:00.000000000&#x27;, &#x27;2020-08-09T00:00:00.000000000&#x27;,
       &#x27;2020-08-11T00:00:00.000000000&#x27;, &#x27;2020-08-19T00:00:00.000000000&#x27;,
       &#x27;2020-08-21T00:00:00.000000000&#x27;, &#x27;2020-09-03T00:00:00.000000000&#x27;,
       &#x27;2020-09-05T00:00:00.000000000&#x27;, &#x27;2020-09-08T00:00:00.000000000&#x27;,
       &#x27;2020-09-13T00:00:00.000000000&#x27;, &#x27;2020-09-15T00:00:00.000000000&#x27;,
       &#x27;2021-08-14T00:00:00.000000000&#x27;, &#x27;2021-08-21T00:00:00.000000000&#x27;,
       &#x27;2021-09-05T00:00:00.000000000&#x27;, &#x27;2021-09-10T00:00:00.000000000&#x27;,
       &#x27;2021-09-13T00:00:00.000000000&#x27;, &#x27;2021-09-18T00:00:00.000000000&#x27;,
       &#x27;2021-09-25T00:00:00.000000000&#x27;], dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>elevation_bin</span></div><div class='xr-var-dims'>(elevation_bin)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4 5 6 ... 25 26 27 28 29 30</div><input id='attrs-18107b81-d670-4b9c-a620-d7bcf9f5e408' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-18107b81-d670-4b9c-a620-d7bcf9f5e408' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-edde5f14-737e-4d03-a687-8859c975b620' class='xr-var-data-in' type='checkbox'><label for='data-edde5f14-737e-4d03-a687-8859c975b620' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Index of elevation bin</dd></dl></div><div class='xr-var-data'><pre>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17,
       18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>category</span></div><div class='xr-var-dims'>(category)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.0 2.0 3.0 4.0 5.0</div><input id='attrs-736c467c-c6f6-4e4f-8c20-f5a622c9e4e8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-736c467c-c6f6-4e4f-8c20-f5a622c9e4e8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-20a7e132-8b6f-4100-945d-065566e8276c' class='xr-var-data-in' type='checkbox'><label for='data-20a7e132-8b6f-4100-945d-065566e8276c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Glacier facies classification</dd><dt><span>data_source :</span></dt><dd>ENVEO</dd><dt><span>units :</span></dt><dd>none</dd><dt><span>code_description :</span></dt><dd>Extract dict with ast.literal_eval(ds.code).</dd><dt><span>code :</span></dt><dd>{0: &#x27;unclassified&#x27;, 1: &#x27;snow&#x27;, 2: &#x27;firn / old snow / bright ice&#x27;, 3: &#x27;clean ice&#x27;, 4: &#x27;debris&#x27;, 5: &#x27;cloud&#x27;, &#x27;nan&#x27;: &#x27;no data&#x27;}</dd></dl></div><div class='xr-var-data'><pre>array([1., 2., 3., 4., 5.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>uncertainty_flag</span></div><div class='xr-var-dims'>(uncertainty_flag)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.0 2.0 3.0 5.0 11.0 12.0 13.0</div><input id='attrs-e6ab4e2c-8807-4cf3-b42d-be0c3f6477dc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e6ab4e2c-8807-4cf3-b42d-be0c3f6477dc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-577e5dec-805f-4c08-9ae1-7e4bea407f16' class='xr-var-data-in' type='checkbox'><label for='data-577e5dec-805f-4c08-9ae1-7e4bea407f16' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Glacier facies classification uncertainty</dd><dt><span>data_source :</span></dt><dd>ENVEO</dd><dt><span>units :</span></dt><dd>none</dd><dt><span>code_description :</span></dt><dd>Extract dict with ast.literal_eval(ds.code).</dd><dt><span>code :</span></dt><dd>{1: &#x27;low uncertainty for illuminated pixel&#x27;, 2: &#x27;medium uncertainty for illuminated pixel&#x27;, 3: &#x27;high uncertainty for illuminated pixel&#x27;, 5: &#x27;cloud&#x27;, 11: &#x27;low uncertainty for shaded pixel&#x27;, 12: &#x27;medium uncertainty for shaded pixel&#x27;, 13: &#x27;high uncertainty for shaded pixel&#x27;, &#x27;nan&#x27;: &#x27;no data&#x27;}</dd></dl></div><div class='xr-var-data'><pre>array([ 1.,  2.,  3.,  5., 11., 12., 13.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>lower_elevation</span></div><div class='xr-var-dims'>(elevation_bin)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.501e+03 3.475e+03 ... 2.79e+03</div><input id='attrs-207bef36-4989-4eff-b0ce-2b7bbf5704f8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-207bef36-4989-4eff-b0ce-2b7bbf5704f8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-89234f3c-7a92-47d7-95ca-d7b507b58290' class='xr-var-data-in' type='checkbox'><label for='data-89234f3c-7a92-47d7-95ca-d7b507b58290' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Lower boundary of elevation bin</dd></dl></div><div class='xr-var-data'><pre>array([3500.99729934, 3475.38321223, 3455.53270592, 3435.51346985,
       3406.3001613 , 3371.15116819, 3336.29807654, 3302.48828803,
       3271.23122264, 3241.22243016, 3212.62426943, 3185.72058298,
       3160.15784849, 3136.37567545, 3114.10171109, 3092.93901759,
       3072.91856645, 3054.01310389, 3036.48596897, 3019.75595458,
       3002.43547331, 2984.30220585, 2965.47695765, 2946.23275942,
       2926.4222284 , 2905.51917058, 2883.04061531, 2860.97359102,
       2841.78025411, 2826.35303129, 2789.87695312])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>upper_elevation</span></div><div class='xr-var-dims'>(elevation_bin)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.564e+03 3.501e+03 ... 2.826e+03</div><input id='attrs-1b3787f7-29eb-4997-8a3a-4124c8c0e55f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1b3787f7-29eb-4997-8a3a-4124c8c0e55f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-09dbf2e0-69bd-4c44-8667-d02c8405cc61' class='xr-var-data-in' type='checkbox'><label for='data-09dbf2e0-69bd-4c44-8667-d02c8405cc61' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Upper boundary of elevation bin</dd></dl></div><div class='xr-var-data'><pre>array([3563.78369141, 3500.99729934, 3475.38321223, 3455.53270592,
       3435.51346985, 3406.3001613 , 3371.15116819, 3336.29807654,
       3302.48828803, 3271.23122264, 3241.22243016, 3212.62426943,
       3185.72058298, 3160.15784849, 3136.37567545, 3114.10171109,
       3092.93901759, 3072.91856645, 3054.01310389, 3036.48596897,
       3019.75595458, 3002.43547331, 2984.30220585, 2965.47695765,
       2946.23275942, 2926.4222284 , 2905.51917058, 2883.04061531,
       2860.97359102, 2841.78025411, 2826.35303129])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-df51410d-615b-4836-9804-dd817546786c' class='xr-section-summary-in' type='checkbox'  checked><label for='section-df51410d-615b-4836-9804-dd817546786c' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>category_counts</span></div><div class='xr-var-dims'>(t_sfc_type, elevation_bin, category)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>3 0 1 1 0 6 0 0 ... 0 0 0 0 0 0 0 0</div><input id='attrs-a2e20480-5bbd-49c8-aadd-170a30a5844f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a2e20480-5bbd-49c8-aadd-170a30a5844f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b750f956-5492-42f6-bcc7-8b093319391f' class='xr-var-data-in' type='checkbox'><label for='data-b750f956-5492-42f6-bcc7-8b093319391f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Count of glacier facies classification per elevation band</dd></dl></div><div class='xr-var-data'><pre>array([[[ 3,  0,  1,  1,  0],
        [ 6,  0,  0,  0,  0],
        [32,  0,  0,  0,  0],
        ...,
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0]],

       [[ 3,  0,  0,  2,  0],
        [ 5,  0,  1,  0,  0],
        [32,  0,  0,  0,  0],
        ...,
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0]],

       [[ 0,  0,  0,  0,  5],
        [ 0,  0,  0,  0,  6],
        [25,  2,  0,  0,  5],
        ...,
...
        ...,
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0]],

       [[ 3,  0,  1,  1,  0],
        [ 4,  0,  1,  1,  0],
        [31,  1,  0,  0,  0],
        ...,
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0]],

       [[ 2,  0,  2,  1,  0],
        [ 4,  0,  2,  0,  0],
        [30,  0,  2,  0,  0],
        ...,
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0],
        [ 0,  0,  0,  0,  0]]], shape=(77, 31, 5))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>uncertainty_counts</span></div><div class='xr-var-dims'>(t_sfc_type, elevation_bin, uncertainty_flag)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>3 1 0 0 1 0 0 5 ... 0 0 0 0 0 0 0 0</div><input id='attrs-78c1daa4-1422-4aa6-9155-a943f16ea72d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-78c1daa4-1422-4aa6-9155-a943f16ea72d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f477c99c-e319-4690-ba72-37d3be5c3a4a' class='xr-var-data-in' type='checkbox'><label for='data-f477c99c-e319-4690-ba72-37d3be5c3a4a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Count of glacier facies classification  uncertainty per elevation band</dd></dl></div><div class='xr-var-data'><pre>array([[[ 3,  1,  0, ...,  1,  0,  0],
        [ 5,  1,  0, ...,  0,  0,  0],
        [32,  0,  0, ...,  0,  0,  0],
        ...,
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0]],

       [[ 4,  1,  0, ...,  0,  0,  0],
        [ 5,  1,  0, ...,  0,  0,  0],
        [32,  0,  0, ...,  0,  0,  0],
        ...,
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0]],

       [[ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        [24,  1,  2, ...,  0,  0,  0],
        ...,
...
        ...,
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0]],

       [[ 3,  1,  1, ...,  0,  0,  0],
        [ 5,  1,  0, ...,  0,  0,  0],
        [12, 19,  1, ...,  0,  0,  0],
        ...,
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0]],

       [[ 3,  1,  1, ...,  0,  0,  0],
        [ 4,  0,  2, ...,  0,  0,  0],
        [25,  5,  2, ...,  0,  0,  0],
        ...,
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0],
        [ 0,  0,  0, ...,  0,  0,  0]]], shape=(77, 31, 7))</pre></div></li></ul></div></li></ul></div></div></div></div>
</div>
<p>Five dates with more than 50% cloud cover.</p>
</section>
<section id="define-snowline">
<h3>define snowline<a class="headerlink" href="#define-snowline" title="Link to this heading">#</a></h3>
<p>what it should do:</p>
<ul class="simple">
<li><p>exclude elevation bins which are completly cloude covered</p></li>
<li><p>exclude the cloud cover per elevation bin when calculating relative snow fraction (we assume all surface types are equally covored by clouds)</p></li>
<li><p>flag if complete snow covered (snowline=-np.inf) or complete snow free (snowline=np.inf)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_snowline</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">thresholds</span><span class="o">=</span><span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">]):</span>
    <span class="c1"># the provided ds should already be cleaned for scenes </span>
    <span class="n">da_counts</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">category_counts</span>
    
    <span class="n">all_grid_points_elev_bin</span> <span class="o">=</span> <span class="n">da_counts</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
    <span class="n">cloud_grid_points</span> <span class="o">=</span> <span class="n">da_counts</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    
    <span class="c1"># exclude completely cloud covered elevation bins</span>
    <span class="n">da_cloudfree</span> <span class="o">=</span> <span class="n">da_counts</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">elevation_bin</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">all_grid_points_elev_bin</span> <span class="o">!=</span> <span class="n">cloud_grid_points</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    
    <span class="c1"># calculate relative contributions, excluding cloud grid points</span>
    <span class="c1"># we assume all surface types are equally covored by clouds</span>
    <span class="n">da_rel_snow</span> <span class="o">=</span> <span class="n">da_cloudfree</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">da_cloudfree</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
    
    <span class="c1"># use different thresholds of the snow fraction for integrating uncertainty</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_lowest_elev_bin_exceeding_threshold</span><span class="p">(</span><span class="n">threshold</span><span class="p">):</span>
        <span class="n">exceeding_threshold</span> <span class="o">=</span> <span class="n">da_rel_snow</span> <span class="o">&gt;</span> <span class="n">threshold</span>

        <span class="c1"># check if lowest bin is snow covered</span>
        <span class="k">if</span> <span class="n">exceeding_threshold</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">elevation_bin</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">da_counts</span><span class="o">.</span><span class="n">elevation_bin</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span>
        <span class="c1"># check if no bin exceeds threshold</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">exceeding_threshold</span><span class="p">):</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lowest_bin</span> <span class="o">=</span> <span class="n">da_rel_snow</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">elevation_bin</span><span class="o">=</span><span class="n">exceeding_threshold</span><span class="p">)</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">elevation_bin</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">lowest_bin</span><span class="o">.</span><span class="n">elevation_bin</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">item</span><span class="p">(),</span> <span class="n">lowest_bin</span><span class="o">.</span><span class="n">lower_elevation</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
    
    <span class="n">lowest_elev_bin_idx</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">lowest_elev_bin_values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">threshold</span> <span class="ow">in</span> <span class="n">thresholds</span><span class="p">:</span>
        <span class="n">tmp_idx</span><span class="p">,</span> <span class="n">tmp_value</span> <span class="o">=</span> <span class="n">get_lowest_elev_bin_exceeding_threshold</span><span class="p">(</span><span class="n">threshold</span><span class="p">)</span>
        <span class="n">lowest_elev_bin_idx</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmp_idx</span><span class="p">)</span>
        <span class="n">lowest_elev_bin_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmp_value</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">lowest_elev_bin_idx</span><span class="p">,</span> <span class="n">lowest_elev_bin_values</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="look-at-result-of-derived-snowline-from-observation-per-timestamp">
<h3>look at result of derived snowline from observation per timestamp<a class="headerlink" href="#look-at-result-of-derived-snowline-from-observation-per-timestamp" title="Link to this heading">#</a></h3>
<p>These plots are intended for development purposes. They display the following:</p>
<ul class="simple">
<li><p>The absolute pixel count per elevation bin (first plot).</p></li>
<li><p>The relative count, including clouds (second plot).</p></li>
<li><p>The uncertainty count (third plot).</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_obs</span> <span class="o">=</span> <span class="n">get_categories_per_elevation_band</span><span class="p">(</span><span class="n">gdir</span><span class="p">)</span>
<span class="n">ds_obs</span> <span class="o">=</span> <span class="n">exclude_empty_elevation_bins</span><span class="p">(</span><span class="n">ds_obs</span><span class="p">)</span>
<span class="n">ds_obs</span> <span class="o">=</span> <span class="n">exclude_dates_with_to_much_cloud_cover</span><span class="p">(</span><span class="n">ds_obs</span><span class="p">,</span> <span class="n">cloud_cover</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="k">for</span> <span class="n">date</span> <span class="ow">in</span> <span class="n">ds_obs</span><span class="o">.</span><span class="n">t_sfc_type</span><span class="p">:</span>
    <span class="n">ds_use</span> <span class="o">=</span> <span class="n">ds_obs</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">t_sfc_type</span><span class="o">=</span><span class="n">date</span><span class="p">)</span>

    <span class="n">bin_idx</span><span class="p">,</span> <span class="n">bin_elev</span> <span class="o">=</span> <span class="n">get_snowline</span><span class="p">(</span><span class="n">ds_use</span><span class="p">)</span>
    
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">gridspec_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;wspace&#39;</span><span class="p">:</span><span class="mf">0.1</span><span class="p">})</span>
    
    <span class="n">ax_total</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">ax_relative</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">ax_uncertainty</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">plot_horizontal_stacked_bar</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">ds</span><span class="p">,</span> <span class="n">categories</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">category_dict</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="n">categories</span><span class="p">]</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;code&#39;</span><span class="p">])</span>
        <span class="n">previous_values</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">ds_use</span><span class="p">[</span><span class="n">categories</span><span class="p">]:</span>
            <span class="n">current_values</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">loc</span><span class="p">[{</span><span class="n">categories</span><span class="p">:</span> <span class="n">category</span><span class="p">}][</span><span class="n">var</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
            <span class="k">if</span> <span class="n">normalize</span><span class="p">:</span>
                <span class="n">number_grid_points_elev_bin</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">category_counts</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
                <span class="n">current_values</span> <span class="o">=</span> <span class="n">current_values</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="o">/</span> <span class="n">number_grid_points_elev_bin</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">elevation_bin</span><span class="p">,</span> <span class="n">current_values</span><span class="p">,</span>
                     <span class="n">left</span><span class="o">=</span><span class="n">previous_values</span><span class="p">,</span>
                     <span class="n">label</span><span class="o">=</span><span class="n">category_dict</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">category</span><span class="p">)])</span>
        
            <span class="k">if</span> <span class="n">previous_values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">previous_values</span> <span class="o">=</span> <span class="n">current_values</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">previous_values</span> <span class="o">=</span> <span class="n">previous_values</span> <span class="o">+</span> <span class="n">current_values</span>
    
        <span class="n">ax</span><span class="o">.</span><span class="n">invert_yaxis</span><span class="p">()</span>
    
    <span class="n">plot_horizontal_stacked_bar</span><span class="p">(</span><span class="n">ax_total</span><span class="p">,</span> <span class="n">ds_use</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="s1">&#39;category_counts&#39;</span><span class="p">)</span>
    <span class="n">plot_horizontal_stacked_bar</span><span class="p">(</span><span class="n">ax_relative</span><span class="p">,</span> <span class="n">ds_use</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="s1">&#39;category_counts&#39;</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">plot_horizontal_stacked_bar</span><span class="p">(</span><span class="n">ax_uncertainty</span><span class="p">,</span> <span class="n">ds_use</span><span class="p">,</span> <span class="s1">&#39;uncertainty_flag&#39;</span><span class="p">,</span> <span class="s1">&#39;uncertainty_counts&#39;</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_snowline</span><span class="p">(</span><span class="n">ax</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isneginf</span><span class="p">(</span><span class="n">bin_elev</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="n">extra_label</span> <span class="o">=</span> <span class="s1">&#39;fully snow covered&#39;</span>
        <span class="k">elif</span> <span class="n">np</span><span class="o">.</span><span class="n">isposinf</span><span class="p">(</span><span class="n">bin_elev</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="n">extra_label</span> <span class="o">=</span> <span class="s1">&#39;fully snow free&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">extra_label</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">bin_elev</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s1">.0f</span><span class="si">}</span><span class="s1"> m&#39;</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">bin_idx</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">bin_idx</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;snowline (</span><span class="si">{</span><span class="n">extra_label</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">bin_idx</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;snowline uncertainty&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_legend</span><span class="p">(</span><span class="n">ax</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper center&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">))</span>
    
    <span class="n">ax_total</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">ds_use</span><span class="o">.</span><span class="n">elevation_bin</span><span class="p">,</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">elev</span><span class="p">)</span> <span class="k">for</span> <span class="n">elev</span> <span class="ow">in</span> <span class="n">ds_use</span><span class="o">.</span><span class="n">lower_elevation</span><span class="o">.</span><span class="n">values</span><span class="p">])</span>
    <span class="n">ax_total</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Altitude [m]&#39;</span><span class="p">)</span>
    <span class="n">ax_total</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;category count&#39;</span><span class="p">)</span>
    <span class="n">add_snowline</span><span class="p">(</span><span class="n">ax_total</span><span class="p">)</span>
    <span class="n">set_legend</span><span class="p">(</span><span class="n">ax_total</span><span class="p">)</span>
    
    <span class="n">ax_relative</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;category count relative&#39;</span><span class="p">)</span>
    <span class="n">ax_relative</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([])</span>
    <span class="n">add_snowline</span><span class="p">(</span><span class="n">ax_relative</span><span class="p">)</span>
    <span class="n">set_legend</span><span class="p">(</span><span class="n">ax_relative</span><span class="p">)</span>
    
    <span class="n">ax_uncertainty</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;uncertainty count relative&#39;</span><span class="p">)</span>
    <span class="n">ax_uncertainty</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([])</span>
    <span class="n">add_snowline</span><span class="p">(</span><span class="n">ax_uncertainty</span><span class="p">)</span>
    <span class="n">set_legend</span><span class="p">(</span><span class="n">ax_uncertainty</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">date</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
    
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/f32aa88da99b1dd813a7b78cb8d65ecc784af6d2f623b2a19f82c3b01f16cb7d.png" src="../_images/f32aa88da99b1dd813a7b78cb8d65ecc784af6d2f623b2a19f82c3b01f16cb7d.png" />
<img alt="../_images/f60c1eae88f07a26a1b616a7552f2b087576fe831c5c21852ebfd94882954e0e.png" src="../_images/f60c1eae88f07a26a1b616a7552f2b087576fe831c5c21852ebfd94882954e0e.png" />
<img alt="../_images/e22baadff8d7924ca476e4b1f09a4f5d5ae8bdd970aa3d09abd8fbda28fddc20.png" src="../_images/e22baadff8d7924ca476e4b1f09a4f5d5ae8bdd970aa3d09abd8fbda28fddc20.png" />
<img alt="../_images/d4fc1e80e3a081daf7067f256fdc8037466f4f585dce2bc547c0077eaca0c362.png" src="../_images/d4fc1e80e3a081daf7067f256fdc8037466f4f585dce2bc547c0077eaca0c362.png" />
<img alt="../_images/851520a1ebb47a17f999ad43fd747d095795485617b914375b895278b232e879.png" src="../_images/851520a1ebb47a17f999ad43fd747d095795485617b914375b895278b232e879.png" />
<img alt="../_images/8951de0e7bb7f78bf178f3e71c50b7e99ae3048c8702e8d0b39f5430e1613106.png" src="../_images/8951de0e7bb7f78bf178f3e71c50b7e99ae3048c8702e8d0b39f5430e1613106.png" />
<img alt="../_images/0a2c84cdceab8182ea9b3b02acf32bcb1dde933d4149526548db019692baae0d.png" src="../_images/0a2c84cdceab8182ea9b3b02acf32bcb1dde933d4149526548db019692baae0d.png" />
<img alt="../_images/9e419c552693afb7d4cd7fb446af196c0b567234a8620400864ef613218d5a3f.png" src="../_images/9e419c552693afb7d4cd7fb446af196c0b567234a8620400864ef613218d5a3f.png" />
<img alt="../_images/0c08073e4ea206ed8057ff3cc34891ce57c4272de2cb76aa41d670040e523c07.png" src="../_images/0c08073e4ea206ed8057ff3cc34891ce57c4272de2cb76aa41d670040e523c07.png" />
<img alt="../_images/63ae305b48ba23d958dca97b172adc64a0aebcb8efa4c90fc8f0d16790f48d10.png" src="../_images/63ae305b48ba23d958dca97b172adc64a0aebcb8efa4c90fc8f0d16790f48d10.png" />
<img alt="../_images/3669fb3c94db8cf416b01909050addf1966ad8bc2ad6d7850e2727ce396b7e03.png" src="../_images/3669fb3c94db8cf416b01909050addf1966ad8bc2ad6d7850e2727ce396b7e03.png" />
<img alt="../_images/cf9ed8b339a3b2bc394e65c3c6dad407b08b36266240f82e431a0dfc1e2aed93.png" src="../_images/cf9ed8b339a3b2bc394e65c3c6dad407b08b36266240f82e431a0dfc1e2aed93.png" />
<img alt="../_images/249fb209e958a782e968faf9ef14f06eb0ad84efba5367aabcb405d2d7ec4e81.png" src="../_images/249fb209e958a782e968faf9ef14f06eb0ad84efba5367aabcb405d2d7ec4e81.png" />
<img alt="../_images/9ce67c06f947c95cc0ad4f32881ea0bac08c0ed163ee7034e5ca7023cde89f60.png" src="../_images/9ce67c06f947c95cc0ad4f32881ea0bac08c0ed163ee7034e5ca7023cde89f60.png" />
<img alt="../_images/66a5202805317c2036842cb39cd3fec7e6e2ff6e9589d9e8775c7d71b9b22cd3.png" src="../_images/66a5202805317c2036842cb39cd3fec7e6e2ff6e9589d9e8775c7d71b9b22cd3.png" />
<img alt="../_images/990a3f99707182b590b3a92a9e3c4e31b1f22b595a37ea9504b00101931da5b6.png" src="../_images/990a3f99707182b590b3a92a9e3c4e31b1f22b595a37ea9504b00101931da5b6.png" />
<img alt="../_images/8a88d1b727f948d30cdea7d7afd1021e8ef248aac39850dbc052375c9213c727.png" src="../_images/8a88d1b727f948d30cdea7d7afd1021e8ef248aac39850dbc052375c9213c727.png" />
<img alt="../_images/98d2b6d2055e2a83b789127d12fcb865fcc4b1a28c2709531f47dda0f6653438.png" src="../_images/98d2b6d2055e2a83b789127d12fcb865fcc4b1a28c2709531f47dda0f6653438.png" />
<img alt="../_images/a124de6fe99b5901360a37bd4e181875fa74f1123d52c11b11501868182f4036.png" src="../_images/a124de6fe99b5901360a37bd4e181875fa74f1123d52c11b11501868182f4036.png" />
<img alt="../_images/9e5e84b884d358d2cf20645f72e256a3795ef3d2a4f4d25be551c03f8cbda66f.png" src="../_images/9e5e84b884d358d2cf20645f72e256a3795ef3d2a4f4d25be551c03f8cbda66f.png" />
<img alt="../_images/27c8ebced836690c0d5ae6a7f038ca60045251ea7d59044653a2210efba88793.png" src="../_images/27c8ebced836690c0d5ae6a7f038ca60045251ea7d59044653a2210efba88793.png" />
<img alt="../_images/f795318ae79598072dcf0f87b51e98b83d31bb5950e7cf918db695ff9a9123c2.png" src="../_images/f795318ae79598072dcf0f87b51e98b83d31bb5950e7cf918db695ff9a9123c2.png" />
<img alt="../_images/2b1d922787d77eb35c94da9adf181783b1025911b8830182f7cfbad81ef93927.png" src="../_images/2b1d922787d77eb35c94da9adf181783b1025911b8830182f7cfbad81ef93927.png" />
<img alt="../_images/987c9a2c68dc2a64a86988a6bac912626d7342deefb296d11db2c40f4bd42862.png" src="../_images/987c9a2c68dc2a64a86988a6bac912626d7342deefb296d11db2c40f4bd42862.png" />
<img alt="../_images/00d9d36c0c84b31a6d098341e21bb9723830b90d9c28d2f3ca4ee509c90e157e.png" src="../_images/00d9d36c0c84b31a6d098341e21bb9723830b90d9c28d2f3ca4ee509c90e157e.png" />
<img alt="../_images/261452ff19a471e9bbfb309e11b6f6f51bb8f4a42717a5d6ad0cedf084fe2221.png" src="../_images/261452ff19a471e9bbfb309e11b6f6f51bb8f4a42717a5d6ad0cedf084fe2221.png" />
<img alt="../_images/5410f77592eefe0be70b203a67b54d984c67631f0d8b928ed91f2e92903ff1f7.png" src="../_images/5410f77592eefe0be70b203a67b54d984c67631f0d8b928ed91f2e92903ff1f7.png" />
<img alt="../_images/7585053d059183368a75f465e6c691dcb5cb48a2410be40f18d0164de927986a.png" src="../_images/7585053d059183368a75f465e6c691dcb5cb48a2410be40f18d0164de927986a.png" />
<img alt="../_images/4fc6f4c70e3ac24b4aea283332779d38a04289dc7e85b72d446bf4dda8523e5f.png" src="../_images/4fc6f4c70e3ac24b4aea283332779d38a04289dc7e85b72d446bf4dda8523e5f.png" />
<img alt="../_images/4b54944328c8e656d026f445e1b4b89dbf349611cae761be8e8746e081ee70da.png" src="../_images/4b54944328c8e656d026f445e1b4b89dbf349611cae761be8e8746e081ee70da.png" />
<img alt="../_images/009ab304d6323a903c3ff5aa360351ad428cc4957913917063a441d7d1689d11.png" src="../_images/009ab304d6323a903c3ff5aa360351ad428cc4957913917063a441d7d1689d11.png" />
<img alt="../_images/b2710badce01c8b215860f00b117fa7bb48df046449a617c21056072a6dbf323.png" src="../_images/b2710badce01c8b215860f00b117fa7bb48df046449a617c21056072a6dbf323.png" />
<img alt="../_images/13368daf45c43408f28752e2266381bedd94831343782b23277f0ad13bbfbf86.png" src="../_images/13368daf45c43408f28752e2266381bedd94831343782b23277f0ad13bbfbf86.png" />
<img alt="../_images/de225ff8bb9bf0e45d3f4dce0edb370d4e753ed643a46569a7cf7d62dd2fd880.png" src="../_images/de225ff8bb9bf0e45d3f4dce0edb370d4e753ed643a46569a7cf7d62dd2fd880.png" />
<img alt="../_images/242a7b1750e4acbb3557b17370db903c08a4cf8da2bd78b1db79ff67869024f0.png" src="../_images/242a7b1750e4acbb3557b17370db903c08a4cf8da2bd78b1db79ff67869024f0.png" />
<img alt="../_images/c98432667f52ebfaddf70b855b3e0dac477ef9f067746211da62a71d07771213.png" src="../_images/c98432667f52ebfaddf70b855b3e0dac477ef9f067746211da62a71d07771213.png" />
<img alt="../_images/93f569416faf2d41df6abf899970f43fad0c6214bea673da6f1ba65d7fd3a9cf.png" src="../_images/93f569416faf2d41df6abf899970f43fad0c6214bea673da6f1ba65d7fd3a9cf.png" />
<img alt="../_images/d809d5d55e47856dea198b42ab3bc89278885dd08b7f98fb8602fb78300ff2b1.png" src="../_images/d809d5d55e47856dea198b42ab3bc89278885dd08b7f98fb8602fb78300ff2b1.png" />
<img alt="../_images/8e472d9aa91d484395301df1eb7b048e8a1861f2274424be7239e2c23dfb32b4.png" src="../_images/8e472d9aa91d484395301df1eb7b048e8a1861f2274424be7239e2c23dfb32b4.png" />
<img alt="../_images/737fa57be68963dad132e9358cd2015ac6da981448facaa54275edcb458f6f55.png" src="../_images/737fa57be68963dad132e9358cd2015ac6da981448facaa54275edcb458f6f55.png" />
<img alt="../_images/8b0b275c9113db5b80f419e09853b43f45cba1a1205cc18bcaa6dd958b944d27.png" src="../_images/8b0b275c9113db5b80f419e09853b43f45cba1a1205cc18bcaa6dd958b944d27.png" />
<img alt="../_images/9f4943f43a65afc50484de2fa411bde791d053ca16decf231e3bcf5c815daac3.png" src="../_images/9f4943f43a65afc50484de2fa411bde791d053ca16decf231e3bcf5c815daac3.png" />
<img alt="../_images/c0aa08b5cbccba371e789602df42fae376ee6ae423cc4b6a09f904fffac47cb5.png" src="../_images/c0aa08b5cbccba371e789602df42fae376ee6ae423cc4b6a09f904fffac47cb5.png" />
<img alt="../_images/11232f23b30f53648dec07cf0157093808ab6d6fbfc24ebb442c2f436d2cbd5b.png" src="../_images/11232f23b30f53648dec07cf0157093808ab6d6fbfc24ebb442c2f436d2cbd5b.png" />
<img alt="../_images/4441658c75980487832179bc3b39deb00a7ec7fa278d3bbc4a937fd224f7d138.png" src="../_images/4441658c75980487832179bc3b39deb00a7ec7fa278d3bbc4a937fd224f7d138.png" />
<img alt="../_images/5aafb102fbe52ad406e82659e26bf5ed8d880a53fc62910f119720c607648834.png" src="../_images/5aafb102fbe52ad406e82659e26bf5ed8d880a53fc62910f119720c607648834.png" />
<img alt="../_images/2df307ff81c799d3b3a2c41d27c59ccf1edc634acfd4c798107e78266d51a17e.png" src="../_images/2df307ff81c799d3b3a2c41d27c59ccf1edc634acfd4c798107e78266d51a17e.png" />
<img alt="../_images/5e0d33ef872d083c9a055a1ed9d33e517b61a3473473aad93690c3e555b2cbff.png" src="../_images/5e0d33ef872d083c9a055a1ed9d33e517b61a3473473aad93690c3e555b2cbff.png" />
<img alt="../_images/d69193aeeac28e1d188cc11c4bce4aa14ccc24d889de6be99c3ea68b2956f0a9.png" src="../_images/d69193aeeac28e1d188cc11c4bce4aa14ccc24d889de6be99c3ea68b2956f0a9.png" />
<img alt="../_images/6bc1a09f3ce2185732e9e9b6e94338a2df88d70a39206459da3be699c21010f9.png" src="../_images/6bc1a09f3ce2185732e9e9b6e94338a2df88d70a39206459da3be699c21010f9.png" />
<img alt="../_images/a2877af281cad7313117bbc1e002564b11293233f785a75ecf3e9648bebe2b31.png" src="../_images/a2877af281cad7313117bbc1e002564b11293233f785a75ecf3e9648bebe2b31.png" />
<img alt="../_images/b30e9b3dfbfff0ad9bc079fe2b63b7b8a08977e99a81d0755bfc8c21e220ed94.png" src="../_images/b30e9b3dfbfff0ad9bc079fe2b63b7b8a08977e99a81d0755bfc8c21e220ed94.png" />
<img alt="../_images/a2381a4edf4f5aa29cb884b6172fae78f187fd35733aae98d802ae98839c9e37.png" src="../_images/a2381a4edf4f5aa29cb884b6172fae78f187fd35733aae98d802ae98839c9e37.png" />
<img alt="../_images/feafd60f824f0a4e43f2fe92709b81d7502b3f7a48c8d1366993ed0ae9ec7d17.png" src="../_images/feafd60f824f0a4e43f2fe92709b81d7502b3f7a48c8d1366993ed0ae9ec7d17.png" />
<img alt="../_images/079f115c017179c9390313e119045355932079821a71d1f3d6cf86fc628e71a5.png" src="../_images/079f115c017179c9390313e119045355932079821a71d1f3d6cf86fc628e71a5.png" />
<img alt="../_images/bdbfaf6d6e00168c84a29f52e2d6327554dd5828acd74e6e56cb5d55f827d6fa.png" src="../_images/bdbfaf6d6e00168c84a29f52e2d6327554dd5828acd74e6e56cb5d55f827d6fa.png" />
<img alt="../_images/8e8f327a18b5ee8f9edee6699b8d102a79c4c26d302f1caace7cb1aad14c7df5.png" src="../_images/8e8f327a18b5ee8f9edee6699b8d102a79c4c26d302f1caace7cb1aad14c7df5.png" />
<img alt="../_images/a81c251d70b70a825036e2b3cae7d555dc0491995ab50aacae28af0f4f50b185.png" src="../_images/a81c251d70b70a825036e2b3cae7d555dc0491995ab50aacae28af0f4f50b185.png" />
<img alt="../_images/20b41695dd8634d1bf1368dbea91e10d6fe7a7daa0f5c30d967d21addacd54c1.png" src="../_images/20b41695dd8634d1bf1368dbea91e10d6fe7a7daa0f5c30d967d21addacd54c1.png" />
<img alt="../_images/ddf9e61bea922b94876a15190219126ea9fef200802f4099611621ced55589e4.png" src="../_images/ddf9e61bea922b94876a15190219126ea9fef200802f4099611621ced55589e4.png" />
<img alt="../_images/3e96152d94a72ea44ad715c028c58838c01dc53e9a2754552d94d055d3a77ce6.png" src="../_images/3e96152d94a72ea44ad715c028c58838c01dc53e9a2754552d94d055d3a77ce6.png" />
<img alt="../_images/3efc0786fde4438f2087a40d7b44925c661c8d67fb5053514a46a24ef7a14ccb.png" src="../_images/3efc0786fde4438f2087a40d7b44925c661c8d67fb5053514a46a24ef7a14ccb.png" />
<img alt="../_images/86218c471809fcfdad10a4658f34f9a7a13134c06ff84054da0f486b1db6939e.png" src="../_images/86218c471809fcfdad10a4658f34f9a7a13134c06ff84054da0f486b1db6939e.png" />
<img alt="../_images/c7541da774f6f1c837305df62f8b41bb09976030baa3bdc8165a6a48eb407a76.png" src="../_images/c7541da774f6f1c837305df62f8b41bb09976030baa3bdc8165a6a48eb407a76.png" />
<img alt="../_images/c6c2d3156ffed260213e8717d30551a4d0e8e6e51654e089aaeea0c2a6878894.png" src="../_images/c6c2d3156ffed260213e8717d30551a4d0e8e6e51654e089aaeea0c2a6878894.png" />
<img alt="../_images/d5ae331b21662636d051aa27602b3f966b6757ab94ab2325642e7342e2fad9d1.png" src="../_images/d5ae331b21662636d051aa27602b3f966b6757ab94ab2325642e7342e2fad9d1.png" />
<img alt="../_images/6a626cf36a2998d98088cb06c92b4c397d2ca6383a109dc82f74fe67d87171dd.png" src="../_images/6a626cf36a2998d98088cb06c92b4c397d2ca6383a109dc82f74fe67d87171dd.png" />
<img alt="../_images/ae027b5e4223377a298e58020941906f4df333474cad1f3c3fccbb48710364f4.png" src="../_images/ae027b5e4223377a298e58020941906f4df333474cad1f3c3fccbb48710364f4.png" />
<img alt="../_images/4699326d497db0809f2bbaa8c3938c0e12306ed3f6432e10ad9c70c5b9d50217.png" src="../_images/4699326d497db0809f2bbaa8c3938c0e12306ed3f6432e10ad9c70c5b9d50217.png" />
<img alt="../_images/ba25051936fab2f33c6899134d8ab11b518b59b16864e1755aad46e20c96d7c6.png" src="../_images/ba25051936fab2f33c6899134d8ab11b518b59b16864e1755aad46e20c96d7c6.png" />
<img alt="../_images/6cc0cdab3d73d60dc38b4757cf743f655ff3b723af58372c9b6675f29dafcc39.png" src="../_images/6cc0cdab3d73d60dc38b4757cf743f655ff3b723af58372c9b6675f29dafcc39.png" />
<img alt="../_images/a6352403fc7e7b0783f79cfb8f68f78f6ce2c30593d25cfefdc393fb46730e84.png" src="../_images/a6352403fc7e7b0783f79cfb8f68f78f6ce2c30593d25cfefdc393fb46730e84.png" />
<img alt="../_images/f56f7fc7044a81441fd8cd021265483f2c54180b2a6395f055193f529c723457.png" src="../_images/f56f7fc7044a81441fd8cd021265483f2c54180b2a6395f055193f529c723457.png" />
<img alt="../_images/7946ef0739d536811f03309501325f3610ae6b2235d4379f6128d07631466efa.png" src="../_images/7946ef0739d536811f03309501325f3610ae6b2235d4379f6128d07631466efa.png" />
<img alt="../_images/c421f93c4b9a7211ca34537f978c86631d8f455dd92a32aa1ad34aa33e26e0aa.png" src="../_images/c421f93c4b9a7211ca34537f978c86631d8f455dd92a32aa1ad34aa33e26e0aa.png" />
<img alt="../_images/ecf183c9e24d319cef69fcb97d26f981dafcd78497c22e1178ab98a8af43c23f.png" src="../_images/ecf183c9e24d319cef69fcb97d26f981dafcd78497c22e1178ab98a8af43c23f.png" />
<img alt="../_images/e8a1c2945b381614a5b89fe126b0e44d6306e68c2f9944d64067122049fb4a7c.png" src="../_images/e8a1c2945b381614a5b89fe126b0e44d6306e68c2f9944d64067122049fb4a7c.png" />
</div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="compare-snowline-to-sfctypetimodel-without-using-snowline-for-calibration">
<h1>Compare snowline to SfcTypeTIModel without using snowline for calibration<a class="headerlink" href="#compare-snowline-to-sfctypetimodel-without-using-snowline-for-calibration" title="Link to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">oggm.core.massbalance</span><span class="w"> </span><span class="kn">import</span> <span class="n">DailyTIModel</span><span class="p">,</span> <span class="n">SfcTypeTIModel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">oggm.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">ModelSettings</span>
</pre></div>
</div>
</div>
</div>
<section id="get-sfctypetimodel-and-calibrate">
<h2>Get SfcTypeTIModel and calibrate<a class="headerlink" href="#get-sfctypetimodel-and-calibrate" title="Link to this heading">#</a></h2>
<p><strong>The currently applied calibration is just a preliminary setting and will require further consideration to determine the best approach!</strong></p>
<p>At the moment, I have decided to use the precipitation factor for calibration and aim to leave the melt factor unchanged. The melt factor (the second parameter) will only be adjusted if it is not possible to match the mass balance using the precipitation factor alone.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># add daily climate</span>
<span class="n">workflow</span><span class="o">.</span><span class="n">execute_entity_task</span><span class="p">(</span><span class="n">tasks</span><span class="o">.</span><span class="n">process_gswp3_w5e5_data</span><span class="p">,</span>
                                 <span class="n">gdirs</span><span class="p">,</span> <span class="n">daily</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-11-18 14:00:13: oggm.workflow: Execute entity tasks [process_gswp3_w5e5_data] on 1 glaciers
2025-11-18 14:00:13: oggm.shop.w5e5: (RGI60-11.00719) process_gswp3_w5e5_data
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[None]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># we use the default values of OGGM prepro for the first guess variables</span>
<span class="n">default_mb_calib</span> <span class="o">=</span> <span class="n">gdirs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s1">&#39;mb_calib&#39;</span><span class="p">)</span>

<span class="n">MySfcTypeTIModel</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span>
    <span class="n">SfcTypeTIModel</span><span class="p">,</span>
    <span class="n">mb_model_class</span><span class="o">=</span><span class="n">DailyTIModel</span><span class="p">,</span>  <span class="c1"># options MonthlyTIModel, DailyTIModel</span>
    <span class="n">climate_resolution</span><span class="o">=</span><span class="s1">&#39;daily&#39;</span><span class="p">,</span>  <span class="c1"># how often the climate should be applied, options annual, monthly and daily</span>
    <span class="n">aging_frequency</span><span class="o">=</span><span class="s1">&#39;monthly&#39;</span><span class="p">,</span>  <span class="c1"># how often the buckets getting older, options annual and monthly</span>
    <span class="n">ys</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span>  <span class="c1"># this defines the year of where we start computing the buckets</span>
    <span class="n">spinup_years</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>  <span class="c1"># this defines how many buckets we are using and how we create the buckets for ys</span>
    <span class="n">store_buckets</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># if you want to save buckets on the way, available with .mb_buckets_stored, options annual, monthly, daily</span>
    <span class="n">store_buckets_dates</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># if you only save buckets at specific dates you can provide a list here in floating year convention</span>
    <span class="n">use_previous_mbs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># when setting this to True you can revisit an already calculated mb value</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">gdir</span> <span class="ow">in</span> <span class="n">gdirs</span><span class="p">:</span>
    <span class="n">ModelSettings</span><span class="p">(</span><span class="n">gdir</span><span class="p">,</span> <span class="n">filesuffix</span><span class="o">=</span><span class="s1">&#39;_daily_sfc&#39;</span><span class="p">,</span> <span class="n">parent_filesuffix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="c1"># now redo the calibration</span>
<span class="n">workflow</span><span class="o">.</span><span class="n">execute_entity_task</span><span class="p">(</span>
    <span class="n">tasks</span><span class="o">.</span><span class="n">mb_calibration_from_hugonnet_mb</span><span class="p">,</span>
    <span class="n">gdirs</span><span class="p">,</span> <span class="n">settings_filesuffix</span><span class="o">=</span><span class="s1">&#39;_daily_sfc&#39;</span><span class="p">,</span>
    <span class="n">observations_filesuffix</span><span class="o">=</span><span class="s1">&#39;_dialy_sfc&#39;</span><span class="p">,</span>  <span class="c1"># new handling of observations</span>
    <span class="n">informed_threestep</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># this was calibrated with monthly, but still use it</span>
    <span class="n">overwrite_gdir</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">calibrate_param1</span><span class="o">=</span><span class="s1">&#39;prcp_fac&#39;</span><span class="p">,</span>
    <span class="n">calibrate_param2</span><span class="o">=</span><span class="s1">&#39;melt_f&#39;</span><span class="p">,</span>
    <span class="n">calibrate_param3</span><span class="o">=</span><span class="s1">&#39;temp_bias&#39;</span><span class="p">,</span>
    <span class="n">prcp_fac</span><span class="o">=</span><span class="n">default_mb_calib</span><span class="p">[</span><span class="s1">&#39;prcp_fac&#39;</span><span class="p">],</span>
    <span class="n">melt_f</span><span class="o">=</span><span class="n">default_mb_calib</span><span class="p">[</span><span class="s1">&#39;melt_f&#39;</span><span class="p">],</span>
    <span class="n">mb_model_class</span><span class="o">=</span><span class="n">MySfcTypeTIModel</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-11-18 14:00:13: oggm.workflow: Execute entity tasks [mb_calibration_from_hugonnet_mb] on 1 glaciers
2025-11-18 14:00:13: oggm.core.massbalance: (RGI60-11.00719) mb_calibration_from_hugonnet_mb_daily_sfc
2025-11-18 14:00:13: oggm.core.massbalance: (RGI60-11.00719) mb_calibration_from_scalar_mb_daily_sfc
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;rgi_id&#39;: &#39;RGI60-11.00719&#39;,
  &#39;bias&#39;: 0,
  &#39;melt_f&#39;: 5.236607243012583,
  &#39;prcp_fac&#39;: 1.3037524335399522,
  &#39;temp_bias&#39;: np.float64(1.7583130779353044),
  &#39;reference_mb&#39;: -913.1,
  &#39;reference_mb_err&#39;: 154.0,
  &#39;reference_period&#39;: &#39;2000-01-01_2020-01-01&#39;,
  &#39;mb_global_params&#39;: {&#39;temp_default_gradient&#39;: -0.0065,
   &#39;temp_all_solid&#39;: 0.0,
   &#39;temp_all_liq&#39;: 2.0,
   &#39;temp_melt&#39;: 0.0},
  &#39;baseline_climate_source&#39;: &#39;GSWP3_W5E5_daily&#39;}]
</pre></div>
</div>
</div>
</div>
</section>
<section id="get-snow-buckets-for-observation-dates">
<h2>Get snow buckets for observation dates<a class="headerlink" href="#get-snow-buckets-for-observation-dates" title="Link to this heading">#</a></h2>
<p>Here, I demonstrate how to obtain the model counterparts for the observations. Specifically, I create a float year time series based on the actual dates.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">oggm.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">date_to_floatyear</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># load data and exclude some stuff, the resulting dates are the one we are intereseted in</span>
<span class="n">ds_obs</span> <span class="o">=</span> <span class="n">get_categories_per_elevation_band</span><span class="p">(</span><span class="n">gdir</span><span class="p">)</span>
<span class="n">ds_obs</span> <span class="o">=</span> <span class="n">exclude_empty_elevation_bins</span><span class="p">(</span><span class="n">ds_obs</span><span class="p">)</span>
<span class="n">ds_obs</span> <span class="o">=</span> <span class="n">exclude_dates_with_to_much_cloud_cover</span><span class="p">(</span><span class="n">ds_obs</span><span class="p">,</span> <span class="n">cloud_cover</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># convert the dates into floatyears</span>
<span class="n">dates</span> <span class="o">=</span> <span class="n">ds_obs</span><span class="o">.</span><span class="n">t_sfc_type</span><span class="o">.</span><span class="n">values</span>
<span class="n">years</span> <span class="o">=</span> <span class="n">dates</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;datetime64[Y]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1970</span>
<span class="n">months</span> <span class="o">=</span> <span class="n">dates</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;datetime64[M]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="o">%</span> <span class="mi">12</span> <span class="o">+</span> <span class="mi">1</span>
<span class="n">days</span> <span class="o">=</span> <span class="p">(</span><span class="n">dates</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;datetime64[D]&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">dates</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;datetime64[M]&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

<span class="n">float_years</span> <span class="o">=</span> <span class="n">date_to_floatyear</span><span class="p">(</span>
    <span class="n">y</span><span class="o">=</span><span class="n">years</span><span class="p">,</span>
    <span class="n">m</span><span class="o">=</span><span class="n">months</span><span class="p">,</span>
    <span class="n">d</span><span class="o">=</span><span class="n">days</span><span class="p">)</span>

<span class="n">float_years_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">float_years</span><span class="p">,</span> <span class="n">dates</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># initialize the mb_model and tell which buckets we are intereseted in</span>
<span class="n">mb_model</span> <span class="o">=</span> <span class="n">MySfcTypeTIModel</span><span class="p">(</span>
    <span class="n">gdirs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="n">settings_filesuffix</span><span class="o">=</span><span class="s1">&#39;_daily_sfc&#39;</span><span class="p">,</span>
    <span class="n">store_buckets</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">store_buckets_dates</span><span class="o">=</span><span class="n">float_years</span>
                            <span class="p">)</span>

<span class="c1"># by calling the annual mb for 2019 all previous timesteps need to be calculated and the all buckets are available</span>
<span class="n">mb_model</span><span class="o">.</span><span class="n">get_annual_mb</span><span class="p">(</span><span class="n">mb_model</span><span class="o">.</span><span class="n">fl</span><span class="o">.</span><span class="n">surface_h</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2019</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="get-modelled-snowline">
<h2>get modelled snowline<a class="headerlink" href="#get-modelled-snowline" title="Link to this heading">#</a></h2>
<p>Here is a function for obtaining the modeled snowline.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">oggm.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">floatyear_to_date</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_modelled_snowline</span><span class="p">(</span><span class="n">gdir</span><span class="p">,</span> <span class="n">years</span><span class="p">,</span> <span class="n">settings_filesuffix</span><span class="p">):</span>
    <span class="c1"># initialize seleceted mb_model</span>
    <span class="n">mb_model</span> <span class="o">=</span> <span class="n">MySfcTypeTIModel</span><span class="p">(</span>
        <span class="n">gdir</span><span class="p">,</span>
        <span class="n">settings_filesuffix</span><span class="o">=</span><span class="n">settings_filesuffix</span><span class="p">,</span>
        <span class="n">store_buckets</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">store_buckets_dates</span><span class="o">=</span><span class="n">years</span>
                            <span class="p">)</span>
    <span class="c1"># get modelled data</span>
    <span class="n">mb_model</span><span class="o">.</span><span class="n">get_annual_mb</span><span class="p">(</span><span class="n">mb_model</span><span class="o">.</span><span class="n">fl</span><span class="o">.</span><span class="n">surface_h</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2019</span><span class="p">)</span>

    <span class="c1"># generate snow lines</span>
    <span class="n">snow_line</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">snow_line_years</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">yr</span> <span class="ow">in</span> <span class="n">years</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">mb_bucket</span> <span class="o">=</span> <span class="n">mb_model</span><span class="o">.</span><span class="n">mb_buckets_stored</span><span class="p">[</span><span class="n">yr</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">continue</span>
    
        <span class="c1"># we use all layers from October onward</span>
        <span class="n">number_layers</span> <span class="o">=</span> <span class="n">floatyear_to_date</span><span class="p">(</span><span class="n">yr</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">3</span>  <span class="c1"># 3 for Oct, Nov, Dec</span>
        <span class="n">layers_of_interest</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;firn_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">number_layers</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
    
        <span class="n">not_melted_layers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">mb_bucket</span><span class="p">[</span><span class="n">layers_of_interest</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># check if completely snow free</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">not_melted_layers</span><span class="p">):</span>
            <span class="n">snow_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">)</span>
        <span class="c1"># check if fully snow covered</span>
        <span class="k">elif</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">not_melted_layers</span><span class="p">):</span>
            <span class="n">snow_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">)</span>
        <span class="c1"># otherwise get the lowest elevation band with snow cover</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">snow_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mb_model</span><span class="o">.</span><span class="n">fl</span><span class="o">.</span><span class="n">surface_h</span><span class="p">[</span><span class="n">not_melted_layers</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">snow_line_years</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">yr</span><span class="p">)</span>

    <span class="n">snow_line_years</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">float_years_dict</span><span class="p">[</span><span class="n">yr</span><span class="p">]</span> <span class="k">for</span> <span class="n">yr</span> <span class="ow">in</span> <span class="n">snow_line_years</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">snow_line</span><span class="p">,</span> <span class="n">snow_line_years</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">snow_line</span><span class="p">,</span> <span class="n">snow_line_years</span> <span class="o">=</span> <span class="n">get_modelled_snowline</span><span class="p">(</span>
    <span class="n">gdir</span><span class="p">,</span> <span class="n">float_years</span><span class="p">,</span> <span class="n">settings_filesuffix</span><span class="o">=</span><span class="s1">&#39;_daily_sfc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="plot-for-comparision">
<h2>plot for comparision<a class="headerlink" href="#plot-for-comparision" title="Link to this heading">#</a></h2>
<p>A first plot for visual comparison.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="c1"># get observations</span>
<span class="n">ds_obs</span> <span class="o">=</span> <span class="n">get_categories_per_elevation_band</span><span class="p">(</span><span class="n">gdir</span><span class="p">)</span>
<span class="n">ds_obs</span> <span class="o">=</span> <span class="n">exclude_empty_elevation_bins</span><span class="p">(</span><span class="n">ds_obs</span><span class="p">)</span>
<span class="n">ds_obs</span> <span class="o">=</span> <span class="n">exclude_dates_with_to_much_cloud_cover</span><span class="p">(</span><span class="n">ds_obs</span><span class="p">,</span> <span class="n">cloud_cover</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">snowline_obs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">snowline_obs_lower</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">snowline_obs_upper</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">date</span> <span class="ow">in</span> <span class="n">ds_obs</span><span class="o">.</span><span class="n">t_sfc_type</span><span class="p">:</span>
    <span class="n">ds_use</span> <span class="o">=</span> <span class="n">ds_obs</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">t_sfc_type</span><span class="o">=</span><span class="n">date</span><span class="p">)</span>

    <span class="n">tmp_idx</span><span class="p">,</span> <span class="n">tmp_obs</span> <span class="o">=</span> <span class="n">get_snowline</span><span class="p">(</span><span class="n">ds_use</span><span class="p">)</span>
    <span class="n">snowline_obs_lower</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmp_obs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># 25% snow cover</span>
    <span class="n">snowline_obs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmp_obs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># 50% snow cover</span>
    <span class="n">snowline_obs_upper</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmp_obs</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>  <span class="c1"># 75% snow cover</span>

<span class="c1"># get model output</span>
<span class="n">snowline_mdl</span><span class="p">,</span> <span class="n">snowline_mdl_years</span> <span class="o">=</span> <span class="n">get_modelled_snowline</span><span class="p">(</span>
    <span class="n">gdir</span><span class="p">,</span> <span class="n">float_years</span><span class="p">,</span> <span class="n">settings_filesuffix</span><span class="o">=</span><span class="s1">&#39;_daily_sfc&#39;</span><span class="p">)</span>

<span class="c1"># deal with special cases completely snow covered or completely snow free</span>
<span class="n">all_snowlines</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">snowline_mdl</span><span class="p">,</span> <span class="n">snowline_obs_lower</span><span class="p">,</span> <span class="n">snowline_obs_upper</span><span class="p">))</span>
<span class="n">min_height</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">all_snowlines</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isinf</span><span class="p">(</span><span class="n">all_snowlines</span><span class="p">)])</span>
<span class="n">max_height</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">all_snowlines</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isinf</span><span class="p">(</span><span class="n">all_snowlines</span><span class="p">)])</span>
<span class="c1"># set the plotting limit 100 apart of extreme values</span>
<span class="n">neg_inf_value</span> <span class="o">=</span> <span class="n">min_height</span> <span class="o">-</span> <span class="mi">150</span>
<span class="n">neg_inf_plotting_area</span> <span class="o">=</span> <span class="p">[</span><span class="n">min_height</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="n">min_height</span> <span class="o">-</span> <span class="mi">200</span><span class="p">]</span>
<span class="n">pos_inf_value</span> <span class="o">=</span> <span class="n">max_height</span> <span class="o">+</span> <span class="mi">150</span>
<span class="n">pos_inf_plotting_area</span> <span class="o">=</span> <span class="p">[</span><span class="n">max_height</span> <span class="o">+</span> <span class="mi">100</span><span class="p">,</span> <span class="n">max_height</span> <span class="o">+</span> <span class="mi">200</span><span class="p">]</span>

<span class="k">def</span><span class="w"> </span><span class="nf">set_infs</span><span class="p">(</span><span class="n">var</span><span class="p">):</span>
    <span class="n">var</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isposinf</span><span class="p">(</span><span class="n">var</span><span class="p">),</span> <span class="n">pos_inf_value</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isneginf</span><span class="p">(</span><span class="n">var</span><span class="p">),</span> <span class="n">neg_inf_value</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>

<span class="c1"># plot observations with errorbars</span>
<span class="n">snowline_err</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
    <span class="nb">tuple</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">set_infs</span><span class="p">(</span><span class="n">snowline_obs</span><span class="p">)</span> <span class="o">-</span> <span class="n">set_infs</span><span class="p">(</span><span class="n">snowline_obs_lower</span><span class="p">),</span>
              <span class="n">set_infs</span><span class="p">(</span><span class="n">snowline_obs_upper</span><span class="p">)</span> <span class="o">-</span> <span class="n">set_infs</span><span class="p">(</span><span class="n">snowline_obs</span><span class="p">))))</span><span class="o">.</span><span class="n">T</span>
<span class="n">ax</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">ds_obs</span><span class="o">.</span><span class="n">t_sfc_type</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">set_infs</span><span class="p">(</span><span class="n">snowline_obs</span><span class="p">),</span> <span class="n">yerr</span><span class="o">=</span><span class="n">snowline_err</span><span class="p">,</span>
            <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">ecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">capsize</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Observations&#39;</span><span class="p">)</span>

<span class="c1"># plot model output</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">snowline_mdl_years</span><span class="p">,</span> <span class="n">set_infs</span><span class="p">(</span><span class="n">snowline_mdl</span><span class="p">),</span>
        <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="s1">&#39;OGGM snow tracking&#39;</span><span class="p">)</span>

<span class="c1"># add special areas</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axhspan</span><span class="p">(</span><span class="n">neg_inf_plotting_area</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">neg_inf_plotting_area</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
           <span class="n">color</span><span class="o">=</span><span class="s1">&#39;lightblue&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;completly snow covered&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axhspan</span><span class="p">(</span><span class="n">pos_inf_plotting_area</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pos_inf_plotting_area</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
           <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;completly snow free&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="s1">&#39;on&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Snowline Altitude&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Altitude [m]&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Altitude [m]&#39;)
</pre></div>
</div>
<img alt="../_images/cecfa6fc4879975a37843682092f7db39653caf8fc57aeca344d42bd5c6ee8b8.png" src="../_images/cecfa6fc4879975a37843682092f7db39653caf8fc57aeca344d42bd5c6ee8b8.png" />
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="next-steps">
<h1>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading">#</a></h1>
<p>The next steps would be to use the snowline observations for calibration. Some thoughts on this (open for discussion):</p>
<ul class="simple">
<li><p>Use the precipitation factor as a control parameter for matching the snowline.</p></li>
<li><p>Whenever a new precipitation factor is defined, the melt factor should be calibrated to match Hugonnet before obtaining the modeled snowlines.</p></li>
<li><p>When comparing observed and modeled snowlines, we need to handle special cases:</p>
<ul>
<li><p>Fully snow-covered areas (<code class="docutils literal notranslate"><span class="pre">snowline</span> <span class="pre">=</span> <span class="pre">-np.inf</span></code>).</p></li>
<li><p>No snow cover (<code class="docutils literal notranslate"><span class="pre">snowline</span> <span class="pre">=</span> <span class="pre">np.inf</span></code>).</p></li>
<li><p>Additionally, if we want to be precise, since the outline used for creating the observations is smaller than the one we are using, if the observation shows full snow cover, we should ensure that the modeled snow cover is at least as large as the observation. However, for a first attempt, this can be ignored.</p></li>
</ul>
</li>
<li><p>Before minimizing automatically, check if the defined cost function has a minimum by testing an array of precipitation factors.</p></li>
</ul>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="05_mcs_workflow_example.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Set up a gdir to play with</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Add Surface Type observations to Datacubes</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#initialize-a-gdir-as-an-example">Initialize a gdir as an example</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#add-surface-type-observation-to-gridded-data">add surface type observation to gridded data</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-a-snow-line-observation">Generate a snow line observation</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#define-elevation-bands-used-for-snow-line-creation">Define elevation bands used for snow line creation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#count-surface-types-and-uncertainty-flags-per-elevation-band">Count surface types and uncertainty flags per elevation band</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#define-snowline-altitude-for-each-time-stamp">Define snowline altitude for each time stamp</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exclude-elevation-bins-with-no-valid-data">exclude elevation bins with no valid data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exclude-dates-with-more-than-50-cloud-cover">exclude dates with more than 50% cloud cover</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-snowline">define snowline</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#look-at-result-of-derived-snowline-from-observation-per-timestamp">look at result of derived snowline from observation per timestamp</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#compare-snowline-to-sfctypetimodel-without-using-snowline-for-calibration">Compare snowline to SfcTypeTIModel without using snowline for calibration</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-sfctypetimodel-and-calibrate">Get SfcTypeTIModel and calibrate</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-snow-buckets-for-observation-dates">Get snow buckets for observation dates</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-modelled-snowline">get modelled snowline</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-for-comparision">plot for comparision</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#next-steps">Next Steps</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By DTCG Consortium
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
  Last updated on Nov 18, 2025.
  <br/>
</p>
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <p>
&copy; Copyright 2024-2025 DTC-Glaciers consortium
</p>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>